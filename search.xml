<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>low power RTL优化之提高clock gating efficiency</title>
      <link href="/p/low-power-rtl-you-hua-zhi-ti-gao-cge.html"/>
      <url>/p/low-power-rtl-you-hua-zhi-ti-gao-cge.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-block-level-clock-gating"><a class="markdownIt-Anchor" href="#1-block-level-clock-gating"></a> 1. block level clock gating</h2><p>如果某个模块或者功能可以打开或关闭，且logic相对独立，则可以在这部分logic的时钟上加手动插入一个ICG，用模块是能控制ICG的开关，这样能最大限度的提升gating效率。</p><ol><li><p>ICG最好选取驱动能力较大的，以便于驱动足够多的DFF。</p></li><li><p>ICG建议加一个wrapper,这样当需要替换其他工艺时，只需要将wrapper里的instance 换掉。</p></li><li><p>综合时对此类ICG设置don’t touch</p></li></ol><a id="more"></a><h2 id="2-rtl-clock-gating"><a class="markdownIt-Anchor" href="#2-rtl-clock-gating"></a> 2. RTL clock gating</h2><p>Lowpower RTL综合的精髓就是把本该综合在D端的enable信号，综合到CLK端，这样只有enable有效才能释放一个clk使得D端数据传递到Q端。当D超过一定bit数，通常认定&gt;=4bit能节省power, 为了达到这种效果，寄存器的赋值一定是条件赋值，示范代码和电路如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="17090914384611ec553ccb5a31" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/17090914384611ec553ccb5a31.png" /></p><p>Low power RTL 理想代码结构：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>    <span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rstn<span class="token punctuation">)</span><span class="token keyword">begin</span>        Q<span class="token operator">&lt;=</span> <span class="token number">'h0</span><span class="token punctuation">;</span>    <span class="token keyword">end</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>condition_1<span class="token punctuation">)</span><span class="token keyword">begin</span>        Q<span class="token operator">&lt;=</span> D_1<span class="token punctuation">;</span>    <span class="token keyword">end</span>    <span class="token comment">//other condition 2, 3, 4 …</span><span class="token keyword">else</span> <span class="token keyword">begin</span>Q<span class="token operator">&lt;=</span> Q<span class="token punctuation">;</span>  <span class="token comment">//better to remove this assignment, then data willbe kept.</span><span class="token keyword">end</span><span class="token keyword">end</span></pre></div><p>错误代码的示例, 如果不管在什么情况下，总有D值需要打到Q, 使得即使综合出来ICG， 该ICG也不能关断。错误远不止下面几种，if/else if/else, case/default 等等</p><h3 id="没有赋值条件"><a class="markdownIt-Anchor" href="#没有赋值条件"></a> 没有赋值条件</h3><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span> <span class="token comment">//”if-else”hierarchy 0, default is “else” block</span>Q <span class="token operator">&lt;=</span> D<span class="token punctuation">;</span>                <span class="token comment">//Error: no condition for Data assignment.</span><span class="token keyword">end</span></pre></div><h3 id="else-赋值"><a class="markdownIt-Anchor" href="#else-赋值"></a> else 赋值</h3><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token comment">//hier0</span>    <span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>                       <span class="token comment">//hier1 “if” block</span>Q <span class="token operator">&lt;=</span>’h0<span class="token punctuation">;</span>       <span class="token keyword">end</span>     <span class="token keyword">else</span> <span class="token keyword">begin</span>                      <span class="token comment">//hier1 “else” block</span>       Q<span class="token operator">&lt;=</span>D<span class="token punctuation">;</span>                            <span class="token comment">//Error: no condition for Dataassignment.</span>   <span class="token keyword">end</span><span class="token keyword">end</span></pre></div><h3 id="多级条件中的else"><a class="markdownIt-Anchor" href="#多级条件中的else"></a> 多级条件中的else</h3><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token comment">//hier0</span>    <span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>                         <span class="token comment">//hier1 “if” block</span>Q <span class="token operator">&lt;=</span>’h0<span class="token punctuation">;</span>  <span class="token keyword">end</span>     <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>condition1<span class="token punctuation">)</span> <span class="token keyword">begin</span>           <span class="token comment">//hier1 “else if” block</span><span class="token function">if</span><span class="token punctuation">(</span>condition1_1<span class="token punctuation">)</span> <span class="token keyword">begin</span>           <span class="token comment">//hier2“if”block</span>Q<span class="token operator">&lt;=</span>D1_1<span class="token punctuation">;</span><span class="token keyword">end</span>        <span class="token keyword">else</span> <span class="token keyword">begin</span>                  <span class="token comment">//hier2“else” block</span>Q<span class="token operator">&lt;=</span>D1_2<span class="token punctuation">;</span>                <span class="token comment">//not report error, as it is in “else if”block.</span><span class="token keyword">end</span><span class="token keyword">end</span>     <span class="token keyword">else</span> <span class="token keyword">begin</span>                   <span class="token comment">//hier1 “else” block</span><span class="token function">if</span><span class="token punctuation">(</span>conditon2_1<span class="token punctuation">)</span> <span class="token keyword">begin</span>     <span class="token comment">//hier2“if” block</span>Q<span class="token operator">&lt;=</span>D2_1<span class="token punctuation">;</span><span class="token keyword">end</span>        <span class="token keyword">else</span> <span class="token keyword">begin</span>                <span class="token comment">//hier2“else” block, in hier1 “else” block</span>Q<span class="token operator">&lt;=</span>D2_2<span class="token punctuation">;</span>              <span class="token comment">//Error: no condition for Data assignment.</span><span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p>下面这个例子不会报错</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rstn<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token comment">//hier0</span><span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rstn<span class="token punctuation">)</span><span class="token keyword">begin</span>                          <span class="token comment">//hier1 “if” block</span>Q <span class="token operator">&lt;=</span>’h0<span class="token punctuation">;</span>   <span class="token keyword">end</span>    <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>condition1<span class="token punctuation">)</span> <span class="token keyword">begin</span>              <span class="token comment">//hire1 “else if” block</span>Q<span class="token operator">&lt;=</span>Q<span class="token punctuation">;</span>                               <span class="token comment">//”Q&lt;=Q”ensure ICG insertion</span><span class="token keyword">end</span>    <span class="token keyword">else</span> <span class="token keyword">begin</span>                             <span class="token comment">//hier1 “else” block</span>Q<span class="token operator">&lt;=</span>D<span class="token punctuation">;</span>                               <span class="token comment">//Not reportERROR as “Q&lt;=Q” in “else if”.</span><span class="token keyword">end</span><span class="token keyword">end</span></pre></div>]]></content>
      
      
      <categories>
          
          <category> 低功耗设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Low Power </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>electron-vue学习之环境搭建</title>
      <link href="/p/electron-learning-chp1.html"/>
      <url>/p/electron-learning-chp1.html</url>
      
        <content type="html"><![CDATA[<h2 id="electron-vue环境配置"><a class="markdownIt-Anchor" href="#electron-vue环境配置"></a> electron-vue环境配置</h2><p>工作环境centos8，切换到root用户安装npm、yarn、vue_cli</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-bash" >yum <span class="token function">install</span> <span class="token function">npm</span><span class="token function">npm</span> <span class="token function">install</span> yarn -g<span class="token function">npm</span> <span class="token function">install</span> vue_cli -g</pre></div><p>切换到工作用户，使用淘宝源下载库更快速</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-bash" ><span class="token function">npm</span> config <span class="token keyword">set</span> registry<span class="token operator">=</span>http://registry.npm.taobao.orgyarn config <span class="token keyword">set</span> registry https://registry.npm.taobao.orgyarn config <span class="token keyword">set</span> sass_binary_site https://npm.taobao.org/mirrors/node-sass/</pre></div><p>使用<code>npm config list</code>和<code>yarn config list</code>查看切换源是否成功</p><a id="more"></a><h2 id="初始化electron_vue项目"><a class="markdownIt-Anchor" href="#初始化electron_vue项目"></a> 初始化electron_vue项目</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-bash" ><span class="token comment">#下载模板</span>vue init simulatedgreg/electron-vue my-project<span class="token comment">#下载依赖库</span>yarn<span class="token comment">#运行</span>yarn run dev<span class="token comment">#发行</span>yarn build</pre></div><p>在开发环境搭建的时候需要注意下面俩点：</p><ol><li>electron-vue 虽然说使用npm也可以下载依赖，但是最好不要用，在我这个版本测试的时候，使用npm下载依赖打包时有问题，总而言之，就是用yarn就好了。</li><li>Eslint选择no，testing都选择no，其他默认即可</li><li>选择打包工具的时候，选择electron packager，不要选electron builder，builder在打包的时候回从aws上面下载资源，但是我这即使使用了某些不可说的工具，也下载不下来这些资源，会导致打包失败。</li></ol><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="1576944350084" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/1576944350084.png" /></p><h2 id="安装element-ui环境"><a class="markdownIt-Anchor" href="#安装element-ui环境"></a> 安装Element-UI环境</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-bash" ><span class="token function">npm</span> <span class="token function">install</span> element-ui -S</pre></div><p>在<code>src/renderer/main.js</code>添加</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-js" ><span class="token comment">// element-ui</span><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span></pre></div><p>修改<code>src/render/components/LandingPage.vue</code>, 下面这一段就是从element官网copy的一段代码, 然后我把它精简了一下, 下面这段代码就当做我们演示element</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-vue line-numbers" >&lt;template&gt;  &lt;el-container style=&quot;height: 500px; border: 1px solid #eee&quot;&gt;  &lt;el-aside width=&quot;200px&quot; style=&quot;background-color: rgb(238, 241, 246)&quot;&gt;    &lt;el-menu :default-openeds=&quot;['1', '3']&quot;&gt;      &lt;el-submenu index=&quot;1&quot;&gt;       &lt;el-menu-item index=&quot;1-1&quot;&gt;选项1&lt;/el-menu-item&gt;      &lt;/el-submenu&gt;    &lt;/el-menu&gt;  &lt;/el-aside&gt;    &lt;el-container&gt;    &lt;el-header style=&quot;text-align: right; font-size: 12px&quot;&gt;    &lt;/el-header&gt;    &lt;el-main&gt;      &lt;el-table :data=&quot;tableData&quot;&gt;        &lt;el-table-column prop=&quot;date&quot; label=&quot;日期&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;        &lt;el-table-column prop=&quot;name&quot; label=&quot;姓名&quot; width=&quot;120&quot;&gt;&lt;/el-table-column&gt;        &lt;el-table-column prop=&quot;address&quot; label=&quot;地址&quot;&gt;&lt;/el-table-column&gt;      &lt;/el-table&gt;    &lt;/el-main&gt;  &lt;/el-container&gt;&lt;/el-container&gt;&lt;/template&gt;&lt;script&gt;   export default {    data() {      const item = {        date: '2016-05-02',        name: '王小虎',        address: '上海市普陀区金沙江路 1518 弄'      };      return {        tableData: Array(5).fill(item)      }    }  };&lt;/script&gt;&lt;style&gt;  .el-header {    background-color: #B3C0D1;    color: #333;    line-height: 60px;  }    .el-aside {    color: #333;  }&lt;/style&gt;NaN</div><p>然后执行<code>yarn run dev</code>会发现el-table这个表格组件好像很特殊！它怎么都显示不出来，除了它以外其他的控件都能正常显示，根据electron-vue作者自己的回复，element-ui需要加入到白名单里面，需要修改<code>.electron-vue/webpack.renderer.config.js</code></p><p>将：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-js" ><span class="token keyword">let</span> whiteListedModules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span></pre></div><p>修改为：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-js" ><span class="token keyword">let</span> whiteListedModules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'element-ui'</span><span class="token punctuation">]</span></pre></div>]]></content>
      
      
      <categories>
          
          <category> electron </category>
          
      </categories>
      
      
        <tags>
            
            <tag> electron </tag>
            
            <tag> electron-vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jtag工作原理</title>
      <link href="/p/jtag.html"/>
      <url>/p/jtag.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-边界扫描"><a class="markdownIt-Anchor" href="#1-边界扫描"></a> 1. 边界扫描</h2><p>在JTAG调试当中，边界扫描（Boundary-Scan）是一个很重要的概念。边界扫描技术的基本思想是在靠近芯片的输入输出管脚上增加一个移位寄存器单元。因为这些移位寄存器单元都分布在芯片的边界上（周围），所以被称为边界扫描寄存器（Boundary-Scan Register Cell）。当芯片处于调试状态的时候，这些边界扫描寄存器可以将芯片和外围的输入输出隔离开来。通过这些边界扫描寄存器单元，可以实现对芯片输入输出信号的观察和控制。对于芯片的输入管脚，可以通过与之相连的边界扫描寄存器单元把信号（数据）加载倒该管脚中去；对于芯片的输出管脚，也可以通过与之相连的边界扫描寄存器“捕获”（CAPTURE）该管脚上的输出信号。在正常的运行状态下，这些边界扫描寄存器对芯片来说是透明的，所以正常的运行不会受到任何影响。这样，边界扫描寄存器提供了一个便捷的方式用以观测和控制所需要调试的芯片。另外，芯片输入输出管脚上的边界扫描（移位）寄存器单元可以相互连接起来，在芯片的周围形成一个边界扫描链（Boundary-Scan Chain）。一般的芯片都会提供几条独立的边界扫描链，用来实现完整的测试功能。边界扫描链可以串行的输入和输出，通过相应的时钟信号和控制信号，就可以方便的观察和控制处在调试状态下的芯片。</p><p>利用边界扫描链可以实现对芯片的输入输出进行观察和控制。下一个问题是：如何来管理和使用这些边界扫描链？对边界扫描链的控制主要是通过TAP(Test Access Port) Controller来完成的。在下一节，我们一起来看看TAP是如何工作的。</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="Boundary-scan Architechture" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20190116145154156.png" /></p><a id="more"></a><h2 id="2-taptest-access-port"><a class="markdownIt-Anchor" href="#2-taptest-access-port"></a> 2. TAP(Test Access Port)</h2><p>在上一节，我们已经简单介绍了边界扫描链，而且也了解了一般的芯片都会提供几条边界扫描链，用来实现完整的测试功能。下面，我将逐步介绍如何实现扫描链的控制和访问。</p><p>在IEEE 1149.1标准里面，寄存器被分为两大类：数据寄存器(DR－Data Register)和指令寄存器(IR－Instruction Register)。边界扫描链属于数据寄存器中很重要的一种。边界扫描链用来实现对芯片的输入输出的观察和控制。而指令寄存器用来实现对数据寄存器的控制，例如：在芯片提供的所有边界扫描链中，选择一条指定的边界扫描链作为当前的目标扫描链，并作为访问对象。下面，让我们从TAP(Test Access Port)开始。</p><h3 id="21-接口信号定义"><a class="markdownIt-Anchor" href="#21-接口信号定义"></a> 2.1 接口信号定义</h3><p>TAP是一个通用的端口，通过TAP可以访问芯片提供的所有数据寄存器（DR）和指令寄存器（IR）。对整个TAP的控制是通过TAP Controller来完成的。TAP总共包括5个信号接口TCK、TMS、TDI、TDO和TRST ：其中4个是输入信号接口和另外1个是输出信号接口。一般，我们见到的开发板上都有一个JTAG接口，该JTAG接口的主要信号接口就是这5个。下面，我先分别介绍这个5个接口信号及其作用。</p><ul data-mark="*"><li><strong>Test Clock Input (TCK)</strong><br />TCK为TAP的操作提供了一个独立的、基本的时钟信号，TAP的所有操作都是通过这个时钟信号来驱动的。TCK在IEEE 1149.1标准里是<strong>强制要求</strong>的。</li><li><strong>Test Mode Selection Input (TMS)</strong><br />TMS信号用来控制TAP状态机的转换。通过TMS信号，可以控制TAP在不同的状态间相互转换。TMS信号在TCK的上升沿有效。TMS在IEEE 1149.1标准里是<strong>强制要求</strong>的。</li><li><strong>Test Data Input (TDI)</strong><br />TDI是数据输入的接口。所有要输入到特定寄存器的数据都是通过TDI接口一位一位串行输入的（由TCK驱动）。TDI在IEEE 1149.1标准里是<strong>强制要求</strong>的。</li><li><strong>Test Data Output (TDO)</strong><br />TDO是数据输出的接口。所有要从特定的寄存器中输出的数据都是通过TDO接口一位一位串行输出的（由TCK驱动）。TDO在IEEE 1149.1标准里是<strong>强制要求</strong>的。</li><li><strong>Test Reset Input (TRST)</strong><br />TRST可以用来对TAP Controller进行复位（初始化）。不过这个信号接口在IEEE 1149.1标准里是可选的，并<strong>不是强制要求的</strong>。因为通过TMS也可以对TAP Controller进行复位（初始化）。</li></ul><h3 id="22-指令寄存器-公共指令以及数据寄存器"><a class="markdownIt-Anchor" href="#22-指令寄存器-公共指令以及数据寄存器"></a> 2.2 指令寄存器、公共指令以及数据寄存器</h3><p>在IEEE 1149.1标准当中，规定了一些指令寄存器、公共指令和相关的一些数据寄存器。对于特定的芯片而言，芯片厂商都一般都会在IEEE 1149.1标准的基础上，扩充一些私有的指令和数据寄存器，以帮助在开发过程中进行进行方便的测试和调试。在这一部分，我将简单介绍IEEE 1149.1规定的一些常用的指令及其相关的寄存器。</p><p><strong>指令寄存器：</strong><br />指令寄存器允许特定的指令被装载到指令寄存器当中，用来选择需要执行的测试，或者选择需要访问的测试数据寄存器。每个支持JTAG调试的芯片必须包含一个指令寄存器。</p><p><strong>BYPASS指令和Bypass寄存器：</strong><br />Bypass寄存器是一个一位的移位寄存器，通过BYPASS指令，可以将bypass寄存器连接到TDI和TDO之间。在不需要进行任何测试的时候，将bypass寄存器连接在TDI和TDO之间，在TDI和TDO之间提供一条长度最短的串行路径。这样允许测试数据可以快速的通过当前的芯片送到开发板上别的芯片上去。</p><p><strong>IDCODE指令和Device Identification 寄存器：</strong><br />Device identification寄存器中可以包括生产厂商的信息，部件号码，和器件的版本信息等。使用IDCODE指令，就可以通过TAP来确定器件的这些相关信息。例如，ARM MULTI-ICE可以自动识别当前调试的是什么片子，其实就是通过IDCODE指令访问Device Identification寄存器来获取的。</p><p><strong>INTEST指令和Boundary-Scan 寄存器：</strong><br />Boundary-Scan寄存器就是我们前面例子中说到的边界扫描链，一般一个芯片内部有多个边界扫描链。通过边界扫描链，可以进行部件间的连通性测试。当然，更重要的是可以对测试器件的输入输出进行观测和控制，以达到测试器件的内部逻辑的目的。INTEST指令是在IEEE 1149.1标准里面定义的一条很重要的指令：结合边界扫描链，该指令允许对开发板上器件的系统逻辑进行内部测试。在ARM JTAG调试当中，这是一条频繁使用的测试指令。</p><p>我们前面说过，寄存器分为两大类：指令寄存器和数据寄存器。在上面提到的Bypass寄存器、Device Identification寄存器和Boundary-scan寄存器（边界扫描链），都属于数据寄存器。在调试当中，边界扫描寄存器（边界扫描链）最重要，使用的也最为频繁。</p><p>事实上，通过TAP接口，对数据寄存器（DR）进行访问的一般过程是：</p><ul data-mark="*"><li>通过指令寄存器（IR），选定一个需要访问的数据寄存器(bypass,ID,Boundary-scan)；</li><li>把选定的数据寄存器连接到TDI和TDO之间；</li><li>由TCK驱动，通过TDI，把需要的数据输入到选定的数据寄存器当中去；同时把选定的数据寄存器中的数据通过TDO读出来。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="Djtag State Machine" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20190116153059223.png" /></p><h3 id="23-tap状态机"><a class="markdownIt-Anchor" href="#23-tap状态机"></a> 2.3 TAP状态机</h3><p>接下来，让我们一起来了解一下TAP的状态机。TAP的状态机如图1所示，总共有16个状态。在TCK的驱动下，从当前状态到下一个状态的转换是由TMS信号决定。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="TAP Controller State Transitions" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20190116151355983.png" /></p><p>这个状态机看似很复杂，其实理解以后会发现这个状态机其实很直接、很简单。观察上图，我们可以发现，除了Test-Logic Reset和Test-Run/Idle状态外，其他的状态有些类似。例如Select-DR-Scan和Select-IR-Scan对应，Capture-DR和Capture-IR对应，Shift-DR和Shift-IR对应，等等。在这些对应的状态中，DR表示Data Register，IR表示Instruction Register。记得我们前面说过吗，寄存器分为两大类，数据寄存器和指令寄存器。其实标识有DR的这些状态是用来访问数据寄存器的，而标识有IR的这些状态是用来访问指令寄存器的。</p><p>让我们来看一个更直观的例子。现在假设，TAP Controller 现在处在 Run-Test/Idle 状态，指令寄存器当中已经成功的写入了一条新的指令，该指令选定的是一条长度为6的边界扫描链。下面让我们来看看实际如何来访问这条边界扫描链。下图所示的是测试芯片及其被当前指令选定的长度为6的边界扫描链。由下图可以看出，当前选择的边界扫描链由6个边界扫描移位寄存器单元组成，并且被连接在TDI和TDO之间。TCK 时钟信号与每个边界扫描移位寄存器单元相连。每个时钟周期可以驱动边界扫描链的数据由TDI到TDO的方向移动一位，这样，新的数据可以通过 TDI 输入一位，边界扫描链的数据可以通过 TDO 输出一位。经过6个时钟周期，就可以完全更新边界扫描链里的数据，而且可以将边界扫描链里捕获的6位数据通过TDO全部移出来。</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/djtag-example.jpg" /></p><p>图(1)表示了芯片和边界扫描链的初始化状态，在测试状态下，芯片的外部输入和输出被隔离开了，芯片的输入和输出可以通过相应的边界扫描链来观察和控制。在图(1)中，扫描链里的每个移位寄存器单元的数据是不确定的，所以在图中用X表示，整个扫描链里的数据序列是XXXXXX。要从TDI输入到测试芯片上的数据序列是：101010. 同时要从TDO得到芯片相应管脚上的状态。现在TAP Controller从Run-Test/Idle状态经过Select-DR-Scan状态进入到Capture-DR状态，在 Capture-DR 状态当中，在一个TCK时钟的驱动下，芯片管脚上的信号状态全部被捕获到相应的边界扫描移位寄存器单元当中去，如图(2)所示。从图(2)中我们可以看出，在进入 Capture-DR 状态后，经过一个 TCK 时钟周期，现在扫描链中的数据序列变成了：111000. 在数据捕获完成以后，从Capture-DR状态进入到Shift-DR状态。在Shift-DR状态中，我们将通过6个TCK时钟周期来把新的数据序列（101010）通过 TDI 输入到边界扫描链当中去；同时，将边界扫描链中捕获的数据序列（111000）通过 TDO 输出来。在进入到 Shift-DR 状态后，每经过一个 TCK 时钟驱动，边界扫描链从 TDO 输出一位数据；同时，从 TDI 接收一位新的数据。图(3)所示的是在 Shift-DR状态下，1 个 TCK 时钟周期后的扫描链的变化。图(4)所示的是在Shift-DR状态下，2个TCK时钟周期后的扫描链的变化。此时，扫描链已经从TDI串行得到了两位新数据，从TDO也串行输出了两位数据。在TCK时钟的驱动下，这个过程一直继续下去。图(5)所示的是在经过6 个 TCK 时钟周期以后扫描链的情况。从图(5)中我们可以看到：边界扫描链当中已经包含了新的数据序列：101010. 在TDO端，经过6个TCK时钟驱动以后，也接收到了在Capture-DR状态下捕获到的数据序列：111000. 到目前为止，虽然扫描链当中包含了新的数据序列：101010，但测试芯片的管脚上的状态还是保持为：111000. 下一步，需要更新测试芯片相应管脚上的信号状态。要实现更新，TAP Controller 从 Shift-DR 状态，经过 Exit1-DR 状态，进入到 Update-DR 状态。在 Update-DR 状态中，经过一个周期的 TCK 时钟驱动，边界扫描链中的新数据序列将被加载到测试芯片的相应管脚上去，如图(6)所示。从图(6)可以看出，测试芯片的状态已经被更新，相应管脚上的状态序列已经从111000变为101010. 最后从 Update-DR状态回到 Run-Test/Idle 状态，完成对选定的边界扫描链的访问。</p><p><strong>关于Pause-DR/Pause-IR状态</strong><br />这两个状态是暂停状态，比如说我们要通过32bit的总线从一个48长度的扫描链中读出相应管脚的状态，我们需要读两次才能将48bit的扫描链状态读出来，先经过32个TCK时钟读出高32bit的状态，然后转到Pause-DR状态等待总线读响应，响应完成后再进入Shift-DR经过16个TCK时钟读出低16bit数据。</p>]]></content>
      
      
      <categories>
          
          <category> ASIC测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jtag </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AXI协议详解</title>
      <link href="/p/axi-protocal.html"/>
      <url>/p/axi-protocal.html</url>
      
        <content type="html"><![CDATA[<h2 id="相较于axi3axi4新增内容"><a class="markdownIt-Anchor" href="#相较于axi3axi4新增内容"></a> 相较于AXI3，AXI4新增内容：</h2><ul data-mark="*"><li>support for burst lengths up to 256 beats</li><li>Quality of Service (QoS) signaling</li><li>support for multiple region interfaces</li><li>updated write response requirements</li><li>updated AWCACHE and ARCACHE signaling details</li><li>additional information on Ordering requirements</li><li>details of optional User signaling</li><li>removal of locked transactions</li><li>removal of write interleaving</li></ul><a id="more"></a><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181205135114671.png" /><br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-2018120513513301.png" /></p><div class="table_box"><table><thead><tr><th>信号</th><th>Source</th><th>Desciption</th></tr></thead><tbody><tr><td>ACLK</td><td>clock Source</td><td>全局时钟</td></tr><tr><td>ARESETn</td><td>reset Source</td><td>全局复位</td></tr><tr><td>写地址通道</td><td></td><td></td></tr><tr><td>AWID</td><td>master</td><td>写地址ID</td></tr><tr><td>AWADDR</td><td>master</td><td>写地址</td></tr><tr><td>AWLEN</td><td>master</td><td>burst长度(<strong>AXI3与AXI4不同</strong>)</td></tr><tr><td>AWSIZE</td><td>master</td><td>burst中一次传输数据的大小</td></tr><tr><td>AWBURST</td><td>master</td><td>burst类型，FIXED(00), INCR(01), WRAP(10)</td></tr><tr><td>AWLOCK</td><td>master</td><td>lock类型(<strong>AXI3与AXI4不同</strong>)</td></tr><tr><td>AWCACHE</td><td>master</td><td>memory类型</td></tr><tr><td>AWPROT</td><td>master</td><td>保护类型</td></tr><tr><td>AWQOS</td><td>master</td><td>Quality of Service(<strong>AXI4新增</strong>)</td></tr><tr><td>AWREGION</td><td>master</td><td>区域标识(<strong>AXI4新增</strong>)</td></tr><tr><td>AWUSER</td><td>master</td><td>User signal(<strong>AXI4新增</strong>)</td></tr><tr><td>AWVALID</td><td>master</td><td>写地址有效</td></tr><tr><td>AWREADY</td><td>slave</td><td>slave准备好接受地址和控制信息标志</td></tr><tr><td>写数据通道</td><td></td><td></td></tr><tr><td>WID</td><td>master</td><td>写ID tag, WID与AWID必须匹配(<strong>AXI4删除</strong>)</td></tr><tr><td>WDATA</td><td>master</td><td>写数据</td></tr><tr><td>WSTRB</td><td>master</td><td>写阀门,WSTRB[n]标示的区间为WDATA[(8<em>n)+7:(8</em>n)]</td></tr><tr><td>WLAST</td><td>master</td><td>burst中最后一笔传输标志</td></tr><tr><td>WUSER</td><td>master</td><td>User signal(<strong>AXI4新增</strong>)</td></tr><tr><td>WVALID</td><td>master</td><td>写数据有效</td></tr><tr><td>WREADY</td><td>slave</td><td>slave准备好接受数据标志</td></tr><tr><td>写响应通道</td><td></td><td></td></tr><tr><td>BID</td><td>slave</td><td>写响应ID tag, BID必须与AWID匹配</td></tr><tr><td>BRESP</td><td>slave</td><td>写响应</td></tr><tr><td>BUSER</td><td>slave</td><td>User signal(<strong>AXI4新增</strong>)</td></tr><tr><td>BVALID</td><td>slave</td><td>写响应有效</td></tr><tr><td>BREADY</td><td>master</td><td>master准备好接受写响应标志</td></tr><tr><td>读地址通道</td><td></td><td></td></tr><tr><td>ARID</td><td>master</td><td>读地址ID</td></tr><tr><td>ARADDR</td><td>master</td><td>读地址</td></tr><tr><td>ARLEN</td><td>master</td><td>burst长度(<strong>AXI3与AXI4不同</strong>)</td></tr><tr><td>ARSIZE</td><td>master</td><td>burst中一次传输数据的大小</td></tr><tr><td>ARBURST</td><td>master</td><td>burst类型</td></tr><tr><td>ARLOCK</td><td>master</td><td>lock类型(<strong>AXI3与AXI4不同</strong>)</td></tr><tr><td>ARCACHE</td><td>master</td><td>memory类型</td></tr><tr><td>ARPROT</td><td>master</td><td>保护类型</td></tr><tr><td>ARQOS</td><td>master</td><td>Quality of Service(<strong>AXI4新增</strong>)</td></tr><tr><td>ARREGION</td><td>master</td><td>区域标识(<strong>AXI4新增</strong>)</td></tr><tr><td>ARUSER</td><td>master</td><td>User signal(<strong>AXI4新增</strong>)</td></tr><tr><td>ARVALID</td><td>master</td><td>读地址有效</td></tr><tr><td>ARREADY</td><td>slave</td><td>slave准备好接受地址和控制信息标志</td></tr><tr><td>读数据通道</td><td></td><td></td></tr><tr><td>RID</td><td>slave</td><td>读ID tag,RID必须与ARID匹配</td></tr><tr><td>RDATA</td><td>slave</td><td>读数据</td></tr><tr><td>RRESP</td><td>slave</td><td>读响应</td></tr><tr><td>RLAST</td><td>slave</td><td>burst中最后一笔传输标志</td></tr><tr><td>RUSER</td><td>slave</td><td>User signal(<strong>AXI4新增</strong>)</td></tr><tr><td>RVALID</td><td>slave</td><td>读数据有效</td></tr><tr><td>RREADY</td><td>master</td><td>master准备好接受读数据标志</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> SOC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AMBA </tag>
            
            <tag> SOC </tag>
            
            <tag> AXI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>low power RTL优化</title>
      <link href="/p/low-power-rtl-you-hua.html"/>
      <url>/p/low-power-rtl-you-hua.html</url>
      
        <content type="html"><![CDATA[<p>论坛里面讨论low power RTL前端设计的帖子好像不多，许多大牛的书上来就谈工艺，半导体结构，让我高山仰止，但也只能心向往之(实在有些看不懂)。</p><p>工艺的提升带来的收益可能远比RTL深度优化高，如TSMC 40LP vs TSMC 28HPC+, 后者基本上比前者面积小一半，速度快一倍，dynamic power小40 ~ 50%，代价是leakage高3~4倍。在老工艺上如何绞尽脑汁优化设计，可能也很难达到这种效果。</p><p>但作为前端RTL designer, 一旦工艺选定，我们只能在自己的一亩三分地里面做到最好，本帖就此抛砖迎玉，结合自己的工作经验讨论下low power RTLdesign, 挖个坑，希望坛子里的大牛一起帮忙填坑</p><p>刚入行做design时，考虑的是Area 和 speed，近些年来，power变成了越来越重要的指标，有时候更是牺牲Area和speed来换取power的收益，毕竟有些领域, 电池容量是很难增大的。</p><p>有人做过大体统计，降低功耗的方法和收益大体如下，对于前端RTL 设计，最好用的还是clock gating, 收益最显巨，代价最小，<br />其他方法也能有可观的收益，具体还的依靠具体应用场景分析。</p><a id="more"></a><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="170909032029e33cd2c3cb9092" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/170909032029e33cd2c3cb9092.png" /></p><p>Power 主要消耗在</p><ol><li><p>combinational logic</p></li><li><p>sequential logic</p></li><li><p>memory</p></li><li><p>clock network</p></li></ol><p>下面我将就下面几个方面展开讨论,</p><p><strong>1. Improve clock gating efficiency.</strong></p><ul data-mark="-"><li><p>Block level clock gating.</p></li><li><p>RTL clock gating. (重点)</p></li></ul><p><strong>2. Reduce data toggle rate.</strong></p><ul data-mark="-"><li><p>fifovs PIPE</p></li><li><p>FSM coding style</p></li><li><p>Unnecessary reset.</p></li></ul><p><strong>3. Refine Memory Selection.</strong></p><ul data-mark="-"><li><p>Area power balance</p></li><li><p>I/F bitwidth selection.</p></li><li><p>Depth selection.</p></li></ul><p><strong>4. Reduce memory accessing</strong></p><ul data-mark="-"><li>Address caching.</li></ul><p><strong>5. Reduce logic size</strong></p><ul data-mark="-"><li><p>Logic sharing.</p></li><li><p>Logic balancing</p></li><li><p>Divider optimization.</p></li><li><p>Reduce pipe line length</p></li><li><p>Hardmacro vs Register</p></li><li><p>Reduce bitwidth</p></li><li><p>Async reset vs non-async-reset.</p></li></ul><p><strong>6. Misunderstanding</strong></p><p>（未完待续）</p>]]></content>
      
      
      <categories>
          
          <category> 低功耗设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Low Power </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>芯片设计小实例之数据“瘦身”</title>
      <link href="/p/xin-pian-she-ji-xiao-shi-li-shu-ju-shou-shen.html"/>
      <url>/p/xin-pian-she-ji-xiao-shi-li-shu-ju-shou-shen.html</url>
      
        <content type="html"><![CDATA[<p>我们知道在芯片设计中，降低动态功耗的方法有很多种。比如clock gating，power gating等。今天想介绍一个通过减小移动数据位宽来降低动态功耗的方法。</p><p>动态功耗的来源是信号的传播，翻转。clock gating通过减少时钟信号的翻转，降低了寄存器clk pin本身的功耗，并且通过寄存器的特性，间接减少了Q pin的翻转，从而降低了数据链路的功耗。而power gating更绝，直接将电路断电，更无翻转可言。这两种方式本质上都是在电路或者某些寄存器没有数据更新需求的时候减少无谓的信号翻转，以此来降低功耗。而减小传播数据的位宽，可以在有数据更新需求的时候减少动态功耗。毕竟传递的数据少了，需要翻转的信号自然也少了。但是这样做需要考虑上减小数据位宽所带来的一点额外逻辑开销造成的功耗。不过大多数时候都能得到正收益，特别是当数据位宽较大的时候。</p><a id="more"></a><p>在之前的文章《芯片设计小实例——共享buffer》中，我们尝试用一个共享buffer实现了不同id数据流的仲裁调度。在这个微架构中，需要对多个entry的数据同时做移位，也就是一个移位寄存器，以此来满足我们搜索各id队列的队头的策略：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090772.png" /></p><p>在上图中，每次调度读走一个数据，需要对该数据以上所有的数据做向下移位，（比如读走entry_1的数据，entry_2和entry_3的数据要向下移位），然后进行下一次的调度。这个方法其实是会产生较大动态功耗的，特别是当数据位宽很大，需要移位的数据很多的时候。</p><p>那么有没有办法避免这样的大数据位宽移动呢？答案是肯定的。为了找到这个办法，我们需要先了解数据移动的目的是什么。在这个例子中，<strong>之所以要对被读走数据以上的数据做集体向下移位，是为了保证从entry_0向上搜索的过程中所有id通道的数据是保序并且没有空洞的，因为我们默认了这个buffer从下往上的顺序对应着每个id 队列的从前往后的顺序（因为我们是自下而上有序地写入）。</strong></p><p>如果不做这个移动，那么被读走的entry将形成一个数据空洞。当然在这个数据空洞被新的数据填充之前，这个保序规则都没有被打破，<strong>但很明显这样就大大降低了entry的利用率</strong>，因为在空洞以上所有数据都被读走之前，该空洞都无法被写入：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090772.png" /></p><p>而如果有新的数据填入这个空洞，<strong>那么保序规则将被打破，除非被读走数据本身就处于buffer最顶部</strong>，如下图所示，id=0的第4个数据插在了第1个和第3个数据中间，对于id=0的队列，从下往上的数据序列变为1-&gt;4-&gt;3，保序规则被打破：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090773.png" /></p><p>因此这里最好的办法就是对数据做向下移位，既可以充分利用每个entry，又可以维持队列顺序：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090773.png" /></p><p>通过观察可以发现，这个移位在算法里是必要的，**但是这个移位与数据本身是什么，具体有多少bit并无直接的联系。我们移1024bit是这样移动，移512bit是这样移动，甚至移3个bit照样是一样的移动规则。**这就不禁让人思考，是否可以直接用3bit来代替1024bit的数据？或者说，给每个进入buffer的1024bit的数据起个别名？比如做一个名单：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090773.png" /></p><p>在这个名单中，每个数据对应一个3bit的代号（假设这个buffer只有5个深度），这些代号各不相同，因此他们可以一一对应地指代不同的数据。然后之前的移动数据，就可以变成简单地移动这些代号：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090810.png" /></p><p>如上图所示，维护一个新的“代号移动buffer”，<strong>在每次新写入一个数据的时候，将其代号写入这个“代号移动buffer”，就可以保持数据不变，将数据的移动转换为代号的移动，不管是多少bit的数据，都只移动3bit</strong>。而数据则可以原封不动地停留在buffer中（甚至数据也没必要从下往上按序写入，只要代号从下往上按序写入即可）。然后在每个代号被移动出buffer的时候，再将其转换为对应的数据读出，这样一来，移位寄存器的功耗就大大地降低了！</p><p>这么做的代价有很多，比如需要维护一个“名单”，就要额外开辟一个3x5bit的名单列表，如果buffer深度较大，为了保证名单里的代号互不冲突，名单的位宽也要加大，这也会占用很多寄存器。这里可以再做一个优化，<strong>我们发现所谓的名单只要能保证在这个buffer里每个entry都不一样就可以了，而每个buffer本身就有这么个“名单”，无需另外维护，那就是buffer的index：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592842090810.png" /></p><p>直接用index来作为每个数据的代号，在数据出buffer的时候还可以直接拿来索引真正的数据，一举两得。既省去了名单的寄存器，又减少了名单和数据转换的逻辑（只需要通过index选择读数据），真是太好了!</p><p>从这个小例子我们可以看到，合适巧妙地对数据进行“瘦身”，特别是类似移位寄存器这种需要大量进行移动的数据，可以有效地降低功耗，并且很多开销也不算大。使用这种方法的条件，是数据的移动规则与数据本身没有关系，并且数据有单独的固定空间存放，读写简单（最好是寄存器读写）。希望对大家有所帮助。</p>]]></content>
      
      
      <categories>
          
          <category> ASIC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计技巧，资源优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>芯片设计小经验之流保序策略</title>
      <link href="/p/xin-pian-she-ji-xiao-jing-yan-liu-bao-xu-ce-lue.html"/>
      <url>/p/xin-pian-she-ji-xiao-jing-yan-liu-bao-xu-ce-lue.html</url>
      
        <content type="html"><![CDATA[<p>今天想分享几种流保序策略。保序问题在不同的应用领域都会遇到，毕竟硬件电路本质上是需要很多数据流传输的。各种协议的接口，处理器的数据处理，指令处理等都离不开对应数据有序的传输。</p><p>如果只有一条数据流，可以直接使用一个FIFO保序。如果是多数据流，多个读写口，可以分不同ID使用不同FIFO保序。<strong>今天想讨论的是多数据流混合场景下只有1个读口和1个写口的保序。不同的数据流有对应不同的ID</strong>，大致有以下5种不同的保序策略。</p><a id="more"></a><h2 id="1-不同id使用不同fifo分别保序"><a class="markdownIt-Anchor" href="#1-不同id使用不同fifo分别保序"></a> 1. 不同ID使用不同FIFO分别保序</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="image-20200622232000676" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/image-20200622232000676.png" /></p><p>每个FIFO只需要储存数据就可以，各自维护一套读写指针，储存数据结构简单，只需要存下数据，无需其他信息。</p><p>优点：简单直观，时序好，易实现</p><p>缺点：静态配置，不够灵活，当ID多或者FIFO深度大的时候很占面积</p><h2 id="2不同id使用同一共享buffer使用链表保序"><a class="markdownIt-Anchor" href="#2不同id使用同一共享buffer使用链表保序"></a> 2.不同ID使用同一共享”Buffer”，使用链表保序：</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640.png" /></p><p>使用链表保序也是一种比较常见的做法。需要额外记录队头队尾的位置信息，以及下一个位置的指针信息，其数据结构如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839273675.png" /></p><p>基本读写规则和更新规则如下：</p><ol><li><p>数据随意插空写入buffer</p></li><li><p>每次写入时将当前entry置为队尾，tail=1’b1</p></li><li><p>每次写入时搜索整个buffer中是否有同id的entry，若无同id，则head=1‘b1，若有，则搜索当前同id的队尾，将当前写入的位置信息更新到队尾所在entry的nxt_ptr</p></li><li><p>每个队列的head参与仲裁读出</p></li><li><p>每次读出时将相应队头的nxt_ptr所指的entry的head置为1’b1</p></li></ol><p>优点：灵活配置，寄存器资源相对较少，并可被充分利用，特别适用于队列深度未知的场景。</p><p>缺点：更新复杂，时序较差，特别是每次读出一个队头更新下一个队头的时候，需要连续两次访问不同entry的buffer并做一个写操作，时序路径很长。</p><h2 id="3不同id使用同一共享buffer使用队列计数器保序"><a class="markdownIt-Anchor" href="#3不同id使用同一共享buffer使用队列计数器保序"></a> 3.不同ID使用同一共享”Buffer”，使用队列计数器保序：</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839279032.png" /></p><p>这种方法通过记录每个entry在当前buffer中处于所在队列的第几个位置来表征顺序。需要额外有一个计数器储存空间，其数据结构如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839283948.png" /></p><p>基本读写规则和更新规则如下：</p><ol><li>数据随意插空写入buffer</li><li>每次写入时计算出当前buffer中同ID的entry个数，作为cnt记录</li><li>所有cnt=0的entry参与读出仲裁</li><li>每次读出一个数据，相同ID的所有entry的cnt均减1</li></ol><p>优点：灵活配置，寄存器资源相对较少，并可被充分利用, 更新规则较为简单。</p><p>缺点：输入时序较差，需要做多bit加法。另外如果每个队列的深度未知，则此方案不可行，因为无法确定cnt的位宽。</p><h2 id="4不同id使用同一共享buffer使用bitmap保序"><a class="markdownIt-Anchor" href="#4不同id使用同一共享buffer使用bitmap保序"></a> 4.不同ID使用同一共享”Buffer”，使用bitmap保序：</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839286440.png" /></p><p>如上图所示，每个entry都保存了一个“bit map”，用来记录当前buffer所有位置的同id entry信息。其储存数据结构如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839290303.png" /></p><p>基本读写规则和更新规则如下：</p><ol><li>数据随意插空写入buffer</li><li>每次写入时遍历buffer所有同id的entry，若有，则将该位置（可能有多个）对应的bit map置为1</li><li>Bit map为全0的位置可参与仲裁读出</li><li>每次读出更新所有同id的bit map，将相应位置置为0</li></ol><p>优点：灵活配置，更新规则较为简单，时序相对较好。</p><p>缺点：若buffer深度较大，bit map面积太大。</p><h2 id="5不同id使用同一共享fifo通过顺序写入数据移位保序"><a class="markdownIt-Anchor" href="#5不同id使用同一共享fifo通过顺序写入数据移位保序"></a> 5.不同ID使用同一共享”FIFO”，通过顺序写入+数据移位保序：</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839292591.png" /></p><p>这种结构除了数据以外，每个entry需要额外存下vld，id和表示队列对头的head信息，数据结构如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592839296737.png" /></p><p>优点：灵活配置，寄存器资源相对较少，并可被充分利用</p><p>缺点：因为要做数据移位，可能有较大功耗</p><p>以上便是几种不同的保序策略，希望对大家有所帮助。至于什么时候选择哪一种策略，则取决于实际场景和各种环节约束，需要因地制宜。</p>]]></content>
      
      
      <categories>
          
          <category> ASIC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计技巧，流保序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>芯片设计小实例之共享Buffer</title>
      <link href="/p/xin-pian-she-ji-xiao-shi-li-gong-xiang-buffer.html"/>
      <url>/p/xin-pian-she-ji-xiao-shi-li-gong-xiang-buffer.html</url>
      
        <content type="html"><![CDATA[<p>首先来看一下场景，这是一个在大多数设计中都会遇到的数据包调度问题。有A,B两个输入通道，向数据调度模块DUT输入数据。该调度模块DUT有一个输出通道C。A,B和DUT，DUT和C都是通过简单的握手传输数据。</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592840436441.png" /></p><p>两个输入通道都有数据包输入，可以同时输入。数据包以packet为单位，每个packet为128bit。不同的数据包有不同的id，id是4个bit。A和B通道不会同时输入同ID的数据。每个packet带有2bit的qos，qos越高，可以理解为该id的packet优先级相对于其他id的packet优先级越高。输出通道没有反压，只要有数据就可以出去。输入通道接受反压。数据输出的条件是，同id的packet要保序输出，不同id的packet，优先级较高的需要尽量先输出。</p><a id="more"></a><p>从这个场景的几个条件，我们可以大概规划出这个DUT需要具备什么样的功能。首先，从两个通道输入和一个通道输出，输入通道可以同时有效这点可以看出来这是一个输入输出流量不匹配的模块，必须要有缓存。因为没有具体的输入场景描述，单纯从输入输出口数量来进行判断，这个缓存的buffer深度可以设成任意无限大，因为极限场景就是每拍a和b都同时有1个packet输入，因为c只能有1个packet输出，每拍都会有1个packet残留。但因为有反压机制，当残留packet到达缓存上限的时候就可以反压端口，因此一个合适的buffer深度足矣。</p><p>除了缓存数据，这个DUT还有一个重要的功能就是调度不同id的packet，使其尽量按照qos从大到小的顺序输出。这个输出特点决定了缓存深度不能设置的太小。设置的太小，可同时进行比较的packet数量太少，qos按顺序输出的范围太小。只有将更多的packet储存下来进行qos比较，才能在一个合理的时间范围内保证降序输出qos。为了简单起见，这里buffer深度设置为12（该深度与A,B输入的实际流量，或者说链路利用率强相关，这里不多加讨论）。</p><p>有了足够深度的buffer来缓存packet，我们需要将packet按id进行分类，因为同id的packet需要保序输出，然后对不同id的packet进行调度。这里涉及到两个关键点，保序和调度。因为输入的同id的packet本身是保序的，因此为了让输出保序，很容易就想到了经典的First In First Out这样的FIFO结构。又因为不同id的packet之间要进行调度，很容易就想到每个id的packet设置一个独立的FIFO，然后在每个FIFO出口处进行调度。至于调度，有几种不同的算法，本文也不多加讨论，简而言之就是选出最高qos的可调度packet，然后通过round-robin或者sp等调度算法进行调度。</p><p>这样一来，一个粗略的方案便形成了。通过对每个id设立不同的FIFO来进行缓存packet，在每个id的FIFO出口进行仲裁调度，输出高qos的packet。因为输入的id是3个bit，所以最多有7种不同的id，需要设置7个FIFO，简单的微架构图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592840448351.png" /></p><p>这个方案从功能角度来说是可以满足要求的。但是就是有点占资源。因为在这个方案中对每个id都设置了对应的FIFO来解决保序+调度的需求，所以FIFO数量等于id的所有可能数量。如果id的位宽小，packet的数据位宽小，那还可以接受，但如果id有12bit呢？packet的数据位宽有1024bit呢？那么岂不是需要4K个1024bit的FIFO，深度还需要设置呢，这么一想便觉得此方案有其局限性。要知道寄存器怎么来说都是理论上的面积大户，一般能少则少。</p><p>在上图架构中我们之所以将不同的ID设置一个单独的FIFO初衷只是因为这种方式最直观地将所有的id区分开，相信大多数人对于此场景的第一反应都是类似的架构。通过输入的ID“静态”地将数据打入对应ID的FIFO，“静态”地隔离开了不同ID的packet，便于后续的仲裁调度。但是再仔细一想，我们为此将所有可能的ID全部设置了单独的FIFO，但并不是每个ID在某一个特定时间段内都会出现，也就是说在进行仲裁调度的时候，很可能某些FIFO是没有东西的。但是因为这些FIFO只能被相应ID的packet占用，别的ID的packet就算自己的FIFO被占用满了，也没法使用，那么这些个FIFO岂不是浪费了？如果这些FIFO可以被别的ID使用，是不是更好？</p><p>这里便可以引入我们标题里的“共享buffer”概念。这里的共享指的是不同ID packet之间的共享。我们试图使用一个“共享buffer”来缓存在某一个大流量时刻所有ID的packet，并从中选择每个ID的队头packet进行仲裁调度。这个buffer为了与分ID设置的FIFO达到相同的功能，势必需要储存除了packet data以外更多的信息。这里主要有几点。</p><ol><li>为了区分不同ID的packet，需要将每个packet的对应ID也存到buffer的相应entry。</li><li>同ID的packet之间可能间插了别的ID的packet，因此该共享buffer的读指针不能按一般的FIFO来设置。事实上，因为我们只需要对每个ID对应队列的队头packet进行仲裁调度，我们只需要知道每个ID的队头是哪个位置便可，每个ID队列里其他的packet处于哪个位置我们并不在乎。因此，需要1个bit来标识为对应ID的队头。</li><li>因为该共享buffer的读写不同于普通FIFO，为了便于迅速找出所有有效的entry，设置一个vld bit来表征。</li></ol><p>因此这个共享buffer的储存数据结构大致如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592840448355.png" /></p><p>Head bit的更新主要是以下两个条件：</p><ol><li><p>当新的packet写入时，需要遍历当前共享buffer所有的有效entry，若没有与自己id匹配的entry，将head设置为1‘b1。</p></li><li><p>当有packet被仲裁调度调度走之后，需要做一个数据移位，将晚于被调度走的buffer entry的所有entry向下移位，保证所有有效的buffer是连续的，然后从0位置开始自下往上寻找第一个与被调走的packet同id的entry，将其设置为新的head。</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592840436274.png" /></p><p>这样一来，在调度的时候，只需要找到所有head bit为1‘b1的有效entry，便和每个ID都设置独立FIFO，对所有FIFO队头进行调度有一样的效果了。当然，在该共享buffer的写端口，需要保证和正常FIFO一样按序写入。只不过这里因为搜索队头的策略，该buffer不支持“套圈”读写，写指针写到buffer顶部时便无法再写入。至于该共享buffer的深度，设置成与单个ID FIFO一样的深度便可保证大部分情况下与分ID FIFO有相同效果（当然这取决于实际流量，可能需要适当增加一些）。</p><p>该共享buffer的微架构大致如下：</p><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="img" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/640-1592840448374.png" /></p><p>以上便用一个组合逻辑多一些的架构替代了一个寄存器非常多的架构。这个微架构的优势在于灵活，在大数据宽度，多id的情况下可以尽可能地节省面积。这里用到的思想其实就是“分时复用“。同一个buffer entry在不同的时候可以被不同ID的packet所占用。当然实现起来更为复杂，毕竟引入了一些新的状态位需要维护和更新。还有一些具体的时序问题，以及设计细节没有在本文中一一尽述。但是这样的缩减面积的思想其实是可以被参考借鉴的，希望可以对大家有所帮助。</p>]]></content>
      
      
      <categories>
          
          <category> ASIC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计技巧，资源优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python正则表达式</title>
      <link href="/p/python-regular-expression.html"/>
      <url>/p/python-regular-expression.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-为什么使用正则表达式"><a class="markdownIt-Anchor" href="#1-为什么使用正则表达式"></a> 1. 为什么使用正则表达式？</h2><p>典型的搜索和替换操作要求您提供与预期的搜索结果匹配的确切文本。虽然这种技术对于对静态文本执行简单搜索和替换任务可能已经足够了，但它缺乏灵活性，若采用这种方法搜索动态文本，即使不是不可能，至少也会变得很困难。</p><p>通过使用正则表达式，可以：</p><ul data-mark="-"><li><strong>测试字符串内的模式。</strong><br />例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。</li><li><strong>替换文本</strong>。<br />可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。</li><li><strong>基于模式匹配从字符串中提取子字符串。</strong><br />可以查找文档内或输入域内特定的文本。</li></ul><a id="more"></a><h2 id="2-匹配规则"><a class="markdownIt-Anchor" href="#2-匹配规则"></a> 2. 匹配规则</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20190824164005821.png" /></p><h2 id="3-re模块常用函数"><a class="markdownIt-Anchor" href="#3-re模块常用函数"></a> 3. re模块常用函数</h2><h3 id="31-rematch函数"><a class="markdownIt-Anchor" href="#31-rematch函数"></a> 3.1 re.match函数</h3><p>re.match尝试从字符串的起始位置匹配一个模式，匹配成功则返回match对象；如果不是起始位置匹配成功的话，match()就返回none。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>函数参数说明：</strong></p><ul data-mark="-"><li>pattern：匹配的正则表达式</li><li>string：要匹配的字符串。</li><li>flags：标志位，用于控制正则表达式的匹配方式，取值可以使用按位或运算符’|'表示同时生效<ul data-mark="*"><li>re.I(re.IGNORECASE)：忽略大小写</li><li>re.M(re.MULTILINE)：多行匹配，改变’^‘和’$'的行为</li><li>re.S(re.DOTALL)：改变’.‘的行为，使’.'匹配包括换行在内的所有字符</li><li>re.L(re.LOCALE)：做本地化识别（locale-aware）匹配，使预定字符类 \w \W \b \B \s \S 取决于当前区域设定</li><li>re.U(re.UNICODE)：根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</li><li>re.X(re.VERBOSE)： 详细模式。这个模式下正则表达式可以是多行，忽略空白字符，并可以加入注释。</li></ul></li></ul><h4 id="311-返回值match对象"><a class="markdownIt-Anchor" href="#311-返回值match对象"></a> 3.1.1 返回值match对象</h4><p>Match对象是一次匹配的结果，包含了很多关于此次匹配的信息，可以使用Match提供的可读属性或方法来获取这些信息。</p><p><strong>属性：</strong></p><ul data-mark="*"><li>string: 匹配时使用的文本。</li><li>re: 匹配时使用的Pattern对象。</li><li>pos: 文本中正则表达式开始搜索的索引。值与Pattern.match()和Pattern.search()方法的同名参数相同。</li><li>endpos: 文本中正则表达式结束搜索的索引。值与Pattern.match()和Pattern.search()方法的同名参数相同。</li><li>lastindex: 最后一个被捕获的分组在文本中的索引。如果没有被捕获的分组，将为None。</li><li>lastgroup: 最后一个被捕获的分组的别名。如果这个分组没有别名或者没有被捕获的分组，将为None。</li></ul><p><strong>方法：</strong></p><ul data-mark="*"><li>group([group1, …]):<br />获得一个或多个分组截获的字符串；<strong>指定多个参数时将以元组形式返回</strong>。group1可以使用编号也可以使用别名；编号0代表整个匹配的子串；不填写参数时，返回group(0)；没有截获字符串的组返回None；截获了多次的组返回最后一次截获的子串。</li><li>groups([default]):<br />以元组形式返回全部分组截获的字符串。相当于调用group(1,2,…last)。default表示没有截获字符串的组以这个值替代，默认为None。</li><li>groupdict([default]):<br />返回以有别名的组的别名为键、以该组截获的子串为值的字典，<strong>没有别名的组不包含在内</strong>。default含义同上。</li><li>start([group]):<br />返回指定的组截获的子串在string中的起始索引（子串第一个字符的索引）。group默认值为0。</li><li>end([group]):<br />返回指定的组截获的子串在string中的结束索引（子串最后一个字符的索引+1）。group默认值为0。</li><li>span([group]):<br />返回(start(group), end(group))。</li><li>expand(template):<br />将匹配到的分组代入template中然后返回。template中可以使用\id或\g<id>、\g<name>引用分组，<strong>但不能使用编号0</strong>。\id与\g<id>是等价的；但\10将被认为是第10个分组，如果你想表达\1之后是字符’0’，而不是分组10，只能使用\g&lt;1&gt;0。</li></ul><h4 id="312-实例"><a class="markdownIt-Anchor" href="#312-实例"></a> 3.1.2 实例</h4><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python line-numbers" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> restr1 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""baidu.comwww.google.comwww.12306.cn"""</span>str2 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""www.baidu.comwww.google.comwww.12306.cn"""</span>pattern <span class="token operator">=</span> r<span class="token string">"(\w+)\.(\w+)\.(?P&lt;domain>\w+)"</span>match <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>  <span class="token comment">#None</span>match <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>  <span class="token comment">#&lt;_sre.SRE_Match object; span=(0, 13), match='www.baidu.com'></span><span class="token keyword">if</span> match<span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>pos<span class="token punctuation">)</span>          <span class="token comment">#0</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>endpos<span class="token punctuation">)</span>       <span class="token comment">#41</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">#www.baidu.com</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">#baidu</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#('baidu', 'com')</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">#('www', 'baidu', 'com')</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>groupdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#{'domain': 'com'}</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">#(0, 13)</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">#(10, 13)</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">#10</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>expand<span class="token punctuation">(</span>r<span class="token string">"\3 \1 \2 \g&lt;domain>"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#com www baidu com</span><span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match!!!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h3 id="32-research函数"><a class="markdownIt-Anchor" href="#32-research函数"></a> 3.2 re.search函数</h3><p>re.search扫描整个字符串并返回第一个成功的匹配。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python line-numbers" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> restr1 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""baidu.comwww.google.comwww.12306.cn"""</span>str2 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""www.baidu.comwww.google.comwww.12306.cn"""</span>pattern <span class="token operator">=</span> r<span class="token string">"(\w+)\.(\w+)\.(?P&lt;domain>\w+)"</span>match <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>  <span class="token comment">#&lt;_sre.SRE_Match object; span=(10, 24), match='www.google.com'></span>match <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>  <span class="token comment">#&lt;_sre.SRE_Match object; span=(0, 13), match='www.baidu.com'></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h3 id="33-refindall函数"><a class="markdownIt-Anchor" href="#33-refindall函数"></a> 3.3 re.findall函数</h3><p>在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token triple-quoted-string string">"""www.baidu.comSite: www.google.comwww.12306.cn"""</span>pattern <span class="token operator">=</span> r<span class="token string">"(\w+)\.(\w+)\.(\w+)"</span>match <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>M<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>   <span class="token comment">#[('www', 'baidu', 'com'), ('www', 'google', 'com'), ('www', '12306', 'cn')]</span></pre></div><h3 id="34-refinditer函数"><a class="markdownIt-Anchor" href="#34-refinditer函数"></a> 3.4 re.finditer函数</h3><p>搜索string，返回一个顺序访问每一个匹配结果（Match对象）的迭代器<br /><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> re<span class="token keyword">for</span> m <span class="token keyword">in</span> re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>r<span class="token string">"\d+"</span><span class="token punctuation">,</span><span class="token string">'one1two2three3four4'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span>   <span class="token comment">#1 2 3 4</span></pre></div><h3 id="35-resub函数"><a class="markdownIt-Anchor" href="#35-resub函数"></a> 3.5 re.sub函数</h3><p>使用repl替换string中每一个匹配的子串后返回替换后的字符串。<br />当repl是一个字符串时，可以使用\id或\g<id>、\g<name>引用分组，但不能使用编号0。<br />当repl是一个函数时，<strong>这个函数应当只接受一个参数（Match对象）</strong>，并返回一个字符串用于替换（返回的字符串中不能再引用分组）。<br />count用于指定最多替换次数，不指定时全部替换。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> repl<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token string">'i say, hello world!'</span>pattern <span class="token operator">=</span> r<span class="token string">'(\w+) (\w+)'</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token string">'\2 \1'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#say i, world hello!</span><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">return</span> m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> func<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">#I Say, Hello World!</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> func<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">#I Say, hello world!</span></pre></div><h3 id="36-resubn函数"><a class="markdownIt-Anchor" href="#36-resubn函数"></a> 3.6 re.subn函数</h3><p>返回 (sub(repl, string[, count]), 替换次数)。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>subn<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> repl<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token string">'i say, hello world!'</span>pattern <span class="token operator">=</span> r<span class="token string">'(\w+) (\w+)'</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token string">'\2 \1'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#('say i, world hello!', 2)</span><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> func<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">#('I Say, Hello World!', 2)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> func<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">#('I Say, hello world!', 1)</span></pre></div><h3 id="37-resplit函数"><a class="markdownIt-Anchor" href="#37-resplit函数"></a> 3.7 re.split函数</h3><p>按照能够匹配的子串将string分割后返回列表。maxsplit用于指定最大分割次数，不指定将全部分割。</p><p><strong>函数语法：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">,</span> maxsplit<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></div><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token string">'one1two2three3four4'</span>pattern <span class="token operator">=</span> r<span class="token string">"\d+"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">#['one', 'two', 'three', 'four', '']</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#['one', 'two', 'three3four4']</span></pre></div><h2 id="4-pattern对象"><a class="markdownIt-Anchor" href="#4-pattern对象"></a> 4. Pattern对象</h2><p><strong>re.compile函数构造：</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" >re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>strPattern<span class="token punctuation">[</span><span class="token punctuation">,</span> flag<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></div><p><strong>方法：</strong></p><ul data-mark="*"><li><code>match(string[, pos[, endpos]])</code>：功能等同于re.match函数。不同的是可以指定匹配的起始与终止下标，pos和endpos的默认值分别为0和len(string)，re.match()无法指定这两个参数。</li><li><code>search(string[, pos[, endpos]])</code>：同上</li><li><code>findall(string[, pos[, endpos]])</code>：同上</li><li><code>finditer(string[, pos[, endpos]])</code>：同上</li><li><code>sub(repl, string[, count])</code></li><li><code>subn(repl, string[, count])</code></li><li><code>split(string[, maxsplit])</code></li></ul><p><strong>实例</strong></p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">"Steven is 17 years old."</span>p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"\d+"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>match<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">#None</span><span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>match<span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#&lt;_sre.SRE_Match object; span=(10, 12), match='17'></span></pre></div><h2 id="5-匹配方式flags"><a class="markdownIt-Anchor" href="#5-匹配方式flags"></a> 5. 匹配方式–flags</h2><h3 id="51-rem"><a class="markdownIt-Anchor" href="#51-rem"></a> 5.1 re.M</h3><p>实例：替换多行的行首note为warning</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token triple-quoted-string string">"""note: Meeting will begin at 8:00.note: Please take your notebook.note: Meeting will end at 10:00. (note: turn off the light)"""</span>p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"^note"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">"warning"</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#only the first line has substitute</span>p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"^note"</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>M<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">"warning"</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#sub all line</span></pre></div><h3 id="52-res"><a class="markdownIt-Anchor" href="#52-res"></a> 5.2 re.S</h3><p>改变’.'符号的行为，使其能够匹配换行符</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python line-numbers" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token triple-quoted-string string">"""parameter MODE       = 1 ,          DIN_WIDTH  = 32,          DOUT_WIDTH = 24;"""</span>p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"parameter(.*);"</span><span class="token punctuation">)</span>m <span class="token operator">=</span> p<span class="token punctuation">.</span>search<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>  <span class="token comment">#None</span>p <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">"parameter\s+(.*);"</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>m <span class="token operator">=</span> p<span class="token punctuation">.</span>search<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="6-贪婪模式"><a class="markdownIt-Anchor" href="#6-贪婪模式"></a> 6. 贪婪模式</h2><p>Python里数量词默认是贪婪的，总是尝试匹配尽可能多的字符；非贪婪的则相反，总是尝试匹配尽可能少的字符。例如：正则表达式&quot;ab*“如果用于查找&quot;abbbc”，将找到&quot;abbb&quot;。而如果使用非贪婪的数量词&quot;ab*?&quot;，将找到&quot;a&quot;。</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token comment">#!/usr/bin/env python</span><span class="token keyword">import</span> retext <span class="token operator">=</span> <span class="token string">"abcaxc"</span>m <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"ab.*c"</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">#abcaxc</span>m <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"ab.*?c"</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">#abc</span></pre></div>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 正则 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>异步FIFO设计</title>
      <link href="/p/fifo-design.html"/>
      <url>/p/fifo-design.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-异步fifo代码"><a class="markdownIt-Anchor" href="#1-异步fifo代码"></a> 1. 异步fifo代码</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> afifo#<span class="token punctuation">(</span><span class="token keyword">parameter</span> DATA_WIDTH <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">,</span>            FIFO_DEPTH <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>            AF_LEVEL   <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>FIFO_DEPTH <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            AE_LEVEL   <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span>  <span class="token keyword">input</span>                         wclk          <span class="token punctuation">,</span>  <span class="token keyword">input</span>                         wrst          <span class="token punctuation">,</span>  <span class="token keyword">input</span>                         wen           <span class="token punctuation">,</span>  <span class="token keyword">input</span>       <span class="token punctuation">[</span>DATA_WIDTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>  wdata         <span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>                    wfull         <span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>                    walmost_full  <span class="token punctuation">,</span>  <span class="token keyword">input</span>                         rclk          <span class="token punctuation">,</span>  <span class="token keyword">input</span>                         rrst          <span class="token punctuation">,</span>  <span class="token keyword">input</span>                         ren           <span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>  <span class="token punctuation">[</span>DATA_WIDTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>  rdata         <span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>                    rempty        <span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>                    ralmost_empty<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">wire</span>                  fifo_rd<span class="token punctuation">;</span><span class="token keyword">wire</span>                  fifo_wr<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> raddr<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> waddr<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>DATA_WIDTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> memory <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>FIFO_DEPTH<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">wire</span>                  wen_mask<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wbinnext<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wptrnext<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wbin<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wptr<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wptr_rsync1<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wptr_rsync2<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   wbin_rsync<span class="token punctuation">;</span><span class="token keyword">wire</span>                  ren_mask<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rbinnext<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rptrnext<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rbin<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rptr<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rptr_wsync1<span class="token punctuation">;</span><span class="token keyword">reg</span>  <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rptr_wsync2<span class="token punctuation">;</span><span class="token keyword">wire</span> <span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>   rbin_wsync<span class="token punctuation">;</span><span class="token keyword">genvar</span> i<span class="token punctuation">;</span><span class="token comment">//*************************************</span><span class="token comment">// Dual port RAM</span><span class="token comment">//*************************************</span><span class="token keyword">assign</span> fifo_wr <span class="token operator">=</span> wen_mask<span class="token punctuation">;</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> wclk<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>fifo_wr<span class="token punctuation">)</span>    memory<span class="token punctuation">[</span>waddr<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> wdata<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">assign</span> fifo_rd <span class="token operator">=</span> ren_mask<span class="token punctuation">;</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> rclk<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>fifo_rd<span class="token punctuation">)</span>    rdata <span class="token operator">&lt;=</span> memory<span class="token punctuation">[</span>raddr<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token comment">//</span><span class="token comment">//*************************************</span><span class="token comment">// sync wptr to rclk domain</span><span class="token comment">//*************************************</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> rclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>rrst<span class="token punctuation">)</span>    <span class="token operator">{</span>wptr_rsync2<span class="token punctuation">,</span>wptr_rsync1<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    <span class="token operator">{</span>wptr_rsync2<span class="token punctuation">,</span>wptr_rsync1<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token operator">{</span>wptr_rsync1<span class="token punctuation">,</span>wptr<span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">generate</span>  <span class="token function">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>FIFO_DEPTH<span class="token punctuation">;</span>i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">=</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span><span class="token punctuation">:</span> wbin_rsync_gen    <span class="token keyword">assign</span> wbin_rsync<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">{</span> <span class="token operator">{</span>i<span class="token operator">{</span><span class="token number">1'b0</span><span class="token operator">}}</span><span class="token punctuation">,</span>wptr_rsync2<span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token operator">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">end</span><span class="token keyword">endgenerate</span><span class="token comment">//*************************************</span><span class="token comment">// sync rptr to wclk domain</span><span class="token comment">//*************************************</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> wclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> wrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>wrst<span class="token punctuation">)</span>    <span class="token operator">{</span>rptr_wsync2<span class="token punctuation">,</span>rptr_wsync1<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    <span class="token operator">{</span>rptr_wsync2<span class="token punctuation">,</span>rptr_wsync1<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token operator">{</span>rptr_wsync1<span class="token punctuation">,</span>rptr<span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">generate</span>  <span class="token function">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>FIFO_DEPTH<span class="token punctuation">;</span>i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">=</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span><span class="token punctuation">:</span> rbin_wsync_gen    <span class="token keyword">assign</span> rbin_wsync<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">{</span> <span class="token operator">{</span>i<span class="token operator">{</span><span class="token number">1'b0</span><span class="token operator">}}</span><span class="token punctuation">,</span>rptr_wsync2<span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span>i<span class="token punctuation">]</span><span class="token operator">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">end</span><span class="token keyword">endgenerate</span><span class="token comment">//*************************************</span><span class="token comment">// rd addr generate</span><span class="token comment">//*************************************</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> rclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>rrst<span class="token punctuation">)</span>    <span class="token operator">{</span>rbin<span class="token punctuation">,</span>rptr<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    <span class="token operator">{</span>rbin<span class="token punctuation">,</span>rptr<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token operator">{</span>rbinnext<span class="token punctuation">,</span>rptrnext<span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">assign</span> raddr    <span class="token operator">=</span> rbin<span class="token punctuation">[</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">assign</span> ren_mask <span class="token operator">=</span> ren <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">~</span>rempty<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">assign</span> rbinnext <span class="token operator">=</span> ren_mask <span class="token operator">?</span> <span class="token punctuation">(</span>rbin <span class="token operator">+</span> <span class="token number">1'b1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> rbin<span class="token punctuation">;</span><span class="token keyword">assign</span> rptrnext <span class="token operator">=</span> <span class="token punctuation">(</span>rbinnext<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">^</span> rbinnext<span class="token punctuation">;</span><span class="token comment">//*************************************</span><span class="token comment">// wr addr generate</span><span class="token comment">//*************************************</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> wclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> wrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>wrst<span class="token punctuation">)</span>    <span class="token operator">{</span>wbin<span class="token punctuation">,</span>wptr<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    <span class="token operator">{</span>wbin<span class="token punctuation">,</span>wptr<span class="token operator">}</span> <span class="token operator">&lt;=</span> <span class="token operator">{</span>wbinnext<span class="token punctuation">,</span>wptrnext<span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">assign</span> waddr <span class="token operator">=</span> wbin<span class="token punctuation">[</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">assign</span> wen_mask <span class="token operator">=</span> <span class="token punctuation">(</span>wen <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">~</span>wfull<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">assign</span> wbinnext <span class="token operator">=</span> wen_mask <span class="token operator">?</span> <span class="token punctuation">(</span>wbin <span class="token operator">+</span> <span class="token number">1'b1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> wbin<span class="token punctuation">;</span><span class="token keyword">assign</span> wptrnext <span class="token operator">=</span> <span class="token punctuation">(</span>wbinnext<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">^</span> wbinnext<span class="token punctuation">;</span><span class="token comment">//*************************************</span><span class="token comment">// FIFO status</span><span class="token comment">//*************************************</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> rclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>rrst<span class="token punctuation">)</span>    rempty <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    rempty <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>rptrnext <span class="token operator">==</span> wptr_rsync2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> rclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> rrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>rrst<span class="token punctuation">)</span>    ralmost_empty <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    ralmost_empty <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>wbin_rsync <span class="token operator">-</span> rbinnext <span class="token operator">&lt;=</span> AE_LEVEL<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> wclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> wrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>wrst<span class="token punctuation">)</span>    wfull <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    wfull <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>wptrnext <span class="token operator">==</span> <span class="token operator">{~</span>rptr_wsync2<span class="token punctuation">[</span>FIFO_DEPTH<span class="token punctuation">:</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>rptr_wsync2<span class="token punctuation">[</span>FIFO_DEPTH<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> wclk <span class="token keyword">or</span> <span class="token keyword">negedge</span> wrst<span class="token punctuation">)</span> <span class="token keyword">begin</span>  <span class="token function">if</span><span class="token punctuation">(</span>wrst<span class="token punctuation">)</span>    walmost_full <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    walmost_full <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>wbinnext <span class="token operator">-</span> rbin_wsync <span class="token operator">>=</span> AF_LEVEL<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>]]></content>
      
      
      <categories>
          
          <category> ASIC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> fifo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建irun编译与起verdi小环境</title>
      <link href="/p/compile-env.html"/>
      <url>/p/compile-env.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-小环境makefile模板"><a class="markdownIt-Anchor" href="#1-小环境makefile模板"></a> 1. 小环境makefile模板</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-makefile line-numbers" >design <span class="token operator">=</span> tbverilog_flist <span class="token operator">=</span> -f ./test.vc tb.vvhd_flist <span class="token operator">=</span>wave <span class="token operator">=</span> wave.fsdb<span class="token comment">#whether to open verdi wave gui</span><span class="token keyword">ifdef</span> waveverdi_cmd <span class="token operator">+=</span> -ssf <span class="token variable">$</span><span class="token punctuation">(</span>wave<span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token builtin">.PHONY</span><span class="token punctuation">:</span> help clean ius compile verdi<span class="token symbol">help</span><span class="token punctuation">:</span><span class="token operator">@</span>echo <span class="token string">"#==============================================================="</span><span class="token operator">@</span>echo <span class="token string">"# [Info] make help    : show help infomation"</span>   <span class="token operator">@</span>echo <span class="token string">"# [Info] make clean   : clean ius and verdi compile library,log"</span>   <span class="token operator">@</span>echo <span class="token string">"# [Info] make compile : compile for verdi"</span>   <span class="token operator">@</span>echo <span class="token string">"# [Info] make verdi   : raise verdi gui"</span>   <span class="token operator">@</span>echo <span class="token string">"#==============================================================="</span><span class="token symbol">clean</span><span class="token punctuation">:</span><span class="token operator">@</span>rm chip_lib.lib++ work.lib++ INCA_libs verdiLog vericomLog vhdlcomLog -rf<span class="token symbol">ius</span><span class="token punctuation">:</span>irun +access+wr -smartorder -clean -ntcnotchks -V93 -vtimescale 1ns/1ps +<span class="token keyword">define</span>+RD<span class="token operator">=</span>1 -work chip_lib <span class="token variable">$</span><span class="token punctuation">(</span>verilog_flist<span class="token punctuation">)</span> <span class="token variable">$</span><span class="token punctuation">(</span>vhd_flist<span class="token punctuation">)</span> -top <span class="token variable">$</span><span class="token punctuation">(</span>design<span class="token punctuation">)</span> -64bit<span class="token symbol">compile</span><span class="token punctuation">:</span><span class="token keyword">ifdef</span> vhdl_flistvhdlcom -V93 -sup_sem_error -smartorder -work chip_lib <span class="token variable">$</span><span class="token punctuation">(</span>vhdl_flist<span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token keyword">ifdef</span> verilog_flistvericom -sv +systemverilog+sv +v95ext+v95 +verilog2001ext+v -ignorekwd_config +<span class="token keyword">define</span>+RD<span class="token operator">=</span>1  -work chip_lib <span class="token variable">$</span><span class="token punctuation">(</span>verilog_flist<span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token symbol">verdi</span><span class="token punctuation">:</span>compileverdi -lib chip_lib <span class="token variable">$</span><span class="token punctuation">(</span>verdi_cmd<span class="token punctuation">)</span> &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> eda_tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eda_tools </tag>
            
            <tag> ASIC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git配置与使用教程</title>
      <link href="/p/git-learning.html"/>
      <url>/p/git-learning.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-git配置"><a class="markdownIt-Anchor" href="#1-git配置"></a> 1. git配置</h2><p>放在~/.gitconfig文件中</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-ini line-numbers" ><span class="token selector">[user]</span><span class="token constant">  name</span> <span class="token attr-value"><span class="token punctuation">=</span> victor.dong</span><span class="token constant">  email</span> <span class="token attr-value"><span class="token punctuation">=</span> dxs_uestc@163.com</span><span class="token selector">[color]</span><span class="token constant">  ui</span> <span class="token attr-value"><span class="token punctuation">=</span> auto</span><span class="token selector">[alias]</span><span class="token constant">  st</span> <span class="token attr-value"><span class="token punctuation">=</span> status</span><span class="token constant">  co</span> <span class="token attr-value"><span class="token punctuation">=</span> checkout</span><span class="token constant">  ci</span> <span class="token attr-value"><span class="token punctuation">=</span> commit</span><span class="token constant">  br</span> <span class="token attr-value"><span class="token punctuation">=</span> branch</span><span class="token constant">  df</span> <span class="token attr-value"><span class="token punctuation">=</span> diff</span><span class="token constant">  dfn</span> <span class="token attr-value"><span class="token punctuation">=</span> diff --name-only</span><span class="token constant">  dfs</span> <span class="token attr-value"><span class="token punctuation">=</span> diff --staged</span><span class="token constant">  dft</span> <span class="token attr-value"><span class="token punctuation">=</span> difftool</span><span class="token constant">  dfts</span> <span class="token attr-value"><span class="token punctuation">=</span> difftool --staged</span><span class="token constant">  mr</span> <span class="token attr-value"><span class="token punctuation">=</span> merge</span><span class="token constant">  mrt</span> <span class="token attr-value"><span class="token punctuation">=</span> mergetool</span><span class="token constant">  last</span> <span class="token attr-value"><span class="token punctuation">=</span> log -1 HEAD</span><span class="token constant">  amend</span> <span class="token attr-value"><span class="token punctuation">=</span> commit -C HEAD -a --amend</span><span class="token constant">  lg</span> <span class="token attr-value"><span class="token punctuation">=</span> log --color --graph --pretty=format:'%C(yellow)%h%C(reset) - %C()%cd%C(reset) %C()&lt;%an>%C(reset)%C(red)%d%C(reset) %C(ul)%s%C(reset)' --abbrev-commit --date=format:'%y/%m/%d %H:%M:%S'</span><span class="token constant">  ls</span> <span class="token attr-value"><span class="token punctuation">=</span> log --name-only --color --graph --pretty=format:'%C(yellow)%h%C(reset) - %C()%cd%C(reset) %C()&lt;%an>%C(reset)%C(red)%d%C(reset) %C(ul)%s%C(reset)' --abbrev-commit --date=format:'%y/%m/%d %H:%M:%S'</span><span class="token comment">#not show log in new page</span><span class="token selector">[core]</span><span class="token constant">pager</span> <span class="token attr-value"><span class="token punctuation">=</span></span><span class="token comment">#diff tool use beyond compare</span><span class="token selector">[diff]</span><span class="token constant">  tool</span> <span class="token attr-value"><span class="token punctuation">=</span> bcomp</span><span class="token selector">[difftool "bcomp"]</span><span class="token constant">  cmd</span> <span class="token attr-value"><span class="token punctuation">=</span> \"/usr/bin/bcompare\" \"$LOCAL\" \"$REMOTE\"</span><span class="token selector">[difftool]</span><span class="token constant">  prompt</span> <span class="token attr-value"><span class="token punctuation">=</span> false</span><span class="token comment">#merge tool use beyond compare</span><span class="token selector">[merge]</span><span class="token constant">  tool</span> <span class="token attr-value"><span class="token punctuation">=</span> bcomp</span><span class="token selector">[mergetool "bcomp"]</span><span class="token constant">  cmd</span> <span class="token attr-value"><span class="token punctuation">=</span> \"/usr/bin/bcompare\" \"$LOCAL\" \"$REMOTE\" \"$BASE\" \"$MERGED\"</span><span class="token selector">[mergetool]</span><span class="token constant">  prompt</span> <span class="token attr-value"><span class="token punctuation">=</span> false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vim配置方案</title>
      <link href="/p/vim-cfg.html"/>
      <url>/p/vim-cfg.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-vim插件及效果图"><a class="markdownIt-Anchor" href="#1-vim插件及效果图"></a> 1. VIM插件及效果图</h2><p>插件推荐：</p><ul data-mark="*"><li><a href="https://github.com/scrooloose/nerdtree" target="_blank" rel="noopener">NERDTree</a>: 树型目录</li><li><a href="https://github.com/ervandew/supertab" target="_blank" rel="noopener">supertab</a>: 自动补全，支持补全路径</li><li><a href="https://github.com/SirVer/ultisnips" target="_blank" rel="noopener">UltiSnips</a>: 补全代码神器</li><li><a href="https://github.com/honza/vim-snippets" target="_blank" rel="noopener">vim-snippets</a>: 将UltiSnips文件夹拷贝到~/.vim</li></ul><p>效果图：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="vim效果图" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20190504205744959.png" /></p><a id="more"></a><h2 id="2-vim配置方案"><a class="markdownIt-Anchor" href="#2-vim配置方案"></a> 2. VIM配置方案</h2><p>将如下配置放在~/.vimrc文件下</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-vim line-numbers" ><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => General</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Sets how many lines of history VIM has to remember</span><span class="token keyword">set</span> <span class="token keyword">history</span><span class="token operator">=</span><span class="token number">500</span><span class="token comment">" display numbers</span><span class="token keyword">set</span> <span class="token keyword">nu</span><span class="token comment">"visual edit everywhere</span><span class="token keyword">set</span> <span class="token builtin">virtualedit</span><span class="token operator">=</span><span class="token keyword">all</span><span class="token comment">"show command</span><span class="token keyword">set</span> <span class="token builtin">showcmd</span><span class="token keyword">set</span> <span class="token builtin">cmdheight</span><span class="token operator">=</span><span class="token number">2</span><span class="token keyword">set</span> <span class="token builtin">scrolloff</span><span class="token operator">=</span><span class="token number">3</span><span class="token comment">" Enable filetype plugins</span><span class="token keyword">filetype</span> plugin <span class="token keyword">on</span><span class="token keyword">filetype</span> indent <span class="token keyword">on</span><span class="token comment">" Set to auto read when a file is changed from the outside</span><span class="token keyword">set</span> <span class="token builtin">autoread</span><span class="token keyword">set</span> <span class="token builtin">nocompatible</span><span class="token comment">" Search</span><span class="token keyword">set</span> <span class="token builtin">ignorecase</span>    <span class="token comment">" Ignore case when searching</span><span class="token keyword">set</span> <span class="token builtin">smartcase</span>     <span class="token comment">" When searching try to be smart about cases</span><span class="token keyword">set</span> <span class="token builtin">hlsearch</span>      <span class="token comment">" Highlight search results</span><span class="token keyword">set</span> <span class="token builtin">incsearch</span>     <span class="token comment">" Makes search act like search in modern browsers</span><span class="token comment">" Don't redraw while executing macros (good performance config)</span><span class="token keyword">set</span> <span class="token builtin">lazyredraw</span><span class="token comment">" For regular expressions turn magic on</span><span class="token keyword">set</span> <span class="token builtin">magic</span><span class="token comment">" Show matching brackets when text indicator is over them</span><span class="token keyword">set</span> <span class="token builtin">showmatch</span><span class="token comment">" How many tenths of a second to blink when matching brackets</span><span class="token keyword">set</span> <span class="token keyword">mat</span><span class="token operator">=</span><span class="token number">2</span><span class="token comment">" No annoying sound on errors</span><span class="token keyword">set</span> <span class="token builtin">noerrorbells</span><span class="token keyword">set</span> <span class="token builtin">novisualbell</span><span class="token keyword">set</span> <span class="token builtin">t_vb</span><span class="token operator">=</span><span class="token keyword">set</span> <span class="token keyword">tm</span><span class="token operator">=</span><span class="token number">500</span><span class="token comment">" Add a bit extra margin to the left</span><span class="token keyword">set</span> <span class="token builtin">foldcolumn</span><span class="token operator">=</span><span class="token number">1</span><span class="token keyword">set</span> <span class="token builtin">fdm</span><span class="token operator">=</span>marker<span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => Colors and Fonts</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Enable syntax highlighting</span><span class="token builtin">syntax</span> enable<span class="token keyword">colorscheme</span> monokai<span class="token comment">"colorscheme murphy</span><span class="token comment">"colorscheme solarized</span><span class="token comment">"let g:solarized_termcolors=256</span><span class="token string">"let g:solarized_contrast="</span>high<span class="token string">"    "</span>default value <span class="token operator">is</span> normal<span class="token keyword">set</span> <span class="token builtin">t_Co</span><span class="token operator">=</span><span class="token number">256</span>      <span class="token comment">"set vim terminal color</span><span class="token keyword">set</span> <span class="token builtin">background</span><span class="token operator">=</span>dark<span class="token comment">"set guifont=Mono\ 13</span><span class="token keyword">set</span> <span class="token builtin">guifont</span><span class="token operator">=</span>monaco\ <span class="token number">14</span><span class="token comment">" Set extra options when running in GUI mode</span><span class="token keyword">if</span> <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">"gui_running"</span><span class="token punctuation">)</span>    <span class="token keyword">set</span> <span class="token builtin">guioptions</span><span class="token operator">+=</span><span class="token keyword">m</span>    <span class="token comment">"hide menu</span>    <span class="token keyword">set</span> <span class="token builtin">guioptions</span><span class="token operator">-=</span>T    <span class="token comment">"hide tool</span>    <span class="token keyword">set</span> <span class="token builtin">guioptions</span><span class="token operator">-=</span>L    <span class="token comment">"hide left scrollbar</span>    <span class="token keyword">set</span> <span class="token builtin">guioptions</span><span class="token operator">-=</span><span class="token keyword">r</span>    <span class="token comment">"hide right scrollbar</span>    <span class="token keyword">set</span> <span class="token builtin">guioptions</span><span class="token operator">-=</span><span class="token keyword">b</span>    <span class="token comment">"hide bottom scrollbar</span>    <span class="token keyword">set</span> <span class="token builtin">guitablabel</span><span class="token operator">=</span><span class="token operator">%</span>M\ <span class="token operator">%</span><span class="token keyword">t</span><span class="token keyword">else</span>   <span class="token comment">"hi Comment term=italic ctermfg=Darkgray</span><span class="token comment">"   colorscheme molokai</span><span class="token keyword">endif</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => Statusline setting</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token keyword">set</span> <span class="token builtin">statusline</span><span class="token operator">=</span><span class="token operator">%</span><span class="token number">1</span><span class="token operator">*</span>\ <span class="token punctuation">[</span><span class="token operator">%</span><span class="token punctuation">{</span><span class="token function">Disp_Mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span>\ <span class="token operator">%</span><span class="token operator">*</span>\ <span class="token operator">%</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">.</span><span class="token function">58</span><span class="token punctuation">(</span><span class="token operator">%</span>F<span class="token operator">%</span><span class="token keyword">m</span><span class="token operator">%</span><span class="token keyword">r</span><span class="token operator">%</span><span class="token keyword">h</span><span class="token operator">%</span><span class="token keyword">w</span><span class="token operator">%</span><span class="token punctuation">)</span>\ <span class="token operator">%</span><span class="token number">2</span><span class="token operator">*</span>\ <span class="token operator">%</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">.</span><span class="token function">58</span><span class="token punctuation">(</span>CWD<span class="token punctuation">:</span>\ <span class="token operator">%</span><span class="token punctuation">{</span><span class="token function">getcwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token punctuation">)</span>\ <span class="token operator">%</span><span class="token operator">*</span>\ Format<span class="token punctuation">:</span>\ <span class="token punctuation">[</span><span class="token operator">%</span><span class="token punctuation">{</span>&amp;<span class="token builtin">fenc</span><span class="token operator">!=</span><span class="token string">''</span><span class="token operator">?</span>&amp;<span class="token builtin">fenc</span><span class="token punctuation">:</span>&amp;<span class="token builtin">enc</span><span class="token punctuation">}</span><span class="token punctuation">]</span>\ <span class="token operator">%</span><span class="token number">3</span><span class="token operator">*</span>\ FileType<span class="token punctuation">:</span>\ <span class="token operator">%</span><span class="token keyword">y</span>\ <span class="token operator">%</span><span class="token operator">*</span>\ <span class="token operator">%</span><span class="token punctuation">(</span><span class="token punctuation">[</span>L<span class="token punctuation">:</span>\ <span class="token operator">%</span><span class="token keyword">l</span><span class="token punctuation">,</span>C<span class="token punctuation">:</span>\ <span class="token operator">%</span><span class="token keyword">c</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">%</span><span class="token keyword">p</span><span class="token operator">%</span><span class="token operator">%</span><span class="token punctuation">]</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token operator">&lt;</span><span class="token builtin">hi</span> User1 guibg<span class="token operator">=</span>slateblue guifg<span class="token operator">=</span>Gray ctermfg<span class="token operator">=</span>Gray ctermbg<span class="token operator">=</span><span class="token number">93</span><span class="token builtin">hi</span> User2 guibg<span class="token operator">=</span>#4876FF guifg<span class="token operator">=</span>Gray ctermfg<span class="token operator">=</span>Gray ctermbg<span class="token operator">=</span><span class="token number">53</span><span class="token builtin">hi</span> User3 guibg<span class="token operator">=</span>Brown guifg<span class="token operator">=</span>Gray ctermfg<span class="token operator">=</span>Gray ctermbg<span class="token operator">=</span><span class="token number">160</span><span class="token builtin">hi</span> StatusLine guibg<span class="token operator">=</span>#cccccc guifg<span class="token operator">=</span>#<span class="token number">222222</span><span class="token keyword">set</span> <span class="token builtin">laststatus</span><span class="token operator">=</span><span class="token number">2</span>  <span class="token comment">"2:always display</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => file coding and decoding</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Set utf8 as standard encoding and en_US as the standard language</span><span class="token keyword">set</span> <span class="token builtin">termencoding</span><span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token keyword">set</span> <span class="token builtin">encoding</span><span class="token operator">=</span>utf8<span class="token keyword">set</span> <span class="token builtin">fileencodings</span><span class="token operator">=</span>ucs<span class="token operator">-</span>bom<span class="token punctuation">,</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>cp936<span class="token punctuation">,</span>gb18030<span class="token punctuation">,</span>big5<span class="token punctuation">,</span>latin1     <span class="token comment">"decoding list</span><span class="token keyword">set</span> <span class="token builtin">fileencoding</span><span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => Files, backups and undo</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Turn backup off, since most stuff is in SVN, git et.c anyway...</span><span class="token keyword">set</span> <span class="token builtin">nobackup</span><span class="token keyword">set</span> <span class="token builtin">nowb</span><span class="token keyword">set</span> <span class="token builtin">noswapfile</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" => Text, tab and indent related</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" 1 tab == 4 spaces</span><span class="token keyword">set</span> <span class="token builtin">shiftwidth</span><span class="token operator">=</span><span class="token number">4</span><span class="token keyword">set</span> <span class="token builtin">tabstop</span><span class="token operator">=</span><span class="token number">4</span><span class="token keyword">set</span> <span class="token builtin">softtabstop</span><span class="token operator">=</span><span class="token number">4</span><span class="token comment">" Use spaces instead of tabs</span><span class="token keyword">set</span> <span class="token builtin">expandtab</span><span class="token comment">" Be smart when using tabs</span><span class="token keyword">set</span> <span class="token builtin">smarttab</span><span class="token comment">"toggle paste mode with hitting F2 key</span><span class="token keyword">set</span> <span class="token builtin">pastetoggle</span><span class="token operator">=</span><span class="token operator">&lt;</span>F2<span class="token operator">></span><span class="token string">"set paste    "</span><span class="token keyword">open</span> <span class="token builtin">paste</span> <span class="token keyword">mode</span><span class="token keyword">set</span> <span class="token builtin">ai</span> <span class="token comment">"Auto indent</span><span class="token keyword">set</span> <span class="token builtin">si</span> <span class="token comment">"Smart indent</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Wrap and breakline setting</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" Linebreak on 500 characters</span><span class="token keyword">set</span> <span class="token builtin">lbr</span>                 <span class="token comment">"linebreak</span><span class="token keyword">set</span> <span class="token builtin">tw</span><span class="token operator">=</span><span class="token number">500</span>              <span class="token comment">"break at 500 words</span><span class="token keyword">set</span> <span class="token builtin">showbreak</span><span class="token operator">==</span><span class="token operator">></span>\          <span class="token string">"show "</span><span class="token operator">=</span><span class="token operator">></span><span class="token comment">" before the break line</span><span class="token keyword">set</span> <span class="token builtin">wrap</span> <span class="token comment">"Wrap lines</span><span class="token comment">"configure backspace</span><span class="token keyword">set</span> <span class="token builtin">backspace</span><span class="token operator">=</span><span class="token builtin">eol</span><span class="token punctuation">,</span>start<span class="token punctuation">,</span>indent<span class="token keyword">set</span> <span class="token builtin">whichwrap</span><span class="token operator">+=</span><span class="token operator">&lt;</span><span class="token punctuation">,</span><span class="token operator">></span><span class="token punctuation">,</span><span class="token keyword">h</span><span class="token punctuation">,</span><span class="token keyword">l</span><span class="token comment">" Highlight the current line</span><span class="token keyword">set</span> <span class="token builtin">cursorline</span><span class="token comment">"highlight CursorLine          guibg=#003853 ctermbg=24  gui=none cterm=none</span><span class="token keyword">set</span> <span class="token builtin">clipboard</span><span class="token operator">=</span>unnamed    <span class="token comment">"yank unnamed register to the system register</span><span class="token comment">" Return to last edit position when opening files (You want this!)  </span><span class="token builtin">autocmd</span><span class="token operator">!</span> BufReadPost <span class="token operator">*</span>       \ <span class="token keyword">if</span> <span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"'\""</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"'\""</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span> |       \   exe <span class="token string">"normal! g`\""</span> |       \ <span class="token keyword">endif</span><span class="token comment">"auto load ~/.vimrc</span><span class="token builtin">autocmd</span><span class="token operator">!</span> BufWritePost $MYVIMRC <span class="token keyword">source</span> $MYVIMRC<span class="token keyword">let</span> mapleader <span class="token operator">=</span> <span class="token string">','</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>mapleader <span class="token operator">=</span> <span class="token string">','</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"save and quit</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"quit without save</span>map <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">q</span> <span class="token punctuation">:</span><span class="token keyword">q</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span>    <span class="token comment">"save and quit</span>map <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">w</span> <span class="token punctuation">:</span><span class="token keyword">wq</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span>    <span class="token comment">"save force with :W</span><span class="token comment">"command! W w !sudo tee % > /dev/null</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"save and quit</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span>map <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">tn</span> <span class="token punctuation">:</span><span class="token keyword">tabnew</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span>map <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">tc</span> <span class="token punctuation">:</span><span class="token keyword">tabclose</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span>map <span class="token operator">&lt;</span>C<span class="token operator">-</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token punctuation">:</span><span class="token keyword">tabn</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span>map <span class="token operator">&lt;</span>C<span class="token operator">-</span>S<span class="token operator">-</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token punctuation">:</span><span class="token keyword">tabp</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span><span class="token comment">" no highlight</span>map <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token operator">/</span> <span class="token punctuation">:</span>nohl<span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span><span class="token comment">" Merge selected text into one line</span>vmap <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">m</span> J<span class="token comment">" change all the tab into space</span>nmap <span class="token operator">&lt;</span>leader<span class="token operator">></span>rt <span class="token punctuation">:</span><span class="token keyword">retab</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span><span class="token comment">" update when diff two files</span>nmap <span class="token operator">&lt;</span>leader<span class="token operator">></span>du <span class="token punctuation">:</span><span class="token keyword">diffupdate</span><span class="token operator">&lt;</span><span class="token keyword">cr</span><span class="token operator">></span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"copy and paste</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"map &lt;C-A> ggVG</span><span class="token comment">"map! &lt;C-A> &lt;Esc>ggVG</span><span class="token comment">" copy</span><span class="token string">"vmap &lt;C-c> "</span><span class="token operator">+</span><span class="token keyword">y</span><span class="token comment">" cut</span><span class="token string">"vmap &lt;C-x> "</span><span class="token operator">+</span><span class="token keyword">x</span><span class="token comment">" paste</span>nmap <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">p</span> <span class="token comment">"+gP</span><span class="token comment">"back to file</span>nmap <span class="token operator">&lt;</span>leader<span class="token operator">></span><span class="token keyword">b</span> <span class="token punctuation">:</span><span class="token keyword">bf</span><span class="token operator">&lt;</span>CR<span class="token operator">></span>nmap gt <span class="token operator">&lt;</span>C<span class="token operator">-</span><span class="token keyword">w</span><span class="token operator">></span>gfvnoremap gt <span class="token operator">&lt;</span>C<span class="token operator">-</span><span class="token keyword">w</span><span class="token operator">></span>gf<span class="token comment">" tab to indent and shift-tab to unindent</span>nmap <span class="token operator">&lt;</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token operator">></span><span class="token operator">></span>vmap <span class="token operator">&lt;</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token operator">></span>gvnmap <span class="token operator">&lt;</span>S<span class="token operator">-</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span>vmap <span class="token operator">&lt;</span>S<span class="token operator">-</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token operator">&lt;</span>gvimap <span class="token operator">&lt;</span>S<span class="token operator">-</span><span class="token keyword">tab</span><span class="token operator">></span> <span class="token operator">&lt;</span>ESC<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">&lt;</span>i<span class="token comment">"visual block key i behaves like &lt;shift-i></span>vnoremap <span class="token operator">&lt;</span>expr<span class="token operator">></span> i <span class="token function">mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=~</span><span class="token string">'\cv'</span> <span class="token operator">?</span> <span class="token string">'i'</span> <span class="token punctuation">:</span> <span class="token string">'I'</span>vnoremap <span class="token operator">&lt;</span>expr<span class="token operator">></span> a <span class="token function">mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=~</span><span class="token string">'\cv'</span> <span class="token operator">?</span> <span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token string">'A'</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"auto complete (),[],{}and so on</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span>  <span class="token punctuation">:</span>inoremap <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>Left<span class="token operator">></span><span class="token punctuation">:</span>inoremap <span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token keyword">c</span><span class="token operator">-</span><span class="token keyword">r</span><span class="token operator">>=</span><span class="token function">ClosePair</span><span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token punctuation">:</span>inoremap <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>Left<span class="token operator">></span><span class="token builtin">autocmd</span> FileType <span class="token keyword">c</span><span class="token punctuation">,</span>cpp <span class="token punctuation">:</span>inoremap <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">&lt;</span>ESC<span class="token operator">></span>O<span class="token punctuation">:</span>inoremap <span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token keyword">c</span><span class="token operator">-</span><span class="token keyword">r</span><span class="token operator">>=</span><span class="token function">ClosePair</span><span class="token punctuation">(</span><span class="token string">'}'</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token punctuation">:</span>inoremap <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>Left<span class="token operator">></span><span class="token punctuation">:</span>inoremap <span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token keyword">c</span><span class="token operator">-</span><span class="token keyword">r</span><span class="token operator">>=</span><span class="token function">ClosePair</span><span class="token punctuation">(</span><span class="token string">']'</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token punctuation">:</span>inoremap <span class="token string">" "</span><span class="token comment">"&lt;Left></span><span class="token comment">"autocmd Filetype c,cpp,python,perl :inoremap </span><span class="token string">' '</span>'<span class="token operator">&lt;</span>ESC<span class="token operator">></span>i<span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">ClosePair</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token function">getline</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token function">col</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> a<span class="token punctuation">:</span>char        <span class="token keyword">return</span> <span class="token string">"\&lt;Right>"</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> a<span class="token punctuation">:</span>char    <span class="token keyword">endif</span><span class="token keyword">endfunction</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"自动插入文件头</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token builtin">autocmd</span><span class="token operator">!</span> BufNewFile <span class="token operator">*</span> <span class="token keyword">silent</span><span class="token operator">!</span> 0r ~<span class="token operator">/</span><span class="token operator">.</span><span class="token keyword">vim</span><span class="token operator">/</span>skel<span class="token operator">/</span>Template<span class="token operator">.</span><span class="token operator">%</span><span class="token punctuation">:</span><span class="token keyword">e</span><span class="token builtin">autocmd</span><span class="token operator">!</span> BufNewFile <span class="token operator">*</span><span class="token operator">.</span>cpp<span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span><span class="token punctuation">[</span><span class="token builtin">ch</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span><span class="token keyword">sh</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span>java<span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span>v<span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span><span class="token keyword">sv</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span>vhd<span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">.</span><span class="token keyword">py</span> exec <span class="token string">":call SetTitle()"</span><span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">SetTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">"如果文件类型为脚本文件</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~</span> <span class="token string">'sh\|perl\|python'</span>        <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'sh'</span>            <span class="token keyword">call</span> <span class="token function">setline</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"#!/bin/bash"</span><span class="token punctuation">)</span>        <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'perl'</span>            <span class="token keyword">call</span> <span class="token function">setline</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"#!/usr/bin/perl -w"</span><span class="token punctuation">)</span>        <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'python'</span>            <span class="token keyword">call</span> <span class="token function">setline</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"#!/usr/bin/env python"</span><span class="token punctuation">)</span>        <span class="token keyword">endif</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~</span> <span class="token string">'verilog\|systemverilog\|c\|cpp'</span>        <span class="token keyword">call</span> <span class="token function">setline</span><span class="token punctuation">(</span><span class="token number">1</span>          <span class="token punctuation">,</span> <span class="token string">"\//------------------------------------------------------------------------"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>   <span class="token punctuation">,</span> <span class="token string">"\// File Name   : "</span><span class="token operator">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">"\// Author      : victor dong (dxs_uestc@163.com)"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span> <span class="token punctuation">,</span> <span class="token string">"\// Version     : V0.1 "</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">3</span> <span class="token punctuation">,</span> <span class="token string">"\//------------------------------------------------------------------------"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">4</span> <span class="token punctuation">,</span> <span class="token string">"\// Description :"</span> <span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">5</span> <span class="token punctuation">,</span> <span class="token string">"\//     "</span> <span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">6</span> <span class="token punctuation">,</span> <span class="token string">"\//------------------------------------------------------------------------"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">7</span> <span class="token punctuation">,</span> <span class="token string">"\// Revision History:"</span> <span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">8</span> <span class="token punctuation">,</span> <span class="token string">"\// *Version* | *Modifier* | *Modified Date* | *Description*"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">9</span> <span class="token punctuation">,</span> <span class="token string">"\//   V0.1    |   Victor   |   "</span><span class="token operator">.</span><span class="token function">strftime</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string">"    | Fisrt Created."</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"\//------------------------------------------------------------------------"</span><span class="token punctuation">)</span>                <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span>    <span class="token keyword">endif</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'cpp'</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"#include&lt;iostream>"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">"using namespace std;"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">endif</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'c'</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"#include&lt;stdio.h>"</span><span class="token punctuation">)</span>        <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">endif</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~</span> <span class="token string">'verilog\|systemverilog'</span>        <span class="token keyword">if</span> <span class="token function">expand</span><span class="token punctuation">(</span><span class="token string">"%:r"</span><span class="token punctuation">)</span> <span class="token operator">=~</span> <span class="token string">'tb$'</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"`timescale 1ns/1ps"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">"module "</span><span class="token operator">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token string">"%:r"</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string">"();"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">"initial begin"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">"    $fsdbDumpfile(\"wave.fsdb\");"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"    $fsdbDumpvars(0);"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">"\//    $fsdbDumpMDA(0);"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">"end"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">"endmodule"</span><span class="token punctuation">)</span>        <span class="token keyword">else</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"module "</span><span class="token operator">.</span><span class="token function">expand</span><span class="token punctuation">(</span><span class="token string">"%:r"</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string">"("</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">"    input clk   ,"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">"    input rst_n ,"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">");"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">"\//=============================================="</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"\// Definition of regs and wires"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">"\//=============================================="</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">"\//**********************************************"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">"\// Function"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">"\//**********************************************"</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>            <span class="token keyword">call</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">"endmodule"</span><span class="token punctuation">)</span>        <span class="token keyword">endif</span>    <span class="token keyword">endif</span>    <span class="token comment">"新建文件后，自动定位到文件末尾</span>    exec <span class="token string">"normal G"</span>endfunc<span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token string">""</span>实现上面函数中的，Last Modified功能<span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">"autocmd! BufWrite,BufWritePre,FileWritePre  *.cpp,*.[ch],*.sh,*.java,*.v,*.sv,*.vhd,*.py  ks|call LastModified()|'s  </span><span class="token comment">"function! LastModified()</span><span class="token string">"if line("</span>$<span class="token comment">") > 20</span><span class="token comment">"let l = 20</span><span class="token comment">"else</span><span class="token string">"let l = line("</span>$<span class="token comment">")</span><span class="token comment">"endif</span><span class="token string">"exec "</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">".l."</span>g<span class="token operator">/</span>Last Modified<span class="token punctuation">:</span> <span class="token operator">/</span>s<span class="token operator">/</span>Last Modified<span class="token punctuation">:</span> <span class="token operator">.</span><span class="token operator">*</span><span class="token operator">/</span>Last Modified<span class="token punctuation">:</span><span class="token comment">".</span><span class="token string">"\strftime("</span> <span class="token operator">%</span>Y<span class="token operator">-</span><span class="token operator">%</span><span class="token keyword">m</span><span class="token operator">-</span><span class="token operator">%</span><span class="token keyword">d</span> <span class="token operator">%</span>H<span class="token punctuation">:</span><span class="token operator">%</span>M<span class="token punctuation">:</span><span class="token operator">%</span>S<span class="token string">") . "</span><span class="token operator">/</span><span class="token keyword">e</span><span class="token comment">"</span><span class="token comment">"endfunc</span><span class="token comment">" Returns true if paste mode is enabled</span><span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">HasPaste</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> &amp;<span class="token builtin">paste</span>        <span class="token keyword">return</span> <span class="token string">'[PASTE MODE]  '</span>    <span class="token keyword">endif</span>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token keyword">endfunction</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" return vim mode</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">Disp_Mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> <span class="token keyword">mode</span><span class="token operator">=</span><span class="token function">mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">'v'</span>        <span class="token keyword">return</span> <span class="token string">'Visual'</span>    <span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">'V'</span>        <span class="token keyword">return</span> <span class="token string">'V-Line'</span>    <span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">''</span>        <span class="token keyword">return</span> <span class="token string">'V-Block'</span>    <span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">'s'</span>        <span class="token keyword">return</span> <span class="token string">'Select'</span><span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">'S'</span>        <span class="token keyword">return</span> <span class="token string">'S-Line'</span><span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">==#</span> <span class="token string">''</span>        <span class="token keyword">return</span> <span class="token string">'S-Block'</span><span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">=~#</span> <span class="token string">'\vi'</span>        <span class="token keyword">return</span> <span class="token string">'Insert'</span><span class="token keyword">elseif</span> <span class="token keyword">mode</span> <span class="token operator">=~#</span> <span class="token string">'\v(R|Rv)'</span>        <span class="token keyword">return</span> <span class="token string">'Replace'</span><span class="token keyword">else</span>        <span class="token keyword">return</span> <span class="token string">'Normal'</span><span class="token keyword">endif</span><span class="token keyword">endfunction</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" add comment and del comment</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token builtin">autocmd</span> BufNewFile<span class="token punctuation">,</span>BufRead <span class="token operator">*</span> map <span class="token operator">&lt;</span>C<span class="token operator">-</span><span class="token keyword">c</span><span class="token operator">></span> <span class="token punctuation">:</span><span class="token keyword">call</span> <span class="token function">AddComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token builtin">autocmd</span> BufNewFile<span class="token punctuation">,</span>BufRead <span class="token operator">*</span> map <span class="token operator">&lt;</span>S<span class="token operator">-</span><span class="token keyword">c</span><span class="token operator">></span> <span class="token punctuation">:</span><span class="token keyword">call</span> <span class="token function">DelComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">AddComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~?</span> <span class="token string">'python\|perl\|tcl\|sh\|zsh\|csh\|conf\|sdc\|make'</span>        exec <span class="token string">'s/\v^(\s*)#*/#\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~?</span> <span class="token string">'verilog\|c\|cpp\|h'</span>        exec <span class="token string">'s/\v^(\s*)\/*/\/\/\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==?</span> <span class="token string">'vhdl'</span>        exec <span class="token string">'s/\v^(\s*)-*/--\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==?</span> <span class="token string">'vim'</span>        exec <span class="token string">'s/\v^(\s*)\"*/\"\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'xml'</span>        exec <span class="token string">'s/\v^(.*)$/&lt;!--\1-->'</span>    <span class="token keyword">endif</span>    exec <span class="token string">"nohl"</span><span class="token keyword">endfunction</span><span class="token keyword">function</span><span class="token operator">!</span> <span class="token function">DelComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~?</span> <span class="token string">'python\|perl\|tcl\|sh\|zsh\|csh\|conf\|sdc\|make'</span>        exec <span class="token string">'s/\v^(\s*)#*/\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">=~?</span> <span class="token string">'verilog\|c\|cpp\|h'</span>        exec <span class="token string">'s/\v^(\s*)\/*/\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==?</span> <span class="token string">'vhdl'</span>        exec <span class="token string">'s/\v^(\s*)-*/\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==?</span> <span class="token string">'vim'</span>        exec <span class="token string">'s/\v^(\s*)\"*/\1/'</span>    <span class="token keyword">elseif</span> &amp;<span class="token keyword">filetype</span> <span class="token operator">==</span> <span class="token string">'xml'</span>        exec <span class="token string">'s/\v^%(\s*\&lt;\!--)*(.*)%(-->\s*)*$/\1/'</span>    <span class="token keyword">endif</span>    exec <span class="token string">"nohl"</span><span class="token keyword">endfunction</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" filetype</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span>au BufNewFile<span class="token punctuation">,</span>BufRead readme<span class="token punctuation">,</span>README <span class="token keyword">setf</span> <span class="token keyword">help</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" plugin: supertab</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>SuperTabDefaultCompletionType <span class="token operator">=</span> <span class="token string">"context"</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>SuperTabMappingForward <span class="token operator">=</span> <span class="token string">'&lt;s-space>'</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>SuperTabMappingBackward <span class="token operator">=</span> <span class="token string">'&lt;s-c-space>'</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" plugin: NERDTree</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">"autocmd vimenter * NERDTree</span><span class="token builtin">autocmd</span> bufenter <span class="token operator">*</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">winnr</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">exists</span><span class="token punctuation">(</span><span class="token string">"b:NERDTreeType"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">b</span><span class="token punctuation">:</span>NERDTreeType <span class="token operator">==</span> <span class="token string">"primary"</span><span class="token punctuation">)</span> | <span class="token keyword">q</span> | <span class="token keyword">endif</span>map <span class="token operator">&lt;</span>F3<span class="token operator">></span> <span class="token punctuation">:</span>NERDTreeToggle<span class="token operator">&lt;</span>CR<span class="token operator">></span><span class="token keyword">let</span> NERDTreeShowHidden<span class="token operator">=</span><span class="token number">0</span><span class="token keyword">let</span> NERDTreeWinSize<span class="token operator">=</span><span class="token number">25</span><span class="token keyword">let</span> NERDTreeIgnore<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'\~$'</span><span class="token punctuation">,</span> <span class="token string">'\.swap$'</span><span class="token punctuation">,</span> <span class="token string">'.pyc$'</span><span class="token punctuation">]</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token comment">" plugin: UltiSnips</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token string">""</span><span class="token comment">"</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>UltiSnipsExpandTrigger<span class="token operator">=</span><span class="token string">"&lt;tab>"</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>UltiSnipsJumpForwardTrigger<span class="token operator">=</span><span class="token string">"&lt;tab>"</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>UltiSnipsJumpBackwardTrigger<span class="token operator">=</span><span class="token string">"&lt;c-b>"</span><span class="token comment">" If you want :UltiSnipsEdit to split your window.</span><span class="token keyword">let</span> g<span class="token punctuation">:</span>UltiSnipsEditSplit<span class="token operator">=</span><span class="token string">"vertical"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>]]></content>
      
      
      <categories>
          
          <category> vim </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> vimrc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IEEE1801 UPF核心要点</title>
      <link href="/p/upf-note.html"/>
      <url>/p/upf-note.html</url>
      
        <content type="html"><![CDATA[<p>CPF, UPF, IEEE1801 这些名称的渊源可参阅《一文读懂power intent的历史：从CPF/UPF到IEEE1801》，1801的内容其实十分简明，概括来说一个完整的1801 文件可以分成三部分<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>：</p><ul data-mark="*"><li>区域划分: 上帝的归上帝，凯撒的归凯撒，包括supply set 跟power domain 两个东西。</li><li>策略定义: 没有清规戒律，何以服众，包括isolation, level shifter, retention, power switch 四种策略。</li><li>模式定义: 宿命就是划定的圈，听天由命也是宿命，只有power state.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="SOC UPF结构图" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018205024719.png" /></p><a id="more"></a><p>在实际项目中，power domain 的划分有时候会极其复杂，会有多个1801 文件相互调用，但再复杂的设计都是上述三部分内容的集合，在面对复杂设计时，简单有效的办法是：一张图 + 一张表。</p><ul data-mark="*"><li>一张图：将power domain 及boundary 的关系画出来，就可以十分明确地知道需要定义多少个power domain, 每个power domain 有哪些供电电压，哪些power domain 之间需要isolation 或level shifter, 哪些power domain 需要power switch 跟retention cell. 有了图之后，剩下的事情就是用1801 的命令进行描述。</li><li>一张表：用表来描述power state, 先将每一个supply set 的power state 列出，再将系统的power mode 列出。</li></ul><h2 id="1-区域划分"><a class="markdownIt-Anchor" href="#1-区域划分"></a> 1. 区域划分</h2><p>Supply set：从1801 开始引入supply set 的概念，supply set 很像C++ 里的&quot;类&quot;，它将所有相关的supply nets &quot;封装&quot;起来，一个supply set 包含某个instance 或power domain 所有的supply nets。1801 的标准一直在更新，现在最新的应该是IEEE1801-2015, supply set 的定义如下图：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018205150707.png" /></p><p>Power Domain：在逻辑上看，power domain是一组instance 的集合，集合中所有的instance 共用相同的supply set. 从物理上看，一个power domain 对应一个voltage area, 这个area 内部所有的std cell 用同一组电源和地。<br />需要特别说明一下 -available_supply 这个option,  默认在&quot;本power domain&quot; 或 “父power domain” 区域定义的supply set 都可供该power domain 所用，但实际项目中，并不能也不需要将所有的power 都拉到该区域，所以需要给工具指明该power domain 需要哪些supply set, 此时就需要用到这个 option:</p><ul data-mark="*"><li>如果没有指定-available_supply，则在&quot;本power domain&quot; 或 “父power domain” 区域定义的supply set 都可为该power domain 所用；</li><li>如果指定-available_supply 且其值为空字符串，如 {} , 那只有-supply 指定的supply set 才可以为本power domain 所用；</li><li>如果用-available_supply 指定了某个具体的 supply set, 则该power domain 除了可以用由-supply 指定的supply set 也可以用由该option 指定的supply set.<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018205305227.png" /></li></ul><p>Supply set in Power domain：每创建一个power domain 都会自动创建三个supply sets:</p><ul data-mark="*"><li>Primary：定义该power domain 中所有instance 的primary power 和 primary ground。</li><li>Default retention: 用于retention cells.</li><li>Default isolation：用于isolation cells</li></ul><p>也同C++ 中对象的访问类似，可以用 “句柄” 来访问power domain 的supply set, 如：“DomainName.Supply_set”。创建power domain时自动创建的supply sets 需要同电路中的supply net 正确关联起来方可。有如下两种方式：</p><ul data-mark="*"><li>Style1:</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-tcl" >create_supply_set SS1 <span class="token operator">-</span>function <span class="token punctuation">{</span>power VDD<span class="token punctuation">}</span>create_power_domain PD1 –supply <span class="token punctuation">{</span>primary SS1<span class="token punctuation">}</span></pre></div><ul data-mark="*"><li>Style2:</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-tcl" >create_power_domain PD1create_supply_set SS1 <span class="token operator">-</span>function <span class="token punctuation">{</span>power VDD<span class="token punctuation">}</span>associate_supply_set SS1 –handle PD1.primary</pre></div><h2 id="2-策略定义"><a class="markdownIt-Anchor" href="#2-策略定义"></a> 2. 策略定义</h2><h3 id="21-isolation"><a class="markdownIt-Anchor" href="#21-isolation"></a> 2.1 Isolation</h3><p>Isolation：当一条net 的driver 在shutoff power domain 而load 在more on power domain 时，该net 在跨power domain 时就需要插入isolation cell. 以保证在shutoff power domain 断电时，more on power domain 的输入被钳位到一个固定电压值而不是一个不定态。Isolation cell 在逻辑功能上可能是『二输入与』也可能是『二输入或』，其中一个输入是控制信号，用于掉电后把输出拉高或拉低，另一个输入为功能信号。通常有双电源跟单电源两种isolation cell, 双电源isolaiton cell 可以放入shutoff power domain, 一组电源接shutoff power 另一组电源接backup 电源；而单电源isolation cell 只能放入more on power domain 或more more on parents power domain.<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211000587.png" /></p><p>不同的工具都在跟着IEEE 1801 标准的更新不断改进，并不是所有的工具都支持所有的option, 其实大部分isolation 的定义都不需要所有的option。在UPF1.0 中需要用set_isolation + set_isolation_control 两条命令来定义一条isolation stratage, 即使是到1801 时代，在很长一段时间，有些工具依然需要用两条命令来定义。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211024332.png" /></p><p><strong>定义哪里需要插入 isolation：</strong></p><ul data-mark="*"><li>从&quot;一张图&quot; 开始，确定需要插入isolation 的interface net.</li><li>用下面的option 来定义：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211121920.png" /></li></ul><p><strong>定义如何插入 Isolation：</strong></p><ul data-mark="*"><li>用如下option 定义：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211241390.png" /></li></ul><h3 id="22-level-shifter"><a class="markdownIt-Anchor" href="#22-level-shifter"></a> 2.2 Level Shifter</h3><p>Level shifters：当一条net 的driver 跟load 在由不同电压驱动的power domain 时，该net 在跨power domain 时就需要插入level shifter cell，以确保输入信号的电平在合法范围内。通常level shifter cell 有三种：从低到高、从高到低、既能低到高也能高到低。在逻辑功能上 level shifter cell 比isolation cell 简单，就是一个buffer，但是需要两组power supply, 输入power supply 对应于driver 的supply, 输出power supply 对应于load 的supply。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211335720.png" /></p><p>理论上讲，只要net 跨越不同电压驱动的power domain 就需要插入level shifter cell, 但是如果一根信号是从高电压区域到低电压区域，且『高低电压差』在低电压区cell 可忍受范围内，则可以省去该level shifter cell. 但是通常从低电压到高电压，则一定要插入level shifter，否则可能由于电压低于load cell 翻转电压导致功能错误，而且会由于管子不能完全关断会造成持续短路电流。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211411199.png" /></p><p>level shifter rule 的定义也比isolation rule 要简单。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211448191.png" /></p><p><strong>定义哪里需要插入 level shifter:</strong><br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211522593.png" /></p><p><strong>定义如何插入 level shifter：</strong><br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211557478.png" /></p><h3 id="23-retention"><a class="markdownIt-Anchor" href="#23-retention"></a> 2.3 Retention</h3><p>Retention：shut off domain 中有些寄存器非常重要，即便是掉电后其内容也需要被保留住，以保证上电后相关逻辑有个正确的起点，在低功耗设计中这些寄存器会用retention 寄存器来替换，retention 寄存器有多种结构，差别之处主要在控制信号的数目及控制方式，内部结构相差并不大。相比于普通的寄存器Rentention 寄存器内部多了一个有独立电源的latch, 这个独立电源会连到always on supply 上，当主电源掉电后，该Latch 会将寄存器掉电前最后的状态锁存住，当主电源恢复后，再将该Latch 锁存的状态读回。常见的retention cell 有如下几种，此处不展开描述，会另辟章节介绍这些低功耗cell。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018211939587.png" /></p><p>Retention rule 比其他几个rule 要复杂一些，在定义retention rule 之前需要确认几点：</p><ul data-mark="*"><li>去lib 或lib 的doc 中确认要用到的retention cell 的控制信号是哪些，及相应的有效电平。</li><li>跟设计人员确认shut off domain 中哪些寄存器需要做retention.</li><li>确认retention cell 的backup supply是谁。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212054979.png" /></li></ul><p>哪些寄存器需要retention：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212115651.png" /></p><p>指定retention cell 的backup supply：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212132211.png" /></p><p>指定retention cell 的控制信号：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212148951.png" /></p><p>指定用那种retention cell：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212205403.png" /></p><h3 id="24-power-switch"><a class="markdownIt-Anchor" href="#24-power-switch"></a> 2.4 Power Switch</h3><p>Power Switches：用于控制shut off power domain 电源的开关，power switch 用于控制power net 故跟power plan 相关，在实现时需要精细考虑以尽量减小其造成的IR-drop. 不像其他low power cell 通常需要在综合时插入, power switch cell 是在P&amp;R 工具中插入的。通常power switch cell 有Coarse Grain 和Fine Grain 两种，更常用的是Coarse Grain, 根据切断电流通路的位置它又分Header Switch  跟Footer Switch 两中。Fine Grain 指对每个STD cell 分别关断，这要求每个STD cell 自带一个Switch 管子且有一个控制pin, 在该Domain 不工作时将supply 断开。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212244887.png" /></p><p>常见的Power Switch cell 有一个控制信号或两个控制信号用-control_port 来指定，用-on_state 来定义控制逻辑，如&quot;与或非&quot; 。 -ack_port 所指定的信号用于表示输出电压是否已稳定，这个信号通常用于其他power switch 的输入或状态机的控制。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-2018101821230640.png" /></p><h3 id="25-map-to-specfic-cells"><a class="markdownIt-Anchor" href="#25-map-to-specfic-cells"></a> 2.5 Map to specfic cells</h3><p>在大多数情况下，都需要指定某个isolation 或 level shifter stratage 可用哪些特定的lib cell, 在UPF 1.0 中会用如下命令予以指定：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-tcl" >map_isolation_cell <span class="token operator">-</span>lib_cells <span class="token operator">&lt;</span>cells list<span class="token operator">></span>map_level_shifter_cell <span class="token operator">-</span>lib_cells <span class="token operator">&lt;</span>cells list<span class="token operator">></span></pre></div><p>在很多用IEEE 1801 描写的UPF 文件中，亦会用这两条命令来指定，一方面是由于工具端更新不及时，另一方面源于用户使用习惯。 在IEEE1801 中定义了新命令：use_interface_cell. 这条命令可以针对某条具体的strategy 来指定。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212504932.png" /></p><p>如果一条net 即需要插入isolation cell 也需要插入 level shifter cell 通常会用到一种带enable pin 的level shifter cell, 这类cell 有两类：一类叫enabled level shifter cell 另一种叫combo cells, 即将isolation cell 跟 level shifter cell 组合到一起的cell, 这两类cell 在library 中的定义不同，用CPF 描述时也不同，用IEEE 1801定义时，需要分别定义isolation rule 跟 level shifter rule, 然后用use_interface_cell 将两条rule 指定到组合的cell 上即可。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018212607555.png" /></p><h2 id="3-模式定义"><a class="markdownIt-Anchor" href="#3-模式定义"></a> 3. 模式定义</h2><p>Power State：power state 是power intent 的&quot;状态机&quot;，用于定义设计中每个power domain 的供电状况，如哪些power domain 开启，哪些power domain 关断，哪些power domain 可工作于多个电压。CPF, UPF, 1801 都有各自定义power state的命令。</p><ul data-mark="*"><li>CPF: 用create_power_mode 来定义，在CPF 中power state 通常被称为power mode.</li><li>UPF: 用add_port_state + create_pst + add_pst 来定义，比较繁琐。</li><li>1801: 虽然可以用upf 的命令来定义，但是强烈推荐用命令add_power_state 来定义。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018213042992.png" /></li></ul><p>如同RTL 写状态机需要画状态转移图一样，在定义power state 之前最好列一张&quot;状态表&quot;，尤其对于复杂设计而言十分必要。如下图，该设计有两个power domain:</p><ul data-mark="*"><li>PDon: 常开电压域，工作电压1.08V，对应的supply set 是VDD + VSS.</li><li>PD1: 可关断电压域, 工作电压是0.9V, 对应的supply set 是power switch 的输入VDDm + VSS; 跟power switch 的输出VDDau + VSS。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018213627600.png" /></li></ul><p>根据power domain 的划分及描述，可以列一张如下的表，列出该设计所有可能的power state 及每个power state 对应supply set 的工作电压。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018213658534.png" /></p><p>1801 的power state 定义由supply set level power state 和 system level power state 两级构成。</p><ul data-mark="*"><li>supply set level power state: 用add_power_state + -supply_expr 定义每个supply set 的工作电压。虽然并不是必须要明确定义supply set 的power state, 但强烈推荐予以明确定义，保证良好的继承性及可读性，所见即所得。</li><li>system level power state: 用add_power_state + -logic_expr 定义不同supply set 间的交互。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018214039668.png" /><br />supply set level power state 的定义需要注意几点：</p><ul data-mark="*"><li>-supply_expr 中只能包含该supply set 对应的net.</li><li>在supply_expr 中可用逻辑与&quot;&amp;&amp;&quot; 表示不同supply net的状态。</li><li>-simstate 用于simulation, “normal” 对应于ON state, “corrupt” 对应于OFF state. 实现工具自动忽略该option.<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181018214205932.png" /></li></ul><p>system level power state 的定义需要注意几点：</p><ul data-mark="*"><li>add_power_state 后跟的object_name，C 跟S 的工具有所不同，对于C家的工具这个object_name 可以是已定义的任何一个power domain 的名字，如示例中的&quot;PDon&quot;；而对于S 家的工具目前还不支持用power domain 做object_name, 需要用命令 create_power_state_group 定义一个state group, 用这个state group 做object_name.</li><li>需要在每个-logic_expr 中将所有的supply set 的状态明确给出。</li><li>在system level power state 中不要指定-simstate.</li></ul><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>整理自陌上风骑驴看IC <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> UPF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SOC </tag>
            
            <tag> Low Power </tag>
            
            <tag> UPF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AHB协议学习笔记</title>
      <link href="/p/ahb-protocal.html"/>
      <url>/p/ahb-protocal.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-ahb组成部分"><a class="markdownIt-Anchor" href="#1-ahb组成部分"></a> 1. AHB组成部分</h2><ul data-mark="*"><li>AHB主设备(master)<ul data-mark="-"><li>发起一次读写操作</li><li>某一时刻只允许一个master使用总线</li></ul></li><li>AHB从设备(slave)<ul data-mark="-"><li>响应一次读写操作</li><li>通过地址映射来选择使用哪个slave</li></ul></li><li>AHB仲裁器(arbiter)<ul data-mark="-"><li>允许某一个主设备控制总线</li><li>在AMBA协议中没有定义仲裁算法</li></ul></li><li>AHB译码器(decoder)<ul data-mark="-"><li>通过地址译码来决定选择哪个slave</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="AHB总线结构图" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181128135549530.png" /></p><a id="more"></a><h2 id="2-ahb信号"><a class="markdownIt-Anchor" href="#2-ahb信号"></a> 2. AHB信号</h2><div class="table_box"><table><thead><tr><th>Name</th><th>Source</th><th>To</th><th>Desciption</th></tr></thead><tbody><tr><td><strong>HCLK</strong></td><td>clock Source</td><td>各个module</td><td>总线时钟</td></tr><tr><td><strong>HRESETn</strong></td><td>reset controller</td><td>各个module</td><td>总线复位</td></tr><tr><td><strong>HADDR[31:0]</strong></td><td>master</td><td>decoder/mux to slave/arbiter</td><td>32位系统地址总线</td></tr><tr><td><strong>HTRANS[1:0]</strong></td><td>master</td><td>mux to slave</td><td>当前传输类型: IDLE(00),BUSY(01),NONSEQ(10),SEQ(11)</td></tr><tr><td><strong>HWRITE</strong></td><td>master</td><td>mux to slave</td><td>0:读, 1:写</td></tr><tr><td><strong>HSIZE[2:0]</strong></td><td>master</td><td>mux to slave</td><td>指示当前传输的大小: 000(8bit),001(16bit),010(32bit),011(64bit)…</td></tr><tr><td><strong>HBURST[2:0]</strong></td><td>master</td><td>mux to slave/arbiter</td><td>burst类型: single,incr,wrap</td></tr><tr><td><strong>HPROT[3:0]</strong></td><td>master</td><td>mux to slave</td><td>保护机制，需要slave带有保护功能</td></tr><tr><td><strong>HWDATE[31:0]</strong></td><td>master</td><td>mux to slave</td><td>写数据总线</td></tr><tr><td><strong>HBUSREQx</strong></td><td>master</td><td>arbiter</td><td>总线接入请求</td></tr><tr><td><strong>HLOCKx</strong></td><td>master</td><td>arbiter</td><td>master requires locked access to the bus(no other master should be granted the bus until this signal is LOW)</td></tr><tr><td><strong>HRDATE[31:0]</strong></td><td>slave</td><td>mux to master/arbiter</td><td>读数据总线</td></tr><tr><td><strong>HREADY</strong></td><td>slave</td><td>mux to master/arbiter</td><td>HREADY拉高表示一次传输完成，HREADY为低电平延长传输周期</td></tr><tr><td><strong>HRESP[1:0]</strong></td><td>slave</td><td>mux to master/arbiter</td><td>传输状态: OKAY, ERROR, RETRY, SPLIT</td></tr><tr><td><strong>HSPLITx[15:0]</strong></td><td>slave</td><td>arbiter</td><td>告诉arbiter哪个master允许重新尝试一次split传输</td></tr><tr><td><strong>HSELx</strong></td><td>decoder</td><td>slave</td><td>slave片选信号</td></tr><tr><td><strong>HGRANTx</strong></td><td>arbiter</td><td>master</td><td>This signal indicates that bus master x is currently the highest priority master. A master gets access to the bus when both HREADY and HGRANTx are HIGH</td></tr><tr><td><strong>HMASTER[3:0]</strong></td><td>arbiter</td><td>具有split功能的slave</td><td>指出哪个master正在进行传输，提供进行split的信息</td></tr><tr><td><strong>HMASTLOCK</strong></td><td>arbiter</td><td>具有split功能的slave</td><td>指出当前master正在进行一次锁定传输</td></tr></tbody></table></div><h2 id="3-基本传输"><a class="markdownIt-Anchor" href="#3-基本传输"></a> 3. 基本传输</h2><p>AHB传输有两个阶段：</p><ul data-mark="*"><li>Address phase: 只有一个有效周期</li><li>Data phase: 由HBURST信号决定需要几个有效周期</li></ul><p>流水线传送：先是address phase，再是data phase。下一次address phase可以与上一次data phase在同一周期。</p><h3 id="31-无等待周期的简单传输"><a class="markdownIt-Anchor" href="#31-无等待周期的简单传输"></a> 3.1 无等待周期的简单传输</h3><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="240" width="640" viewBox="0 0 640 240" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="240"/><line x1="120" y1="0" x2="120" y2="240"/><line x1="240" y1="0" x2="240" y2="240"/><line x1="360" y1="0" x2="360" y2="240"/><line x1="480" y1="0" x2="480" y2="240"/></g></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan></tspan></text><g transform="translate(0, 0)"/></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmx-3" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xxx" transform="translate(280)"/><use xlink:href="#xxx" transform="translate(300)"/><use xlink:href="#xxx" transform="translate(320)"/><use xlink:href="#xxx" transform="translate(340)"/><use xlink:href="#xmx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>A</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>Control</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmx-3" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xxx" transform="translate(280)"/><use xlink:href="#xxx" transform="translate(300)"/><use xlink:href="#xxx" transform="translate(320)"/><use xlink:href="#xxx" transform="translate(340)"/><use xlink:href="#xmx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>Control</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-5" transform="translate(240)"/><use xlink:href="#vvv-5" transform="translate(260)"/><use xlink:href="#vvv-5" transform="translate(280)"/><use xlink:href="#vvv-5" transform="translate(300)"/><use xlink:href="#vvv-5" transform="translate(320)"/><use xlink:href="#vvv-5" transform="translate(340)"/><use xlink:href="#vmx-5" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xm1" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#1mx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/></g></g><g transform="translate(0,185)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-5" transform="translate(240)"/><use xlink:href="#vvv-5" transform="translate(260)"/><use xlink:href="#vvv-5" transform="translate(280)"/><use xlink:href="#vvv-5" transform="translate(300)"/><use xlink:href="#vvv-5" transform="translate(320)"/><use xlink:href="#vvv-5" transform="translate(340)"/><use xlink:href="#vmx-5" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text></g></g><g transform="translate(0,215)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan></tspan></text><g transform="translate(0, 0)"/></g><g><path id="gmark_A_D" d="M 126,15 126,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_B_E" d="M 246,15 246,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_C_F" d="M 366,15 366,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_A_B" d="M 126,15 246,15" style="marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"/><g transform="translate(186,15)"><rect x="-35" y="-5" width="70.16" height="10" style="fill:#FFF;"/><text text-anchor="middle" y="3" style="font-size:8px;"><tspan>Address phase</tspan></text></g><path id="gmark_B_C" d="M 246,15 366,15" style="marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"/><g transform="translate(306,15)"><rect x="-26" y="-5" width="53.52" height="10" style="fill:#FFF;"/><text text-anchor="middle" y="3" style="font-size:8px;"><tspan>Data phase</tspan></text></g></g><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/><g transform="translate(0,185)"/><g transform="translate(0,215)"/></g></g><g><g/></g></g></svg></div><h3 id="32-需要等待两个周期的简单传输"><a class="markdownIt-Anchor" href="#32-需要等待两个周期的简单传输"></a> 3.2 需要等待两个周期的简单传输</h3><p>slave通过拉低hready信号延长传输周期(协议规定最大不能超过16个周期)，<strong>注意</strong>：</p><ul data-mark="*"><li>对于写传输，master在延长周期内必须保持HWDATA数据稳定</li><li>对于读传输，slave在延长周期不需要提供有效的HRDATA</li></ul><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="240" width="880" viewBox="0 0 880 240" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="240"/><line x1="120" y1="0" x2="120" y2="240"/><line x1="240" y1="0" x2="240" y2="240"/><line x1="360" y1="0" x2="360" y2="240"/><line x1="480" y1="0" x2="480" y2="240"/><line x1="600" y1="0" x2="600" y2="240"/><line x1="720" y1="0" x2="720" y2="240"/></g></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan></tspan></text><g transform="translate(0, 0)"/></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#Pclk" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#nclk" transform="translate(540)"/><use xlink:href="#000" transform="translate(560)"/><use xlink:href="#000" transform="translate(580)"/><use xlink:href="#Pclk" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#nclk" transform="translate(660)"/><use xlink:href="#000" transform="translate(680)"/><use xlink:href="#000" transform="translate(700)"/></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmx-3" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xxx" transform="translate(280)"/><use xlink:href="#xxx" transform="translate(300)"/><use xlink:href="#xxx" transform="translate(320)"/><use xlink:href="#xxx" transform="translate(340)"/><use xlink:href="#xmx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><use xlink:href="#xmx" transform="translate(480)"/><use xlink:href="#xxx" transform="translate(500)"/><use xlink:href="#xxx" transform="translate(520)"/><use xlink:href="#xxx" transform="translate(540)"/><use xlink:href="#xxx" transform="translate(560)"/><use xlink:href="#xxx" transform="translate(580)"/><use xlink:href="#xmx" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>A</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>Control</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmx-3" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xxx" transform="translate(280)"/><use xlink:href="#xxx" transform="translate(300)"/><use xlink:href="#xxx" transform="translate(320)"/><use xlink:href="#xxx" transform="translate(340)"/><use xlink:href="#xmx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><use xlink:href="#xmx" transform="translate(480)"/><use xlink:href="#xxx" transform="translate(500)"/><use xlink:href="#xxx" transform="translate(520)"/><use xlink:href="#xxx" transform="translate(540)"/><use xlink:href="#xxx" transform="translate(560)"/><use xlink:href="#xxx" transform="translate(580)"/><use xlink:href="#xmx" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>Control</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-5" transform="translate(240)"/><use xlink:href="#vvv-5" transform="translate(260)"/><use xlink:href="#vvv-5" transform="translate(280)"/><use xlink:href="#vvv-5" transform="translate(300)"/><use xlink:href="#vvv-5" transform="translate(320)"/><use xlink:href="#vvv-5" transform="translate(340)"/><use xlink:href="#vvv-5" transform="translate(360)"/><use xlink:href="#vvv-5" transform="translate(380)"/><use xlink:href="#vvv-5" transform="translate(400)"/><use xlink:href="#vvv-5" transform="translate(420)"/><use xlink:href="#vvv-5" transform="translate(440)"/><use xlink:href="#vvv-5" transform="translate(460)"/><use xlink:href="#vvv-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmx-5" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xm0" transform="translate(240)"/><use xlink:href="#000" transform="translate(260)"/><use xlink:href="#000" transform="translate(280)"/><use xlink:href="#000" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#000" transform="translate(360)"/><use xlink:href="#000" transform="translate(380)"/><use xlink:href="#000" transform="translate(400)"/><use xlink:href="#000" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#0m1" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#111" transform="translate(540)"/><use xlink:href="#111" transform="translate(560)"/><use xlink:href="#111" transform="translate(580)"/><use xlink:href="#1mx" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/></g></g><g transform="translate(0,185)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmx" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xxx" transform="translate(280)"/><use xlink:href="#xxx" transform="translate(300)"/><use xlink:href="#xxx" transform="translate(320)"/><use xlink:href="#xxx" transform="translate(340)"/><use xlink:href="#xmx" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><use xlink:href="#xmv-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmx-5" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text></g></g><g transform="translate(0,215)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan></tspan></text><g transform="translate(0, 0)"/></g><g><path id="gmark_A_D" d="M 126,15 126,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_B_E" d="M 246,15 246,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_C_F" d="M 606,15 606,225" style="fill:none;stroke:#00F;stroke-width:1"/><path id="gmark_A_B" d="M 126,15 246,15" style="marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"/><g transform="translate(186,15)"><rect x="-35" y="-5" width="70.16" height="10" style="fill:#FFF;"/><text text-anchor="middle" y="3" style="font-size:8px;"><tspan>Address phase</tspan></text></g><path id="gmark_B_C" d="M 246,15 606,15" style="marker-end:url(#arrowhead);marker-start:url(#arrowtail);stroke:#0041c4;stroke-width:1;fill:none"/><g transform="translate(426,15)"><rect x="-26" y="-5" width="53.52" height="10" style="fill:#FFF;"/><text text-anchor="middle" y="3" style="font-size:8px;"><tspan>Data phase</tspan></text></g></g><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/><g transform="translate(0,185)"/><g transform="translate(0,215)"/></g></g><g><g/></g></g></svg></div><h3 id="33-pipeline传输"><a class="markdownIt-Anchor" href="#33-pipeline传输"></a> 3.3 Pipeline传输</h3><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="180" width="1000" viewBox="0 0 1000 180" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="180"/><line x1="120" y1="0" x2="120" y2="180"/><line x1="240" y1="0" x2="240" y2="180"/><line x1="360" y1="0" x2="360" y2="180"/><line x1="480" y1="0" x2="480" y2="180"/><line x1="600" y1="0" x2="600" y2="180"/><line x1="720" y1="0" x2="720" y2="180"/><line x1="840" y1="0" x2="840" y2="180"/></g></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#Pclk" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#nclk" transform="translate(540)"/><use xlink:href="#000" transform="translate(560)"/><use xlink:href="#000" transform="translate(580)"/><use xlink:href="#Pclk" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#nclk" transform="translate(660)"/><use xlink:href="#000" transform="translate(680)"/><use xlink:href="#000" transform="translate(700)"/><use xlink:href="#Pclk" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#nclk" transform="translate(780)"/><use xlink:href="#000" transform="translate(800)"/><use xlink:href="#000" transform="translate(820)"/></g></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmv-3-4" transform="translate(240)"/><use xlink:href="#vvv-4" transform="translate(260)"/><use xlink:href="#vvv-4" transform="translate(280)"/><use xlink:href="#vvv-4" transform="translate(300)"/><use xlink:href="#vvv-4" transform="translate(320)"/><use xlink:href="#vvv-4" transform="translate(340)"/><use xlink:href="#vmv-4-5" transform="translate(360)"/><use xlink:href="#vvv-5" transform="translate(380)"/><use xlink:href="#vvv-5" transform="translate(400)"/><use xlink:href="#vvv-5" transform="translate(420)"/><use xlink:href="#vvv-5" transform="translate(440)"/><use xlink:href="#vvv-5" transform="translate(460)"/><use xlink:href="#vvv-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmx-5" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>A</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>B</tspan></text><text x="486" y="15" text-anchor="middle" xml:space="preserve"><tspan>C</tspan></text></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>Control</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmv-3-4" transform="translate(240)"/><use xlink:href="#vvv-4" transform="translate(260)"/><use xlink:href="#vvv-4" transform="translate(280)"/><use xlink:href="#vvv-4" transform="translate(300)"/><use xlink:href="#vvv-4" transform="translate(320)"/><use xlink:href="#vvv-4" transform="translate(340)"/><use xlink:href="#vmv-4-5" transform="translate(360)"/><use xlink:href="#vvv-5" transform="translate(380)"/><use xlink:href="#vvv-5" transform="translate(400)"/><use xlink:href="#vvv-5" transform="translate(420)"/><use xlink:href="#vvv-5" transform="translate(440)"/><use xlink:href="#vvv-5" transform="translate(460)"/><use xlink:href="#vvv-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmx-5" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>Control(A)</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Control(B)</tspan></text><text x="486" y="15" text-anchor="middle" xml:space="preserve"><tspan>Control(C)</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-4" transform="translate(360)"/><use xlink:href="#vvv-4" transform="translate(380)"/><use xlink:href="#vvv-4" transform="translate(400)"/><use xlink:href="#vvv-4" transform="translate(420)"/><use xlink:href="#vvv-4" transform="translate(440)"/><use xlink:href="#vvv-4" transform="translate(460)"/><use xlink:href="#vvv-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-5" transform="translate(600)"/><use xlink:href="#vvv-5" transform="translate(620)"/><use xlink:href="#vvv-5" transform="translate(640)"/><use xlink:href="#vvv-5" transform="translate(660)"/><use xlink:href="#vvv-5" transform="translate(680)"/><use xlink:href="#vvv-5" transform="translate(700)"/><use xlink:href="#vmx-5" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text><text x="486" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(B)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(C)</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xm1" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#111" transform="translate(200)"/><use xlink:href="#111" transform="translate(220)"/><use xlink:href="#111" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#1m0" transform="translate(360)"/><use xlink:href="#000" transform="translate(380)"/><use xlink:href="#000" transform="translate(400)"/><use xlink:href="#000" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#0m1" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#111" transform="translate(540)"/><use xlink:href="#111" transform="translate(560)"/><use xlink:href="#111" transform="translate(580)"/><use xlink:href="#111" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#111" transform="translate(660)"/><use xlink:href="#111" transform="translate(680)"/><use xlink:href="#111" transform="translate(700)"/><use xlink:href="#1mx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmx-3" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><use xlink:href="#xxx" transform="translate(400)"/><use xlink:href="#xxx" transform="translate(420)"/><use xlink:href="#xxx" transform="translate(440)"/><use xlink:href="#xxx" transform="translate(460)"/><use xlink:href="#xmv-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-5" transform="translate(600)"/><use xlink:href="#vvv-5" transform="translate(620)"/><use xlink:href="#vvv-5" transform="translate(640)"/><use xlink:href="#vvv-5" transform="translate(660)"/><use xlink:href="#vvv-5" transform="translate(680)"/><use xlink:href="#vvv-5" transform="translate(700)"/><use xlink:href="#vmx-5" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(A)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(B)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(C)</tspan></text></g></g><g/><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/></g></g><g><g/></g></g></svg></div><h2 id="4-burst传输"><a class="markdownIt-Anchor" href="#4-burst传输"></a> 4. burst传输</h2><h3 id="41-传输类型"><a class="markdownIt-Anchor" href="#41-传输类型"></a> 4.1 传输类型</h3><div class="table_box"><table><thead><tr><th>HTRANS[1:0]</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>00</td><td>IDLE</td><td>master占用总线，但没有进行传输</td></tr><tr><td>01</td><td>BUSY</td><td>master占用总线，但在burst传输过程中还没有准备好下一次传输，地址和控制信息必须反映下一次传输</td></tr><tr><td>10</td><td>NONSEQ</td><td>表明一次单个数据的传输或者一次burst传输的第一个数据，地址和控制信号与上一次传输无关</td></tr><tr><td>11</td><td>SEQ</td><td>表明burst传输接下来的数据，<strong>地址和上一次传输的地址是相关的，控制信息与上一次传输是相同的</strong></td></tr></tbody></table></div><h3 id="42-burst类型"><a class="markdownIt-Anchor" href="#42-burst类型"></a> 4.2 burst类型</h3><div class="table_box"><table><thead><tr><th>HBURST[2:0]</th><th>Type</th><th>Desciption</th></tr></thead><tbody><tr><td>000</td><td>SINGLE</td><td>单次传输</td></tr><tr><td>001</td><td>INCR</td><td>未定义长度incrementing传输</td></tr><tr><td>010</td><td>WRAP4</td><td>4-beat wraping burst</td></tr><tr><td>011</td><td>INCR4</td><td>4-beat incrementing burst</td></tr><tr><td>100</td><td>WRAP8</td><td>8-beat wraping burst</td></tr><tr><td>101</td><td>INCR8</td><td>8-beat incrementing burst</td></tr><tr><td>110</td><td>WRAP16</td><td>16-beat wraping burst</td></tr><tr><td>111</td><td>INCR16</td><td>16-beat incrementing burst</td></tr></tbody></table></div><h3 id="43-未定义长度incr传输"><a class="markdownIt-Anchor" href="#43-未定义长度incr传输"></a> 4.3 未定义长度INCR传输</h3><ul data-mark="*"><li>INCR传输HADDR累加值与HSIZE有关，每次加2<sup>HSIZE</sup></li><li>Burst传输不能跨越1K边界，即到达1K边界需要用NONSEQ发起一次新的传输</li></ul><div class="hint info"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" stroke="none" class="icon-7f6730be--text-3f89f380"><g><path d="M12.2 8.98c.06-.01.12-.03.18-.06.06-.02.12-.05.18-.09l.15-.12c.18-.19.29-.45.29-.71 0-.06-.01-.13-.02-.19a.603.603 0 0 0-.06-.19.757.757 0 0 0-.09-.18c-.03-.05-.08-.1-.12-.15-.28-.27-.72-.37-1.09-.21-.13.05-.23.12-.33.21-.04.05-.09.1-.12.15-.04.06-.07.12-.09.18-.03.06-.05.12-.06.19-.01.06-.02.13-.02.19 0 .26.11.52.29.71.1.09.2.16.33.21.12.05.25.08.38.08.06 0 .13-.01.2-.02M13 16v-4a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0M12 3c-4.962 0-9 4.038-9 9 0 4.963 4.038 9 9 9 4.963 0 9-4.037 9-9 0-4.962-4.037-9-9-9m0 20C5.935 23 1 18.065 1 12S5.935 1 12 1c6.066 0 11 4.935 11 11s-4.934 11-11 11" fill-rule="evenodd"></path></g></svg></span><span class="hint-content"><p><strong>❓思考：为什么burst传输不能跨越1K边界？</strong><br />ARM的回答：The 1KB restriction you refer to is not a restriction on maximum slave size but a constraint within AHB that says that a burst must not cross a 1KB boundary. The limit is designed to prevent bursts crossing from one device to another and to give a reasonable trade-off between burst size and efficiency. In practise, this means that a master must ALWAYS break a burst that would otherwise cross the 1KB boundary and restart it with a non-sequential transfer.</p></span></div><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="286" width="1120" viewBox="0 0 1120 286" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="240"/><line x1="120" y1="0" x2="120" y2="240"/><line x1="240" y1="0" x2="240" y2="240"/><line x1="360" y1="0" x2="360" y2="240"/><line x1="480" y1="0" x2="480" y2="240"/><line x1="600" y1="0" x2="600" y2="240"/><line x1="720" y1="0" x2="720" y2="240"/><line x1="840" y1="0" x2="840" y2="240"/><line x1="960" y1="0" x2="960" y2="240"/></g><text x="480" y="265" fill="#000" text-anchor="middle" xml:space="preserve"><tspan class="h4">图4.3.1 未定义长度INCR传输</tspan></text></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#Pclk" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#nclk" transform="translate(540)"/><use xlink:href="#000" transform="translate(560)"/><use xlink:href="#000" transform="translate(580)"/><use xlink:href="#Pclk" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#nclk" transform="translate(660)"/><use xlink:href="#000" transform="translate(680)"/><use xlink:href="#000" transform="translate(700)"/><use xlink:href="#Pclk" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#nclk" transform="translate(780)"/><use xlink:href="#000" transform="translate(800)"/><use xlink:href="#000" transform="translate(820)"/><use xlink:href="#Pclk" transform="translate(840)"/><use xlink:href="#111" transform="translate(860)"/><use xlink:href="#111" transform="translate(880)"/><use xlink:href="#nclk" transform="translate(900)"/><use xlink:href="#000" transform="translate(920)"/><use xlink:href="#000" transform="translate(940)"/></g></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HTRANS[1:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmv-3-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-4" transform="translate(360)"/><use xlink:href="#vvv-4" transform="translate(380)"/><use xlink:href="#vvv-4" transform="translate(400)"/><use xlink:href="#vvv-4" transform="translate(420)"/><use xlink:href="#vvv-4" transform="translate(440)"/><use xlink:href="#vvv-4" transform="translate(460)"/><use xlink:href="#vmv-4-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmx-4" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><use xlink:href="#xmx" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>NONSEQ</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>NONSEQ</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vmv-3-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-4" transform="translate(360)"/><use xlink:href="#vvv-4" transform="translate(380)"/><use xlink:href="#vvv-4" transform="translate(400)"/><use xlink:href="#vvv-4" transform="translate(420)"/><use xlink:href="#vvv-4" transform="translate(440)"/><use xlink:href="#vvv-4" transform="translate(460)"/><use xlink:href="#vmv-4-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmx-4" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><use xlink:href="#xmx" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x20</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x22</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x5C</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x60</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x64</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HBURST[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vvv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-4" transform="translate(360)"/><use xlink:href="#vvv-4" transform="translate(380)"/><use xlink:href="#vvv-4" transform="translate(400)"/><use xlink:href="#vvv-4" transform="translate(420)"/><use xlink:href="#vvv-4" transform="translate(440)"/><use xlink:href="#vvv-4" transform="translate(460)"/><use xlink:href="#vvv-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vvv-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmx-4" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><use xlink:href="#xmx" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="246" y="15" text-anchor="middle" xml:space="preserve"><tspan>INCR</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>INCR</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HSIZE[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-3" transform="translate(120)"/><use xlink:href="#vvv-3" transform="translate(140)"/><use xlink:href="#vvv-3" transform="translate(160)"/><use xlink:href="#vvv-3" transform="translate(180)"/><use xlink:href="#vvv-3" transform="translate(200)"/><use xlink:href="#vvv-3" transform="translate(220)"/><use xlink:href="#vvv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-4" transform="translate(360)"/><use xlink:href="#vvv-4" transform="translate(380)"/><use xlink:href="#vvv-4" transform="translate(400)"/><use xlink:href="#vvv-4" transform="translate(420)"/><use xlink:href="#vvv-4" transform="translate(440)"/><use xlink:href="#vvv-4" transform="translate(460)"/><use xlink:href="#vvv-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vvv-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmx-4" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><use xlink:href="#xmx" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="246" y="15" text-anchor="middle" xml:space="preserve"><tspan>001</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>010</tspan></text></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-3" transform="translate(360)"/><use xlink:href="#vvv-3" transform="translate(380)"/><use xlink:href="#vvv-3" transform="translate(400)"/><use xlink:href="#vvv-3" transform="translate(420)"/><use xlink:href="#vvv-3" transform="translate(440)"/><use xlink:href="#vvv-3" transform="translate(460)"/><use xlink:href="#vmv-3-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmv-4-4" transform="translate(720)"/><use xlink:href="#vvv-4" transform="translate(740)"/><use xlink:href="#vvv-4" transform="translate(760)"/><use xlink:href="#vvv-4" transform="translate(780)"/><use xlink:href="#vvv-4" transform="translate(800)"/><use xlink:href="#vvv-4" transform="translate(820)"/><use xlink:href="#vmx-4" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x20)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x22)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x5C)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x60)</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x64)</tspan></text></g></g><g transform="translate(0,185)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xm1" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#111" transform="translate(200)"/><use xlink:href="#111" transform="translate(220)"/><use xlink:href="#111" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#111" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#111" transform="translate(420)"/><use xlink:href="#111" transform="translate(440)"/><use xlink:href="#111" transform="translate(460)"/><use xlink:href="#111" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#111" transform="translate(540)"/><use xlink:href="#111" transform="translate(560)"/><use xlink:href="#111" transform="translate(580)"/><use xlink:href="#111" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#111" transform="translate(660)"/><use xlink:href="#111" transform="translate(680)"/><use xlink:href="#111" transform="translate(700)"/><use xlink:href="#111" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#111" transform="translate(780)"/><use xlink:href="#111" transform="translate(800)"/><use xlink:href="#111" transform="translate(820)"/><use xlink:href="#1mx" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/></g></g><g transform="translate(0,215)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-3" transform="translate(240)"/><use xlink:href="#vvv-3" transform="translate(260)"/><use xlink:href="#vvv-3" transform="translate(280)"/><use xlink:href="#vvv-3" transform="translate(300)"/><use xlink:href="#vvv-3" transform="translate(320)"/><use xlink:href="#vvv-3" transform="translate(340)"/><use xlink:href="#vmv-3-3" transform="translate(360)"/><use xlink:href="#vvv-3" transform="translate(380)"/><use xlink:href="#vvv-3" transform="translate(400)"/><use xlink:href="#vvv-3" transform="translate(420)"/><use xlink:href="#vvv-3" transform="translate(440)"/><use xlink:href="#vvv-3" transform="translate(460)"/><use xlink:href="#vmv-3-4" transform="translate(480)"/><use xlink:href="#vvv-4" transform="translate(500)"/><use xlink:href="#vvv-4" transform="translate(520)"/><use xlink:href="#vvv-4" transform="translate(540)"/><use xlink:href="#vvv-4" transform="translate(560)"/><use xlink:href="#vvv-4" transform="translate(580)"/><use xlink:href="#vmv-4-4" transform="translate(600)"/><use xlink:href="#vvv-4" transform="translate(620)"/><use xlink:href="#vvv-4" transform="translate(640)"/><use xlink:href="#vvv-4" transform="translate(660)"/><use xlink:href="#vvv-4" transform="translate(680)"/><use xlink:href="#vvv-4" transform="translate(700)"/><use xlink:href="#vmv-4-4" transform="translate(720)"/><use xlink:href="#vvv-4" transform="translate(740)"/><use xlink:href="#vvv-4" transform="translate(760)"/><use xlink:href="#vvv-4" transform="translate(780)"/><use xlink:href="#vvv-4" transform="translate(800)"/><use xlink:href="#vvv-4" transform="translate(820)"/><use xlink:href="#vmx-4" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x20)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x22)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x5C)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x60)</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x64)</tspan></text></g></g><g/><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/><g transform="translate(0,185)"/><g transform="translate(0,215)"/></g></g><g><g/></g></g></svg></div><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="286" width="1240" viewBox="0 0 1240 286" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="240"/><line x1="120" y1="0" x2="120" y2="240"/><line x1="240" y1="0" x2="240" y2="240"/><line x1="360" y1="0" x2="360" y2="240"/><line x1="480" y1="0" x2="480" y2="240"/><line x1="600" y1="0" x2="600" y2="240"/><line x1="720" y1="0" x2="720" y2="240"/><line x1="840" y1="0" x2="840" y2="240"/><line x1="960" y1="0" x2="960" y2="240"/><line x1="1080" y1="0" x2="1080" y2="240"/></g><text x="540" y="265" fill="#000" text-anchor="middle" xml:space="preserve"><tspan class="h4">图4.3.2 未定义长度INCR跨1K边界</tspan></text></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#Pclk" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#nclk" transform="translate(540)"/><use xlink:href="#000" transform="translate(560)"/><use xlink:href="#000" transform="translate(580)"/><use xlink:href="#Pclk" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#nclk" transform="translate(660)"/><use xlink:href="#000" transform="translate(680)"/><use xlink:href="#000" transform="translate(700)"/><use xlink:href="#Pclk" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#nclk" transform="translate(780)"/><use xlink:href="#000" transform="translate(800)"/><use xlink:href="#000" transform="translate(820)"/><use xlink:href="#Pclk" transform="translate(840)"/><use xlink:href="#111" transform="translate(860)"/><use xlink:href="#111" transform="translate(880)"/><use xlink:href="#nclk" transform="translate(900)"/><use xlink:href="#000" transform="translate(920)"/><use xlink:href="#000" transform="translate(940)"/><use xlink:href="#Pclk" transform="translate(960)"/><use xlink:href="#111" transform="translate(980)"/><use xlink:href="#111" transform="translate(1000)"/><use xlink:href="#nclk" transform="translate(1020)"/><use xlink:href="#000" transform="translate(1040)"/><use xlink:href="#000" transform="translate(1060)"/></g></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HTRANS[1:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-5" transform="translate(120)"/><use xlink:href="#vvv-5" transform="translate(140)"/><use xlink:href="#vvv-5" transform="translate(160)"/><use xlink:href="#vvv-5" transform="translate(180)"/><use xlink:href="#vvv-5" transform="translate(200)"/><use xlink:href="#vvv-5" transform="translate(220)"/><use xlink:href="#vmv-5-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmv-5-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vmv-2-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmx-2" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><use xlink:href="#xmx" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>NONSEQ</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>NONSEQ</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-5" transform="translate(120)"/><use xlink:href="#vvv-5" transform="translate(140)"/><use xlink:href="#vvv-5" transform="translate(160)"/><use xlink:href="#vvv-5" transform="translate(180)"/><use xlink:href="#vvv-5" transform="translate(200)"/><use xlink:href="#vvv-5" transform="translate(220)"/><use xlink:href="#vmv-5-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-5" transform="translate(480)"/><use xlink:href="#vvv-5" transform="translate(500)"/><use xlink:href="#vvv-5" transform="translate(520)"/><use xlink:href="#vvv-5" transform="translate(540)"/><use xlink:href="#vvv-5" transform="translate(560)"/><use xlink:href="#vvv-5" transform="translate(580)"/><use xlink:href="#vmv-5-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vmv-2-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmx-2" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><use xlink:href="#xmx" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x3F4</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x3F8</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x3FC</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x400</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x404</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x408</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HBURST[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vvv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vvv-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vvv-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vvv-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vvv-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmx-2" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><use xlink:href="#xmx" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="486" y="15" text-anchor="middle" xml:space="preserve"><tspan>INCR</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HSIZE[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vvv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vvv-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vvv-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vvv-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vvv-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmx-2" transform="translate(840)"/><use xlink:href="#xxx" transform="translate(860)"/><use xlink:href="#xxx" transform="translate(880)"/><use xlink:href="#xxx" transform="translate(900)"/><use xlink:href="#xxx" transform="translate(920)"/><use xlink:href="#xxx" transform="translate(940)"/><use xlink:href="#xmx" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="486" y="15" text-anchor="middle" xml:space="preserve"><tspan>010</tspan></text></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-5" transform="translate(240)"/><use xlink:href="#vvv-5" transform="translate(260)"/><use xlink:href="#vvv-5" transform="translate(280)"/><use xlink:href="#vvv-5" transform="translate(300)"/><use xlink:href="#vvv-5" transform="translate(320)"/><use xlink:href="#vvv-5" transform="translate(340)"/><use xlink:href="#vmv-5-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmv-2-5" transform="translate(600)"/><use xlink:href="#vvv-5" transform="translate(620)"/><use xlink:href="#vvv-5" transform="translate(640)"/><use xlink:href="#vvv-5" transform="translate(660)"/><use xlink:href="#vvv-5" transform="translate(680)"/><use xlink:href="#vvv-5" transform="translate(700)"/><use xlink:href="#vmv-5-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmv-2-2" transform="translate(840)"/><use xlink:href="#vvv-2" transform="translate(860)"/><use xlink:href="#vvv-2" transform="translate(880)"/><use xlink:href="#vvv-2" transform="translate(900)"/><use xlink:href="#vvv-2" transform="translate(920)"/><use xlink:href="#vvv-2" transform="translate(940)"/><use xlink:href="#vmx-2" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3F4)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3F8)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3FC)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x400)</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x404)</tspan></text><text x="906" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x408)</tspan></text></g></g><g transform="translate(0,185)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xm1" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#111" transform="translate(200)"/><use xlink:href="#111" transform="translate(220)"/><use xlink:href="#111" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#111" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#111" transform="translate(420)"/><use xlink:href="#111" transform="translate(440)"/><use xlink:href="#111" transform="translate(460)"/><use xlink:href="#111" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#111" transform="translate(540)"/><use xlink:href="#111" transform="translate(560)"/><use xlink:href="#111" transform="translate(580)"/><use xlink:href="#111" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#111" transform="translate(660)"/><use xlink:href="#111" transform="translate(680)"/><use xlink:href="#111" transform="translate(700)"/><use xlink:href="#111" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#111" transform="translate(780)"/><use xlink:href="#111" transform="translate(800)"/><use xlink:href="#111" transform="translate(820)"/><use xlink:href="#111" transform="translate(840)"/><use xlink:href="#111" transform="translate(860)"/><use xlink:href="#111" transform="translate(880)"/><use xlink:href="#111" transform="translate(900)"/><use xlink:href="#111" transform="translate(920)"/><use xlink:href="#111" transform="translate(940)"/><use xlink:href="#1mx" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/></g></g><g transform="translate(0,215)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-5" transform="translate(240)"/><use xlink:href="#vvv-5" transform="translate(260)"/><use xlink:href="#vvv-5" transform="translate(280)"/><use xlink:href="#vvv-5" transform="translate(300)"/><use xlink:href="#vvv-5" transform="translate(320)"/><use xlink:href="#vvv-5" transform="translate(340)"/><use xlink:href="#vmv-5-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmv-2-5" transform="translate(600)"/><use xlink:href="#vvv-5" transform="translate(620)"/><use xlink:href="#vvv-5" transform="translate(640)"/><use xlink:href="#vvv-5" transform="translate(660)"/><use xlink:href="#vvv-5" transform="translate(680)"/><use xlink:href="#vvv-5" transform="translate(700)"/><use xlink:href="#vmv-5-2" transform="translate(720)"/><use xlink:href="#vvv-2" transform="translate(740)"/><use xlink:href="#vvv-2" transform="translate(760)"/><use xlink:href="#vvv-2" transform="translate(780)"/><use xlink:href="#vvv-2" transform="translate(800)"/><use xlink:href="#vvv-2" transform="translate(820)"/><use xlink:href="#vmv-2-2" transform="translate(840)"/><use xlink:href="#vvv-2" transform="translate(860)"/><use xlink:href="#vvv-2" transform="translate(880)"/><use xlink:href="#vvv-2" transform="translate(900)"/><use xlink:href="#vvv-2" transform="translate(920)"/><use xlink:href="#vvv-2" transform="translate(940)"/><use xlink:href="#vmx-2" transform="translate(960)"/><use xlink:href="#xxx" transform="translate(980)"/><use xlink:href="#xxx" transform="translate(1000)"/><use xlink:href="#xxx" transform="translate(1020)"/><use xlink:href="#xxx" transform="translate(1040)"/><use xlink:href="#xxx" transform="translate(1060)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3F4)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3F8)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x3FC)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x400)</tspan></text><text x="786" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x404)</tspan></text><text x="906" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x408)</tspan></text></g></g><g/><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/><g transform="translate(0,185)"/><g transform="translate(0,215)"/></g></g><g><g/></g></g></svg></div><h3 id="44-wrap传输"><a class="markdownIt-Anchor" href="#44-wrap传输"></a> 4.4 WRAP传输</h3><div class="hint info"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" stroke="none" class="icon-7f6730be--text-3f89f380"><g><path d="M12.2 8.98c.06-.01.12-.03.18-.06.06-.02.12-.05.18-.09l.15-.12c.18-.19.29-.45.29-.71 0-.06-.01-.13-.02-.19a.603.603 0 0 0-.06-.19.757.757 0 0 0-.09-.18c-.03-.05-.08-.1-.12-.15-.28-.27-.72-.37-1.09-.21-.13.05-.23.12-.33.21-.04.05-.09.1-.12.15-.04.06-.07.12-.09.18-.03.06-.05.12-.06.19-.01.06-.02.13-.02.19 0 .26.11.52.29.71.1.09.2.16.33.21.12.05.25.08.38.08.06 0 .13-.01.2-.02M13 16v-4a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0M12 3c-4.962 0-9 4.038-9 9 0 4.963 4.038 9 9 9 4.963 0 9-4.037 9-9 0-4.962-4.037-9-9-9m0 20C5.935 23 1 18.065 1 12S5.935 1 12 1c6.066 0 11 4.935 11 11s-4.934 11-11 11" fill-rule="evenodd"></path></g></svg></span><span class="hint-content"><p><strong>❓思考：如何确定WRAP边界？</strong><br />wrap的边界与HSIZE和HBURST都有关系，对于WRAP4来说，HADDR[HSIZE+1:HSIZE]==2’b11就是边界；对于WRAP8来说，HADDR[HSIZE+2:HSIZE]==2’b111就是边界，同理适用于WRAP16。<br /><strong>假如</strong>：HSIZE=3’b010时，HADDR起始地址为0x48<br /><strong>当HBURST为WRAP4时</strong>，HADDR依次为0x48 -&gt; 0x4C -&gt; 0x40 -&gt; 0x44(对应的HADDR[3:2]依次为2’b10 -&gt; 2’b11 -&gt; 2’b00 -&gt; 2’b01)<br /><strong>当HBURST为WRAP8时</strong>，HADDR依次为0x48 -&gt; 0x4C -&gt; 0x50 -&gt; 0x54 -&gt; 0x58 -&gt; 0x5C -&gt; 0x40 -&gt; 0x44(对应的HADDR[4:2]依次为3’b010 -&gt; 3’b011 -&gt; 3’b100 -&gt; 3’b101 -&gt; 3’b110 -&gt; 3’b111 -&gt; 3’b000 -&gt; 3’b001)</p></span></div><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="286" width="1000" viewBox="0 0 1000 286" overflow="hidden"><g><g transform="translate(140.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="240"/><line x1="120" y1="0" x2="120" y2="240"/><line x1="240" y1="0" x2="240" y2="240"/><line x1="360" y1="0" x2="360" y2="240"/><line x1="480" y1="0" x2="480" y2="240"/><line x1="600" y1="0" x2="600" y2="240"/><line x1="720" y1="0" x2="720" y2="240"/><line x1="840" y1="0" x2="840" y2="240"/></g><text x="420" y="265" fill="#000" text-anchor="middle" xml:space="preserve"><tspan class="h4">图4.4.1 WRAP4传输</tspan></text></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HCLK</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#000" transform="translate(80)"/><use xlink:href="#000" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#000" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#000" transform="translate(320)"/><use xlink:href="#000" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#nclk" transform="translate(420)"/><use xlink:href="#000" transform="translate(440)"/><use xlink:href="#000" transform="translate(460)"/><use xlink:href="#Pclk" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#nclk" transform="translate(540)"/><use xlink:href="#000" transform="translate(560)"/><use xlink:href="#000" transform="translate(580)"/><use xlink:href="#Pclk" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#nclk" transform="translate(660)"/><use xlink:href="#000" transform="translate(680)"/><use xlink:href="#000" transform="translate(700)"/><use xlink:href="#Pclk" transform="translate(720)"/><use xlink:href="#111" transform="translate(740)"/><use xlink:href="#111" transform="translate(760)"/><use xlink:href="#nclk" transform="translate(780)"/><use xlink:href="#000" transform="translate(800)"/><use xlink:href="#000" transform="translate(820)"/></g></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HTRANS[1:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vmv-2-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmx-2" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>NONSEQ</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>SEQ</tspan></text></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HADDR[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vmv-2-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmx-2" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x48</tspan></text><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x4C</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x40</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>0x44</tspan></text></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HBURST[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vvv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vvv-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vvv-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmx-2" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="366" y="15" text-anchor="middle" xml:space="preserve"><tspan>WRAP4</tspan></text></g></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HSIZE[2:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmv-2" transform="translate(120)"/><use xlink:href="#vvv-2" transform="translate(140)"/><use xlink:href="#vvv-2" transform="translate(160)"/><use xlink:href="#vvv-2" transform="translate(180)"/><use xlink:href="#vvv-2" transform="translate(200)"/><use xlink:href="#vvv-2" transform="translate(220)"/><use xlink:href="#vvv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vvv-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vvv-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmx-2" transform="translate(600)"/><use xlink:href="#xxx" transform="translate(620)"/><use xlink:href="#xxx" transform="translate(640)"/><use xlink:href="#xxx" transform="translate(660)"/><use xlink:href="#xxx" transform="translate(680)"/><use xlink:href="#xxx" transform="translate(700)"/><use xlink:href="#xmx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="366" y="15" text-anchor="middle" xml:space="preserve"><tspan>010</tspan></text></g></g><g transform="translate(0,155)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HWDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmv-2-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vmx-2" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x48)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x4C)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x40)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x44)</tspan></text></g></g><g transform="translate(0,185)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HREADY</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xm1" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#111" transform="translate(200)"/><use xlink:href="#111" transform="translate(220)"/><use xlink:href="#111" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#111" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#111" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/><use xlink:href="#111" transform="translate(400)"/><use xlink:href="#111" transform="translate(420)"/><use xlink:href="#111" transform="translate(440)"/><use xlink:href="#111" transform="translate(460)"/><use xlink:href="#111" transform="translate(480)"/><use xlink:href="#111" transform="translate(500)"/><use xlink:href="#111" transform="translate(520)"/><use xlink:href="#111" transform="translate(540)"/><use xlink:href="#111" transform="translate(560)"/><use xlink:href="#111" transform="translate(580)"/><use xlink:href="#111" transform="translate(600)"/><use xlink:href="#111" transform="translate(620)"/><use xlink:href="#111" transform="translate(640)"/><use xlink:href="#111" transform="translate(660)"/><use xlink:href="#111" transform="translate(680)"/><use xlink:href="#111" transform="translate(700)"/><use xlink:href="#1mx" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/></g></g><g transform="translate(0,215)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>HRDATA[31:0]</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xxx" transform="translate(80)"/><use xlink:href="#xxx" transform="translate(100)"/><use xlink:href="#xmx" transform="translate(120)"/><use xlink:href="#xxx" transform="translate(140)"/><use xlink:href="#xxx" transform="translate(160)"/><use xlink:href="#xxx" transform="translate(180)"/><use xlink:href="#xxx" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xmv-2" transform="translate(240)"/><use xlink:href="#vvv-2" transform="translate(260)"/><use xlink:href="#vvv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmv-2-2" transform="translate(360)"/><use xlink:href="#vvv-2" transform="translate(380)"/><use xlink:href="#vvv-2" transform="translate(400)"/><use xlink:href="#vvv-2" transform="translate(420)"/><use xlink:href="#vvv-2" transform="translate(440)"/><use xlink:href="#vvv-2" transform="translate(460)"/><use xlink:href="#vmv-2-2" transform="translate(480)"/><use xlink:href="#vvv-2" transform="translate(500)"/><use xlink:href="#vvv-2" transform="translate(520)"/><use xlink:href="#vvv-2" transform="translate(540)"/><use xlink:href="#vvv-2" transform="translate(560)"/><use xlink:href="#vvv-2" transform="translate(580)"/><use xlink:href="#vmv-2-2" transform="translate(600)"/><use xlink:href="#vvv-2" transform="translate(620)"/><use xlink:href="#vvv-2" transform="translate(640)"/><use xlink:href="#vvv-2" transform="translate(660)"/><use xlink:href="#vvv-2" transform="translate(680)"/><use xlink:href="#vvv-2" transform="translate(700)"/><use xlink:href="#vmx-2" transform="translate(720)"/><use xlink:href="#xxx" transform="translate(740)"/><use xlink:href="#xxx" transform="translate(760)"/><use xlink:href="#xxx" transform="translate(780)"/><use xlink:href="#xxx" transform="translate(800)"/><use xlink:href="#xxx" transform="translate(820)"/><text x="306" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x48)</tspan></text><text x="426" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x4C)</tspan></text><text x="546" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x40)</tspan></text><text x="666" y="15" text-anchor="middle" xml:space="preserve"><tspan>Data(0x44)</tspan></text></g></g><g/><g><g transform="translate(0,5)"/><g transform="translate(0,35)"/><g transform="translate(0,65)"/><g transform="translate(0,95)"/><g transform="translate(0,125)"/><g transform="translate(0,155)"/><g transform="translate(0,185)"/><g transform="translate(0,215)"/></g></g><g><g/></g></g></svg></div><h2 id="5-总结"><a class="markdownIt-Anchor" href="#5-总结"></a> 5. 总结</h2><ul data-mark="*"><li>slave短时间内无法响应：将HREADY拉低</li><li>slave长时间无法响应：插入SPIT/RETRY</li><li>master不能传输，插入BUSY</li><li>总线上如果只有一个master，可以使用AHB lite协议，即没有arbiter，不支持retry和split响应</li><li>AHB中hready的含义<ul data-mark="-"><li>对于slave来说,进来的hready_i代表的是bus上的状态低就表示bus被人(可能是他自己)使用着,hready_o代表它自身的状态,低代表它要占用bus</li><li>对于arbiter来说,从slave进来的hready_i代表各个slave占用bus的状态,返回给slave的hready是所有的hready_i做and运算之后的结果,同时这个也返回给master</li><li>对于master来说,hready_i拉低代表bus忙,不能使用</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> SOC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AMBA </tag>
            
            <tag> SOC </tag>
            
            <tag> AHB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>testbench如何force vhdl内部信号</title>
      <link href="/p/nc-force-usage.html"/>
      <url>/p/nc-force-usage.html</url>
      
        <content type="html"><![CDATA[<h2 id="force-verilog内部信号"><a class="markdownIt-Anchor" href="#force-verilog内部信号"></a> force verilog内部信号</h2><p>force verilog内部信号为某个值，可以这样写：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token comment">//verilog internal signal access</span>  <span class="token keyword">force</span> xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx <span class="token operator">=</span> <span class="token number">16'hfffd</span><span class="token punctuation">;</span>  <span class="token number">#500</span> <span class="token keyword">release</span> xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">;</span><span class="token keyword">end</span></pre></div><h2 id="force-vhdl内部信号"><a class="markdownIt-Anchor" href="#force-vhdl内部信号"></a> force vhdl内部信号</h2><p>而对于vhdl内部信号，使用force是错误的，vhdl语言不允许这样做。但是EDA工具一般都会提供函数，例如cadence的ncsim，可以使用<code>$nc_force</code>和<code>nc_release</code>访问vhdl内部信号。</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog" ><span class="token keyword">initial</span> <span class="token keyword">begin</span> <span class="token comment">//vhdl internal signal access</span>  <span class="token property">$nc_force</span><span class="token punctuation">(</span><span class="token string">"xxx.xxx.xxx"</span><span class="token punctuation">,</span> <span class="token string">"X'FFFD'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token number">#500</span> <span class="token property">$nc_release</span><span class="token punctuation">(</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span></pre></div><a id="more"></a><h2 id="cadence工具debug小技巧"><a class="markdownIt-Anchor" href="#cadence工具debug小技巧"></a> cadence工具debug小技巧</h2><p>使用cadence工具编译出错，看不懂error解释时，可以使用<code>nchelp</code>获取更详细的解释或解决办法。例如编译时出现如下错误：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="irun SETNEL error" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180922183151480.png" /></p><p>可以在terminal敲入命令<code>nchelp ncsim SETNEL</code>得到详细帮助如下：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="irun SETNEL solution" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180922183435465.png" /></p>]]></content>
      
      
      <categories>
          
          <category> ASIC验证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> testbench </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>systemverilog面向对象</title>
      <link href="/p/sv-learning-chap4.html"/>
      <url>/p/sv-learning-chap4.html</url>
      
        <content type="html"><![CDATA[<ul data-mark="*"><li>类封装了数据和操作这些数据的子程序</li><li>类可以定义在program、package、module中，或者在这些块之外的任何地方。类应当在program或者module之外的package中定义，避免与其他块内变量出现冲突。</li><li><code>new()</code>创建对象、分配空间并执行构造函数</li><li>赋值为<code>null</code>释放对象空间</li><li>通过<code>static</code>来声明静态变量，是的该变量被该类的所有实例所共享，但使用范围仅限于该类</li><li>通过<code>类名::变量</code>来访问静态变量</li><li>静态变量在声明时初始化</li><li>静态方法跟静态变量类似，也通过static声明</li><li>静态方法不允许读写非静态变量</li><li>类中的方法默认是自动存储的</li><li>当使用一个变量时，会优先在当前作用域中寻找，接着在上一级作用域寻找，直到找到该变量为止。<code>this</code>可以明确指定当前作用域。</li></ul><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> ASIC验证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> systemverilog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>systemverilog接口以及搭建测试环境</title>
      <link href="/p/sv-learning-chap3.html"/>
      <url>/p/sv-learning-chap3.html</url>
      
        <content type="html"><![CDATA[<ul data-mark="*"><li>接口信号必须使用非阻塞赋值来驱动</li><li>modport将信号分组并指定方向</li><li>clocking时钟块用于控制同步信号的时序</li></ul><p>testbench注意事项：</p><ul data-mark="*"><li><code>$exit</code>用于结束程序块，<code>$finish</code>用于结束仿真</li><li>时钟产生不应该放在program程序块中，会引起信号的竞争，而应该放在module中</li><li>例化时如果端口名字和数据类型一致，例化时可以用.*(隐式端口连接)</li></ul><h2 id="dut代码"><a class="markdownIt-Anchor" href="#dut代码"></a> DUT代码</h2><p>以简单的乘法器为例写testbench</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//mul.v</span><span class="token keyword">module</span> <span class="token function">mul</span><span class="token punctuation">(</span>  <span class="token keyword">input</span>             clk<span class="token punctuation">,</span>  <span class="token keyword">input</span>             rst_n<span class="token punctuation">,</span>  <span class="token keyword">input</span>             in_vld<span class="token punctuation">,</span>  <span class="token keyword">input</span>      <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_ain<span class="token punctuation">,</span>  <span class="token keyword">input</span>      <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_bin<span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_out<span class="token punctuation">,</span>  <span class="token keyword">output</span> <span class="token keyword">reg</span>        out_vld<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>  <span class="token function">if</span><span class="token punctuation">(</span>in_vld<span class="token punctuation">)</span>    mul_out <span class="token operator">&lt;=</span> <span class="token property">$signed</span><span class="token punctuation">(</span>mul_ain<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token property">$signed</span><span class="token punctuation">(</span>mul_bin<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">,</span><span class="token keyword">negedge</span> rst_n<span class="token punctuation">)</span>  <span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rst_n<span class="token punctuation">)</span>    out_vld <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    out_vld <span class="token operator">&lt;=</span> in_vld<span class="token punctuation">;</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><a id="more"></a><h2 id="interface代码"><a class="markdownIt-Anchor" href="#interface代码"></a> interface代码</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//mul_if.sv</span><span class="token keyword">interface</span> <span class="token function">mul_if</span><span class="token punctuation">(</span><span class="token keyword">input</span> <span class="token keyword">bit</span> clk<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">logic</span>        clk<span class="token punctuation">;</span><span class="token keyword">logic</span>        rst_n<span class="token punctuation">;</span><span class="token keyword">logic</span>        in_vld<span class="token punctuation">;</span><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_ain<span class="token punctuation">;</span><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_bin<span class="token punctuation">;</span><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mul_out<span class="token punctuation">;</span><span class="token keyword">logic</span>        out_vld<span class="token punctuation">;</span><span class="token comment">//define clock block</span><span class="token keyword">clocking</span> <span class="token function">cb</span><span class="token punctuation">(</span>@<span class="token keyword">posedge</span> clk<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">output</span> in_vld<span class="token punctuation">;</span>  <span class="token keyword">output</span> mul_ain<span class="token punctuation">;</span>  <span class="token keyword">output</span> mul_bin<span class="token punctuation">;</span><span class="token keyword">endclocking</span><span class="token comment">//Driver port direction</span><span class="token keyword">modport</span> <span class="token function">DRV</span><span class="token punctuation">(</span>  <span class="token keyword">clocking</span> cb<span class="token punctuation">,</span>  <span class="token keyword">output</span> rst_n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//DUT port direction</span><span class="token keyword">modport</span> <span class="token function">DUT</span><span class="token punctuation">(</span>  <span class="token keyword">input</span> rst_n<span class="token punctuation">,</span>  <span class="token keyword">input</span> in_vld<span class="token punctuation">,</span>  <span class="token keyword">input</span> mul_ain<span class="token punctuation">,</span>  <span class="token keyword">input</span> mul_bin<span class="token punctuation">,</span>  <span class="token keyword">output</span> mul_out<span class="token punctuation">,</span>  <span class="token keyword">output</span> out_vld<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">endinterface</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="driver代码"><a class="markdownIt-Anchor" href="#driver代码"></a> Driver代码</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//driver.sv</span><span class="token keyword">program</span> <span class="token function">driver</span><span class="token punctuation">(</span>mul_if<span class="token punctuation">.</span>DRV mulif<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token comment">//reset value</span>  mulif<span class="token punctuation">.</span>rst_n <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>  mulif<span class="token punctuation">.</span>cb<span class="token punctuation">.</span>in_vld <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>  <span class="token comment">//release reset</span>  <span class="token number">#37</span> mulif<span class="token punctuation">.</span>rst_n <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>  <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>    <span class="token number">##1</span> mulif<span class="token punctuation">.</span>cb<span class="token punctuation">.</span>in_vld <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span> <span class="token comment">//drive data @(posedge clk), ##1 means delay 1 clock</span>    mulif<span class="token punctuation">.</span>cb<span class="token punctuation">.</span>mul_ain <span class="token operator">&lt;=</span> <span class="token property">$random</span><span class="token punctuation">;</span>    mulif<span class="token punctuation">.</span>cb<span class="token punctuation">.</span>mul_bin <span class="token operator">&lt;=</span> <span class="token property">$random</span><span class="token punctuation">;</span>  <span class="token keyword">end</span>  <span class="token number">##1</span> mulif<span class="token punctuation">.</span>cb<span class="token punctuation">.</span>in_vld <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>  <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> @mulif<span class="token punctuation">.</span>cb<span class="token punctuation">;</span>   <span class="token comment">//wait posedge clk</span>  <span class="token property">$finish</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">endprogram</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="tb_top代码"><a class="markdownIt-Anchor" href="#tb_top代码"></a> tb_top代码</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//tb_top.sv</span><span class="token keyword">module</span> <span class="token function">tb_top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">bit</span> clk<span class="token punctuation">;</span><span class="token important">always </span><span class="token number">#5</span> clk <span class="token operator">=</span> <span class="token operator">~</span>clk<span class="token punctuation">;</span>mul_if <span class="token function">mulif</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">;</span>driver <span class="token function">u_drv</span><span class="token punctuation">(</span>mulif<span class="token punctuation">)</span><span class="token punctuation">;</span>mul <span class="token function">u_mul</span><span class="token punctuation">(</span>  <span class="token punctuation">.</span>clk      <span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>rst_n    <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>in_vld   <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>in_vld<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>mul_ain  <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>mul_ain<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>mul_bin  <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>mul_bin<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>mul_out  <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>mul_out<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token punctuation">.</span>out_vld  <span class="token punctuation">(</span>mulif<span class="token punctuation">.</span>DUT<span class="token punctuation">.</span>out_vld<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token property">$fsdbDumpfile</span><span class="token punctuation">(</span><span class="token string">"wave.fsdb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">$fsdbDumpvars</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="仿真波形"><a class="markdownIt-Anchor" href="#仿真波形"></a> 仿真波形</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="systemverilog interface实例仿真图" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20181009184548641.png" /></p>]]></content>
      
      
      <categories>
          
          <category> ASIC验证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> systemverilog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>systemverilog任务、函数、program</title>
      <link href="/p/sv-learning-chap2.html"/>
      <url>/p/sv-learning-chap2.html</url>
      
        <content type="html"><![CDATA[<ul data-mark="*"><li>缺省情况下参数的类型是与其前一个参数相同的，而第一个参数的缺省类型是logic单bit输入</li><li>参数的传递方式可以使用ref指定为引用，通常用于数组引用；当不希望子程序改变数组值时，可以使用const ref类型</li><li>ref参数只能被用于带自动存储(automatic)的子程序中，即使用ref参数时子程序必须指明automatic属性</li><li>自动存储相对的是静态存储，当多个地方调用静态存储子程序时，不同的线程之间会窜用这些局部变量，而自动存储能够迫使仿真器使用堆栈存储局部变量</li><li>函数使用return返回一个值，调用时可以使用void忽略返回值，例如<code>void'($fscanf(file,&quot;%d&quot;,i));</code></li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> <span class="token function">test_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//************************************</span><span class="token comment">// operator = "+", return a.sum</span><span class="token comment">// operator = "x", return a.product</span><span class="token comment">//************************************</span><span class="token keyword">function</span> <span class="token keyword">automatic</span> <span class="token keyword">int</span> <span class="token function">alu</span><span class="token punctuation">(</span>    <span class="token keyword">const</span> <span class="token keyword">ref</span> <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>           <span class="token comment">//数组引用,const不能改变数组</span>    <span class="token keyword">input</span> <span class="token keyword">string</span> operator <span class="token operator">=</span> <span class="token string">"+"</span>  <span class="token comment">//指定default值</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> result<span class="token punctuation">;</span><span class="token function">if</span><span class="token punctuation">(</span>operator<span class="token operator">==</span><span class="token string">"x"</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>  result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token function">for</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    result <span class="token operator">*=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">else</span> <span class="token keyword">begin</span>  result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">for</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    result <span class="token operator">+=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token keyword">endfunction</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  arr <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  arr <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">}</span><span class="token punctuation">;</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token function">alu</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//15, use default operator</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token function">alu</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//120</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><a id="more"></a><h2 id="program"><a class="markdownIt-Anchor" href="#program"></a> program</h2><p><strong>program与module相同点</strong></p><ul data-mark="*"><li>和module相同，program也可以定义0个或多个输入、输出、双向端口。</li><li>一个program块内部可以包含0个或多个initial块、generate块、specparam语句、连续赋值语句、并发断言、timeunit声明。</li><li>在program块中数据类型、数据声明、函数和任务的定义均与module块类似。</li><li>一个设计中可以包含多个program块，这些program块既可以通过端口交互，也可以相互独立，这一点与module块也是相似的。</li></ul><p><strong>program与module不同点</strong></p><ul data-mark="*"><li>一个program块不能包含任何always块，用户自定义原语(UDP)，module块、接口(interface)、program块</li><li>module中可以定义program块</li><li>一个program块可以调用其他module块或者program块中定义的函数或任务，但是一个module块却不能调用其他program块中定义的任务或函数。</li><li>program块中变量只能用阻塞赋值，不能使用非阻塞赋值</li></ul>]]></content>
      
      
      <categories>
          
          <category> ASIC验证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> systemverilog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>systemverilog基础</title>
      <link href="/p/sv-learning-chap1.html"/>
      <url>/p/sv-learning-chap1.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-内建数据类型"><a class="markdownIt-Anchor" href="#1-内建数据类型"></a> 1. 内建数据类型</h2><p>四状态：reg, wire, logic, integer, time(默认值为X)<br />双状态：bit, int, byte, shortint, longint, real(默认值为0)<br />有符号数：int, byte, shortint, longint, integer(可以使用unsigned申明为无符号数)</p><p>🔖 <strong><code>$isunknown</code>操作符:</strong><br />作用：使用<code>$isunknown</code>操作符，可以在表达式的任意位出现X或Z时返回1</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//test_isunknown.sv</span><span class="token keyword">module</span> <span class="token function">test_isunknown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">logic</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> din<span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  din <span class="token operator">=</span> <span class="token number">4'b1001</span><span class="token punctuation">;</span>  <span class="token comment">//Unknown not found!</span>  din <span class="token operator">=</span> <span class="token number">4'b1x01</span><span class="token punctuation">;</span>  <span class="token comment">//Unknown is detected!</span>  din <span class="token operator">=</span> <span class="token number">4'b1z01</span><span class="token punctuation">;</span>  <span class="token comment">//Unknown is detected!</span>  <span class="token function">if</span><span class="token punctuation">(</span><span class="token property">$isunknown</span><span class="token punctuation">(</span>din<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"Unknown is detected!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>    <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"Unknown not found!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><a id="more"></a><h2 id="2-数组"><a class="markdownIt-Anchor" href="#2-数组"></a> 2. 数组</h2><h3 id="21-数组初始化-比较-复制-循环"><a class="markdownIt-Anchor" href="#21-数组初始化-比较-复制-循环"></a> 2.1 数组初始化、比较、 复制、循环</h3><p>循环使用for或foreach</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token comment">//test_array.sv</span><span class="token keyword">module</span> <span class="token function">test_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// array initial</span><span class="token keyword">int</span> mem1<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> mem2<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">4</span><span class="token operator">{</span><span class="token number">8</span><span class="token operator">}}</span><span class="token punctuation">;</span>    <span class="token comment">//'{8,8,8,8}</span><span class="token comment">//int mem3[5] = '{9,8,default:1};  //'{9,8,1,1,1} my eda tool does not support</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span>  '<span class="token operator">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">}</span><span class="token punctuation">,</span>  '<span class="token operator">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">}</span><span class="token punctuation">,</span>  '<span class="token operator">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">}</span><span class="token punctuation">,</span>  '<span class="token operator">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token operator">}</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token comment">//array compare</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"mem1 %s mem2"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>mem1<span class="token operator">==</span>mem2<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"=="</span> <span class="token punctuation">:</span> <span class="token string">"!="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//mem1 != mem2</span>  <span class="token comment">//array copy</span>  mem2 <span class="token operator">=</span> mem1<span class="token punctuation">;</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"mem1 %s mem2"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>mem1<span class="token operator">==</span>mem2<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"=="</span> <span class="token punctuation">:</span> <span class="token string">"!="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//mem1 == mem2</span>  <span class="token comment">//array loop</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token operator">{</span><span class="token number">20</span><span class="token operator">{</span><span class="token string">"="</span><span class="token operator">}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//seperate line</span>  <span class="token function">foreach</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"arr[%0d][%0d] = %0d"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token operator">{</span><span class="token number">20</span><span class="token operator">{</span><span class="token string">"="</span><span class="token operator">}}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//seperate line</span>  <span class="token function">foreach</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>    <span class="token function">foreach</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token function">if</span><span class="token punctuation">(</span>j<span class="token operator">>=</span>i<span class="token punctuation">)</span>        <span class="token property">$write</span><span class="token punctuation">(</span><span class="token string">"%3d"</span><span class="token punctuation">,</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">else</span>        <span class="token property">$write</span><span class="token punctuation">(</span><span class="token string">"%3s"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">$display</span><span class="token punctuation">;</span>  <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p>运行结果如下：<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="systemverilog数组操作" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180930165253739.png" /></p><h3 id="22-动态数组"><a class="markdownIt-Anchor" href="#22-动态数组"></a> 2.2 动态数组</h3><ul data-mark="*"><li>分配空间<code>new[]</code></li><li>分配空间并复制<code>new[](arr)</code></li><li>释放空间<code>arr.delete()</code></li><li>当数组(动态或定宽)复制给一个动态数组时，会调用构造函数new[]分配空间并复制数据</li><li><code>$size(arr)</code>返回数组宽度</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> <span class="token function">dyn_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// declare and initial</span><span class="token keyword">int</span> dyn<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token comment">//分配空间</span>  dyn <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">foreach</span><span class="token punctuation">(</span>dyn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    dyn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token comment">//'{1,2,3,4,5}</span>  <span class="token comment">//分配空间并复制</span>  dyn <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">(</span>dyn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//'{1,2,3,4,5,0,0,0,0,0}</span>  dyn <span class="token operator">=</span> arr<span class="token punctuation">;</span> <span class="token comment">//'{9,7,8}</span>  <span class="token comment">//重新分配空间，旧值不复存在</span>  dyn <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//'{0,0,0}</span>  <span class="token comment">//释放空间</span>  dyn<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token property">$size</span><span class="token punctuation">(</span>dyn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//0</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h3 id="23-队列"><a class="markdownIt-Anchor" href="#23-队列"></a> 2.3 队列</h3><ul data-mark="*"><li>声明q[$]</li><li>$表示队列索引的最大值或最小值，[$:2]代表[0:2]，[1: ​$]代表[1: ​$size(q)-1]，<strong>不是所有仿真器都支持$表示最小值</strong></li><li><code>q.insert(idx,value)</code>, 在idx之前插入元素或者队列，<strong>不是所有仿真器都支持插入队列</strong></li><li><code>q.delete(idx)</code>, 删除第idx个元素</li><li><code>q.push_front(value)</code>, 在队列前面插入元素，等价于q={value,q}</li><li><code>q.push_back(value)</code>, 在队列末尾插入元素，等价于q={q,value}</li><li><code>q.pop_front</code>, 从队列前面移出元素，等价于j=q[0]; q=q[1: $]</li><li><code>q.pop_back</code>, 从队列末尾移出元素，等价于j=q[$]; q=q[0: $-1]</li><li><code>q.delete()</code>, 清空队列，等价于q={}</li><li>可以把定宽或动态数组复制给队列</li><li>队列遍历也可以使用for和foreach</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// declare and initial</span><span class="token keyword">int</span> q<span class="token punctuation">[</span>$<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> q1<span class="token punctuation">[</span>$<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  q<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{0,1,2,5}</span>  <span class="token comment">//q.insert(3,q1);  //{0,1,2,3,4,5}, my eda tool does not support insert queue</span>  q <span class="token operator">=</span> <span class="token operator">{</span>q<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>q1<span class="token punctuation">,</span>q<span class="token punctuation">[</span>$<span class="token punctuation">]</span><span class="token operator">}</span><span class="token punctuation">;</span> <span class="token comment">//{0,1,2,3,4,5}, use concat instead of insert function</span>  q<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{0,2,3,4,5}</span>  q<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{6,0,2,3,4,5}</span>  q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{6,0,2,3,4,5,8}</span>  j <span class="token operator">=</span> q<span class="token punctuation">.</span>pop_front<span class="token punctuation">;</span> <span class="token comment">//{0,2,3,4,5,8}, j=6</span>  j <span class="token operator">=</span> q<span class="token punctuation">.</span>pop_back<span class="token punctuation">;</span>  <span class="token comment">//{0,2,3,4,5}, j=8</span>  q <span class="token operator">=</span> arr<span class="token punctuation">;</span> <span class="token comment">//{9,8,7,6}, copy array to queue</span>  q<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//empty queue</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"%0d"</span><span class="token punctuation">,</span> <span class="token property">$size</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h3 id="24-数组常用方法"><a class="markdownIt-Anchor" href="#24-数组常用方法"></a> 2.4 数组常用方法</h3><ul data-mark="*"><li><code>arr.sum</code>, 返回数组所有元素和</li><li><code>arr.product</code>, 返回数组所有元素积</li><li><code>arr.and</code>, 返回数组所有元素的与</li><li><code>arr.or</code>, 返回数组所有元素的或</li><li><code>arr.xor</code>, 返回数组所有元素的异或</li><li><code>arr.min()</code>, 返回数组中的最小值队列(<strong>注意：返回的是队列，而不是标量</strong>)</li><li><code>arr.max()</code>, 返回数组中的最大值队列(<strong>注意：返回的是队列，而不是标量</strong>)</li><li><code>arr.unique()</code>, 返回数组中具有唯一值的队列</li><li><code>arr.find with (condition)</code>, 返回满足条件元素的队列</li><li><code>arr.find_index with (condition)</code>, 返回满足条件元素下标的队列</li><li><code>arr.find_first with (condition)</code>, 返回满足条件第一个元素的队列</li><li><code>arr.find_first_index with (condition)</code>, 返回满足条件第一个元素下标的队列</li><li><code>arr.find_last with (condition)</code>, 返回满足条件第最后一个元素的队列</li><li><code>arr.find_last_index with (condition)</code>, 返回满足条件最后一个元素下标的队列</li><li><code>arr.reverse()</code>, 数组反向</li><li><code>arr.sort()</code>, 数组从小到大排序</li><li><code>arr.rsort()</code>, 数组从大到小排序</li><li><code>arr.shuffle()</code>, 数组打乱顺序</li><li>其中<code>reverse</code>和<code>shuffle</code>方法不能带with条件语句，它们的作用范围是整个数组</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> '<span class="token operator">{</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> q<span class="token punctuation">[</span>$<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  <span class="token comment">//reduce operator(return value)</span>  <span class="token property">$display</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//52</span>  <span class="token property">$display</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1368576</span>  <span class="token property">$display</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token keyword">and</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//0</span>  <span class="token property">$display</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token keyword">or</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//15</span>  <span class="token property">$display</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token keyword">xor</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//8</span>  <span class="token comment">//min,max,unique(return queue)</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//{1}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//{11}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{9,1,8,6,3,4,11}</span>  <span class="token comment">//find operator(return queue)</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span>find <span class="token keyword">with</span> <span class="token punctuation">(</span>item<span class="token operator">></span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{9,8,6,4,6,11,4}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">find_index</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token punctuation">(</span>x<span class="token operator">></span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{0,2,3,5,6,7,8}, with的默认变量为item，也可以改为其他的</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span>find_first <span class="token keyword">with</span> <span class="token punctuation">(</span>item<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{1}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span>find_first_index <span class="token keyword">with</span> <span class="token punctuation">(</span>item<span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{3}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span>find_last <span class="token keyword">with</span> <span class="token punctuation">(</span>item<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{3}</span>  q <span class="token operator">=</span> arr<span class="token punctuation">.</span>find_last_index <span class="token keyword">with</span> <span class="token punctuation">(</span>item<span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{6}</span>  <span class="token comment">//sort operator(array changed)</span>  arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{4,11,6,4,3,6,8,1,9}</span>  arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//{1,3,4,4,6,6,8,9,11}</span>  arr<span class="token punctuation">.</span><span class="token function">rsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//{11,9,8,6,6,4,4,3,1}</span>  arr<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{9,6,3,4,4,11,6,1,8}, 不同仿真器洗牌的结果是否一致？</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="3-字符串"><a class="markdownIt-Anchor" href="#3-字符串"></a> 3. 字符串</h2><ul data-mark="*"><li><code>s.getc(N)</code>, 返回位置N上的字节</li><li><code>s.tolower()</code>, 返回所有字符小写字符串</li><li><code>s.toupper()</code>, 返回所有字符大写字符串</li><li><code>s.putc(N,C)</code>, 将字节C写到字符串的N位，N必须在0~len-1之间</li><li><code>s.substr(start,end)</code>, 返回从start到end之间所有字符</li><li><code>s.len()</code>, 返回字符串长度</li><li><code>$psprintf()</code>, 返回一个格式化的临时字符串，可以直接传递给其他子函数</li></ul><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-verilog line-numbers" ><span class="token keyword">module</span> <span class="token function">test_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">string</span> s<span class="token punctuation">;</span><span class="token keyword">initial</span> <span class="token keyword">begin</span>  s <span class="token operator">=</span> <span class="token string">"IEeE "</span><span class="token punctuation">;</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">getc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//I</span>  <span class="token property">$display</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">tolower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//ieee</span>  s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toupper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//IEEE</span>  s<span class="token punctuation">.</span><span class="token function">putc</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//IEEE-</span>  s <span class="token operator">=</span> <span class="token operator">{</span>s<span class="token punctuation">,</span> <span class="token string">"P1800"</span><span class="token operator">}</span><span class="token punctuation">;</span>  <span class="token comment">//IEEE-P1800</span>  <span class="token property">$display</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//EE-P</span>  <span class="token property">$display</span><span class="token punctuation">(</span><span class="token property">$psprintf</span><span class="token punctuation">(</span><span class="token string">"%s %0d"</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//IEEE-P1800 42</span><span class="token keyword">end</span><span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>]]></content>
      
      
      <categories>
          
          <category> ASIC验证 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> systemverilog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASIC设计经典笔试题收录</title>
      <link href="/p/asic-design-example.html"/>
      <url>/p/asic-design-example.html</url>
      
        <content type="html"><![CDATA[<h2 id="时序优化题"><a class="markdownIt-Anchor" href="#时序优化题"></a> 时序优化题</h2><p><font color="red">问</font>：CLK-&gt;Q的时间为0.5ns，组合逻辑cm0、cm1延时均为7ns，在不增加流水线数目(pipeline stage)的前提下，怎么修改电路，才能让CLK达到100MHZ？(提示：C宽为2bit)<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="时序优化前" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180923141559401.png" /></p><a id="more"></a><p><font color="blue">答</font>：放置4个cm1，分别用定值00、01、10、11作为输入，在D前放置4-to-1 Mux，将cm0输出作为选择信号，目的是将cm1的7ns替换为Mux Cell的延时。(逻辑复制，面积换时间)<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="时序优化后" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180923142133179.png" /></p>]]></content>
      
      
      <categories>
          
          <category> ASIC设计 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASIC </tag>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EDA工具使用</title>
      <link href="/p/eda-irun.html"/>
      <url>/p/eda-irun.html</url>
      
        <content type="html"><![CDATA[<h2 id="cadence-irun命令"><a class="markdownIt-Anchor" href="#cadence-irun命令"></a> cadence irun命令</h2><h3 id="常用编译"><a class="markdownIt-Anchor" href="#常用编译"></a> 常用编译</h3><p><code>irun +access+wr -smartorder -clean -ntcnotchks -V93 -vtimescale 1ns/1ps -work chip_lib -f xxx.vc -top tb_top -64</code></p><h3 id="coverage选项"><a class="markdownIt-Anchor" href="#coverage选项"></a> coverage选项</h3><p><code>-covtest xxx -coverage all -covoverwrite -covfile covfile.ccf -covworkdir ./cov_work</code><br />其中<em>covfile.ccf</em>定义coverage内容</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-tcl" >set_expr_scoring <span class="token operator">-</span>allset_fsm_scoring <span class="token operator">-</span>hold_tansitionset_libcell_scoringset_implicit_block_scoring <span class="token operator">-</span>offset_covergroup <span class="token operator">-</span>per_instance_default_oneselect_coverage <span class="token operator">-</span>all <span class="token operator">-</span>instance tb_top.xxx<span class="token operator">*</span>...</pre></div><a id="more"></a><h2 id="synopsys-verdi"><a class="markdownIt-Anchor" href="#synopsys-verdi"></a> Synopsys Verdi</h2><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-shell" >vhdlcom -v93 -sup_sem_error -smartorder -work chip_lib -f vhdl.flistvericom -sv +systemverilogext+sv +v95ext+v95 +verilog2001ext+v -ignorekwd_config -work chip_lib -f verilog.flistverdi -lib chip_lib -top xxx -ssf xxx.fsdb</pre></div><h2 id="cadence-imc命令"><a class="markdownIt-Anchor" href="#cadence-imc命令"></a> cadence imc命令</h2><p>coverage merge:<br /><code>imc -exec cov_merge.tcl</code></p><p>其中cov_merge.tcl如下：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-tcl" >merge <span class="token operator">-</span>runfile runfile <span class="token operator">-</span>metrics code:fsm:block:expression:toggle:assertion:covergroup <span class="token operator">-</span>out merge_data <span class="token operator">-</span>overwrite <span class="token operator">-</span>message 1 <span class="token operator">-</span>initial_model union_all<span class="token keyword">load</span> <span class="token operator">-</span>run merge_datareport <span class="token operator">-</span>detail <span class="token operator">-</span>html <span class="token operator">-</span>showempty on <span class="token operator">-</span>overwrite <span class="token operator">-</span>grading covered <span class="token operator">-</span>source on <span class="token operator">-</span>out nc_cov_report</pre></div><p>其中runfile列出需要merge的coverage路径</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language- line-numbers" >./cov_work/scope/case1./cov_work/scope/case2./cov_work/scope/case3*NaN</div>]]></content>
      
      
      <categories>
          
          <category> eda_tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eda_tools </tag>
            
            <tag> ASIC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux小技巧</title>
      <link href="/p/linux-tips.html"/>
      <url>/p/linux-tips.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-一行执行多条命令"><a class="markdownIt-Anchor" href="#1-一行执行多条命令"></a> 1. 一行执行多条命令</h2><ul data-mark="*"><li>分号 ： 顺序地独立执行各条命令， 彼此之间不关心是否失败， 所有命令都会执行。</li><li>&amp;&amp;   ： 顺序执行各条命令， 只有当前一个执行成功时候， 才执行后面的。</li><li>||   ： 顺序执行各条命令， 只有当前面一个执行失败的时候， 才执行后面的。</li></ul><h2 id="2-搜索已经使用的命令-ctrlr"><a class="markdownIt-Anchor" href="#2-搜索已经使用的命令-ctrlr"></a> 2. 搜索已经使用的命令 <code>ctrl+r</code></h2><p>先按<code>ctrl+r</code>，然后输入要搜索的字符串即可。<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="ctrl+r search_term" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180921181616347.png" /></p><a id="more"></a><h2 id="3-读压缩后的文件"><a class="markdownIt-Anchor" href="#3-读压缩后的文件"></a> 3. 读压缩后的文件</h2><p>读log文件常用的命令有<code>cat</code>、<code>less</code>、<code>tail</code>、<code>grep</code>等，但如果文件被压缩了，这些命令读出来的就是乱码，我们可以使用<code>zcat</code>、<code>zless</code>、<code>zgrep</code>等命令读取压缩的文本文件。</p><h2 id="4-获取上次命令的last-item"><a class="markdownIt-Anchor" href="#4-获取上次命令的last-item"></a> 4. 获取上次命令的last item(<code>!$</code>)</h2><p>可以使用<code>!$</code>获取上次命令的选项<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="Linux获取上次命令的选项" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180921182911635.png" /></p><h2 id="5-获取上次命令"><a class="markdownIt-Anchor" href="#5-获取上次命令"></a> 5. 获取上次命令(<code>!!</code>)</h2><p>可以使用<code>!!</code>获取上次命令<br /><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="Linux获取上次命令" data-echo="https://cdn.jsdelivr.net/gh/dxsm/note@latest/assets/markdown-img-paste-20180921183156161.png" /></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>孩子教养推荐书籍</title>
      <link href="/p/education-book.html"/>
      <url>/p/education-book.html</url>
      
        <content type="html"><![CDATA[<ol><li><p>父母效能训练手册<br />9.1 (583人评价)<br />作者: 戈登<br />出版社: 天津社会科学院出版社<br />出版年: 2009-6-1<br />评语：即P.E.T，经典的亲子沟通图书。系统解决亲子沟通协商的难题。</p></li><li><p>正面管教<br />8.8 (1607人评价)<br />作者: [美] 简·尼尔森 (Jane Nelsen)<br />出版社: 京华出版社<br />出版年: 2009-1<br />评语：挺精彩。以阿德勒理论为基础</p></li></ol><a id="more"></a><ol start="3"><li><p>培养高情商的孩子<br />8.5 (243人评价)<br />作者: 约翰 戈特曼<br />出版社: 浙江人民出版社<br />出版年: 2014-2-1<br />评语：戈特曼的经典作品。原书英文名可译为：教养之道——培养高情商的孩子</p></li><li><p>无条件养育<br />8.6 (408人评价)<br />作者: 艾尔菲·科恩<br />出版社: 天津教育出版社<br />出版年: 2012-6<br />评语：很精彩，以自我决定论为理论基础。注重在育儿中培养孩子的内在动机。我认为这本书代表了教养未来的发展方向。不过操作性略有不足。本书译文读起来不够流畅，引用心理学实验较多，家长阅读可能稍有困难。</p></li><li><p>看见成长的自己<br />8.0 (613人评价)<br />作者: 卡罗尔·徳韦克<br />出版社: 中信出版社<br />出版年: 2011-6<br />评语：虽然这本书只有一章谈育儿。但德维克介绍了一种非常重要的成长型思维模式growth mindset。对成人和儿童发展都极具指导性。为什么要鼓励不要表扬，儿童做事遇挫时家长该如何鼓励？如何培养孩子的抗挫力和坚韧性（grit）？在本书都能获得很大启发。</p></li><li><p>加州大学伯克利分校的10堂幸福教养课<br />8.8 (13人评价)<br />作者: 克莉斯汀·卡特<br />出版社: 中国青年出版社<br />出版年: 2012-1<br />评语：国外著名高校的积极教养幸福课。将积极心理学应用于教养中</p></li><li><p>如何培养孩子的社会能力<br />8.1 (180人评价)<br />作者: 默娜·R.舒尔<br />出版社: 京华<br />出版年: 2009-8<br />评语：“我能解决同伴间的冲突” i can problem solve.适用于3-7岁。“解决同伴间的问题和解决数学题一样重要”。</p></li><li><p>全脑教养法<br />8.5 (310人评价)<br />作者: 丹尼尔·西格尔<br />出版社: 浙江人民出版社<br />出版年: 2013-4<br />评语：非常好读，简明清晰却不失深刻的脑科学与教养读本</p></li><li><p>游戏力<br />8.6 (735人评价)<br />作者: Lawrence J. Cohen, Ph.D.<br />出版社: 军事谊文出版社<br />出版年: 2011-5-1<br />评语：游戏疗法在教养中的应用，弥补了一般教养过于“正儿八经”的“缺憾”。</p></li><li><p>第56号教室的奇迹<br />8.6 (1430人评价)<br />作者: 雷夫•艾斯奎斯（Rafe Espuith）<br />出版社: 中国城市出版社<br />出版年: 2009<br />评语：全美最佳老师的分享，充满教育智慧。适用于小学年龄。</p></li><li><p>如何说孩子才会听，怎么听孩子才肯说<br />8.9 (2392人评价)<br />作者: [美]阿黛尔•法伯 伊莱恩•玛兹丽施<br />出版社: 中央编译出版社<br />出版年: 2007-11<br />评语：网上交口赞誉，很好读的亲子沟通读本。</p></li><li><p>如何说孩子才肯学<br />8.5 (264人评价)<br />作者: 阿黛尔·法伯 / 伊莱恩·玛兹丽施<br />出版社: 中央编译出版社<br />出版年: 2008.4<br />评语：与“如何说孩子才会听”同一作者</p></li><li><p>如何说孩子才能和平相处<br />8.9 (48人评价)<br />作者: [美] 阿黛尔·法伯 / [美] 伊莱恩·玛兹丽施 著 / [美] 肯伯利·安·蔻 插图<br />出版社: 中国商业出版社<br />出版年: 2010-1<br />评语：如何应对兄弟姐妹间和同伴冲突</p></li><li><p>如何说青少年才会听，怎么听青少年才肯说<br />8.3 (18人评价)<br />作者: 阿黛尔•法伯 / 伊莱恩•玛兹丽施<br />出版社: 高等教育出版社<br />出版年: 2008-11<br />评语：如何与青少年沟通</p></li><li><p>幸福的婚姻<br />8.5 (490人评价)<br />作者: [美] 约翰·戈特曼 / [美] 娜恩·西尔弗<br />出版社: 浙江人民出版社<br />出版年: 2014-2<br />评语：家庭和睦是教养的后院。后院起火，什么教养理念和方法都谈不上了。本书着力于如何改善夫妻关系，改善家庭生态，为戈特曼名作。自然，夫妻间的相处之道也是孩子人际学习的模版。</p></li><li><p>从出生到3岁<br />8.6 (404人评价)<br />作者: [美]伯顿·L·怀特（(Burton L.White）<br />出版社: 京华出版社<br />出版年: 2007-2<br />评语：陈忻博士推荐。经典图书，她推荐为0-3岁的首选</p></li><li><p>孩子，把你的手给我<br />8.8 (1290人评价)<br />作者: [美] 海姆·G.吉诺特<br />出版社: 京华出版社<br />出版年: 2004-9<br />评语：吉诺特著作。吉诺特作为先行者和倡导者，他的洞察，给很多后来者以很深的启发。</p></li><li><p>成为优秀父母的十大法则<br />8.0 (10人评价)<br />作者: 劳伦斯·斯坦伯格<br />出版社: 北京大学出版社<br />出版年: 2006-4<br />评语：通用法则类，非常好。作者曾任美国青少年心理协会会长，专注于青少年心理。</p></li><li><p>孩子，你的情绪我在乎<br />8.3 (27人评价)<br />作者: 约翰•戈特曼<br />出版社: 沈阳出版社<br />出版年: 2011-10<br />评语：这本书是韩国人写的，用的是戈特曼的理论。应该说情境很东亚，写的也挺好读。不过“干货”只有那么多，文字也不够简练（有点水分）。</p></li><li><p>管教有方<br />8.7 (21人评价)<br />作者: 简·尼尔森<br />出版社: 天津社科院<br />出版年: 2010-8<br />评语：为正面管教的同一作者，适合孩子为3-7岁的家长。以阿德勒理论为基础。</p></li><li><p>有话慢慢说<br />(1人评价)<br />作者: 汉恩·吉诺特<br />出版年: 2009-1<br />评语：吉诺特著作，与青少年沟通</p></li><li><p>关键教养报告<br />8.2 (69人评价)<br />作者: 波•布朗森 (Po Bronson) / 阿什利•梅里曼 (Ashley Merryman)<br />出版社: 浙江人民出版社<br />出版年: 2013-7-1<br />评语：介绍了很多当代心理学研究成果对教养的启发，很好读，不过个别章节为追求戏剧性稍有夸张。</p></li><li><p>让孩子的大脑自由<br />8.7 (439人评价)<br />作者: （美）约翰•梅迪纳<br />出版社: 浙江人民出版社<br />出版年: 2012-6<br />评语：介绍了不少新研究，有些类似《关键教养报告》</p></li><li><p>意志力<br />8.1 (2870人评价)<br />作者: [美] 罗伊·鲍迈斯特 / [美] 约翰·蒂尔尼<br />出版社: 中信出版社<br />出版年: 2012-6<br />评语：虽然并非教养读物，但关于意志力/自控力的规律是一样的。家长了解意志力，有助于提升自己和儿童的意志力。本书只有一章讲在育儿中如何提高孩子的意志力。</p></li><li><p>自控力<br />8.3 (24987人评价)<br />作者: [美] 凯利·麦格尼格尔<br />出版社: 文化发展出版社(原印刷工业出版社)<br />出版年: 2012-8<br />评语：虽然并非教养读物，但关于意志力/自控力的规律是一样的。家长了解意志力，有助于提升自己和儿童的意志力。本书没有专门章节谈在育儿中如何提高孩子的意志力。</p></li><li><p>教出乐观的孩子<br />8.3 (276人评价)<br />作者: 【美】马丁•塞利格曼<br />出版社: 万卷出版公司<br />出版年: 20100920<br />评语：如题，作者是乐观的著名研究者</p></li><li><p>安静<br />8.1 (1497人评价)<br />作者: 苏珊•凯恩<br />出版社: 中信出版社<br />出版年: 2012-9-1<br />评语：虽然并非教养读物，但有助于理解内向性格的来龙去脉。本书只有部分章节谈育儿中如何引导内向孩子</p></li><li><p>快乐交朋友<br />(1人评价)<br />作者: 米歇尔·波巴<br />出版社: 华东师大<br />出版年: 2011-5<br />评语：儿童在同伴关系遇到问题，不同情境下该怎么办。参考图书</p></li><li><p>打造儿童阅读环境<br />8.4 (87人评价)<br />作者: 艾登·钱伯斯<br />出版社: 南海出版公司<br />出版年: 2007-10<br />评语：如题，如何营造儿童良好的阅读环境+如何引导孩子爱上阅读，精彩，有指导性。</p></li><li><p>婴儿、儿童和青少年<br />9.1 (43人评价)<br />作者: [美]劳拉·E.贝克<br />出版社: 上海人民<br />出版年: 2008-11<br />评语：陈忻博士推荐，很有影响的儿童心理学教材。</p></li><li><p>故事知道怎么办<br />8.4 (233人评价)<br />作者: (澳大利亚)苏珊·佩罗<br />出版社: 天津教育出版社<br />出版年: 2011-8<br />评语：如何用故事帮助孩子成长和改变</p></li><li><p>解放父母解放孩子<br />8.9 (86人评价)<br />作者: [美] 阿黛尔•法伯和伊莱恩•玛兹丽施 著<br />出版社: 中国长安出版社<br />出版年: 2011-8</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 儿童教育 </tag>
            
            <tag> 书籍 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown参考案例</title>
      <link href="/p/markdown-ref-nc.html"/>
      <url>/p/markdown-ref-nc.html</url>
      
        <content type="html"><![CDATA[<h2 id="字符效果和横线等"><a class="markdownIt-Anchor" href="#字符效果和横线等"></a> 字符效果和横线等</h2><p><s>删除线</s><br /><em>斜体字</em>      <em>斜体字</em><br /><strong>粗体</strong>  <strong>粗体</strong><br /><em><strong>粗斜体</strong></em> <em><strong>粗斜体</strong></em><br /><mark>高亮</mark></p><p>上标：X<sub>2</sub><br />下标：O<sup>2</sup></p><p><strong>脚注</strong><br />Content  <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><a id="more"></a><p><strong>缩写(同HTML的abbr标签)</strong></p><p>The <abbr title="Hyper Text Markup Language">HTML</abbr> specification is maintained by the <abbr title="World Wide Web Consortium">W3C</abbr>.</p><h2 id="引用-blockquotes"><a class="markdownIt-Anchor" href="#引用-blockquotes"></a> 引用 Blockquotes</h2><p>引用的行内混合 Blockquotes</p><blockquote><p>引用：如果想要插入空白换行<code>即&lt;br /&gt;标签</code>，在插入处先键入两个以上的空格然后回车即可，<a href="http://localhost/" target="_blank" rel="noopener">普通链接</a>。</p><ul data-mark="*"><li>苹果</li><li>香蕉</li></ul></blockquote><h2 id="锚点与链接-links"><a class="markdownIt-Anchor" href="#锚点与链接-links"></a> 锚点与链接 Links</h2><p><a href="http://localhost/" target="_blank" rel="noopener">普通链接</a></p><p><a href="http://localhost/" target="_blank" rel="noopener" title="普通链接带标题">普通链接带标题</a></p><p>直接链接：<a href="https://github.com" target="_blank" rel="noopener">https://github.com</a></p><p><a href="http://www.this-anchor-link.com/" target="_blank" rel="noopener">锚点链接</a></p><p><a href="mailto:test.test@gmail.com">mailto:test.test@gmail.com</a></p><p>GFM a-tail link @pandao  邮箱地址自动链接 <a href="mailto:test.test@gmail.com">test.test@gmail.com</a>  <a href="mailto:www@vip.qq.com">www@vip.qq.com</a></p><h2 id="多语言代码高亮-codes"><a class="markdownIt-Anchor" href="#多语言代码高亮-codes"></a> 多语言代码高亮 Codes</h2><h3 id="行内代码-inline-code"><a class="markdownIt-Anchor" href="#行内代码-inline-code"></a> 行内代码 Inline code</h3><p>执行命令：<code>npm install marked</code></p><h3 id="缩进风格"><a class="markdownIt-Anchor" href="#缩进风格"></a> 缩进风格</h3><p>即缩进四个空格，也做为实现类似 <code>&lt;pre&gt;</code> 预格式化文本 ( Preformatted Text ) 的功能。</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre>&lt;?php    echo &quot;Hello world!&quot;;?&gt;</pre></div><p>预格式化文本：</p><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre>| First Header  | Second Header || ------------- | ------------- || Content Cell  | Content Cell  || Content Cell  | Content Cell  |</pre></div><h3 id="js代码"><a class="markdownIt-Anchor" href="#js代码"></a> JS代码</h3><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-javascript line-numbers" ><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> <span class="token function-variable function">box</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> box<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    box<span class="token punctuation">.</span>prototype <span class="token operator">=</span> box<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token punctuation">{</span>        init <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'box.init()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>add <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>remove <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"remove"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    box<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> box<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>    window<span class="token punctuation">.</span>box <span class="token operator">=</span>box<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> testBox <span class="token operator">=</span> <span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>testBox<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"jQuery"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"jQuery"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><h2 id="图片-images"><a class="markdownIt-Anchor" href="#图片-images"></a> 图片 Images</h2><p><img src="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/loading.svg" alt="" data-echo="https://cdn.jsdelivr.net/gh/dxsm/cdn/images/avatar1.jpeg" /></p><h2 id="列表-lists"><a class="markdownIt-Anchor" href="#列表-lists"></a> 列表 Lists</h2><h3 id="无序列表加号和嵌套unordered-lists-"><a class="markdownIt-Anchor" href="#无序列表加号和嵌套unordered-lists-"></a> 无序列表（加号和嵌套）Unordered Lists (+/-/*)</h3><ul data-mark="+"><li>列表1</li><li>列表2<ul data-mark="+"><li>列表二-1</li><li>列表二-2</li><li>列表二-3<ul data-mark="+"><li>level 3</li><li>list</li></ul></li></ul></li><li>列表3<ul data-mark="-"><li>列表一</li><li>列表二</li></ul></li></ul><h3 id="有序列表-ordered-lists-12"><a class="markdownIt-Anchor" href="#有序列表-ordered-lists-12"></a> 有序列表 Ordered Lists (1./2.)</h3><ol><li>第一行</li><li>第二行</li><li>第三行</li></ol><h3 id="gfm-task-list"><a class="markdownIt-Anchor" href="#gfm-task-list"></a> GFM task list</h3><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> GFM task list 1</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> GFM task list 2</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 3<ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 3-1</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 3-2</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 3-3</li></ul></li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 4<ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 4-1</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> GFM task list 4-2</li></ul></li></ul><h2 id="绘制表格-tables"><a class="markdownIt-Anchor" href="#绘制表格-tables"></a> 绘制表格 Tables</h2><div class="table_box"><table><thead><tr><th style="text-align:left">Left-Aligned</th><th style="text-align:center">Center Aligned</th><th style="text-align:right">Right Aligned</th></tr></thead><tbody><tr><td style="text-align:left">col 3 is</td><td style="text-align:center">some wordy text</td><td style="text-align:right">$1600</td></tr><tr><td style="text-align:left">col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right">$12</td></tr><tr><td style="text-align:left">zebra stripes</td><td style="text-align:center">are neat</td><td style="text-align:right">$1</td></tr></tbody></table></div><h2 id="特殊符号-html-entities-codes"><a class="markdownIt-Anchor" href="#特殊符号-html-entities-codes"></a> 特殊符号 <abbr title="Hyper Text Markup Language">HTML</abbr> Entities Codes</h2><p>© &amp;  ¨ ™ ¡ £<br />&amp; &lt; &gt; ¥ € ® ± ¶ § ¦ ¯ « ·</p><p>X² Y³ ¾ ¼  ×  ÷   »</p><p>18ºC  &quot;  '</p><h2 id="emoji表情"><a class="markdownIt-Anchor" href="#emoji表情"></a> Emoji表情 😃</h2><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 😃 😂  @mentions, ⭐️ #refs, <a href="">links</a>, <strong>formatting</strong>, and <del>tags</del> supported 💘;</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> list syntax required (any unordered or ordered list supported) ⏰;</li><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> ♥️ 💛 💝 this is a complete item 👍 👎;</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> this is an incomplete item <a href="#">test link</a> 💊 💉 @pandao 📜 📁 📂;</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> ⚙️ this is an incomplete item 🔍 🔒 ✉️ 📌 📎 📝 📆 📅 ;<ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> ⚡️ this is an incomplete item <a href="#">test link</a> 🎉 🔔 ⏳;</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 🐰 ❓ ❗️ 🔖 📚 🔥  this is  🎶 ☀️ 🍄 an incomplete item <a href="#">test link</a>;</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 🍵 🍎 🏠 🇨🇳 ▶️ ☑️ 🔗 :fa-gear: :fa-gear: ⚡️</li></ul></li></ul><h2 id="科学公式-texkatex"><a class="markdownIt-Anchor" href="#科学公式-texkatex"></a> 科学公式 TeX(KaTeX)</h2><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E=mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p>行内的公式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E=mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>行内的公式，行内的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E=mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>公式。</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>&gt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x &gt; y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msqrt><mrow><mn>3</mn><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msqrt><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\sqrt{3x-1}+(1+x)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.16443em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9144300000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">3</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.8744300000000003em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.12556999999999996em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>α</mi><msup><mo stretchy="false">)</mo><mi>θ</mi></msup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msup><mi>x</mi><mi>i</mi></msup><mo>+</mo><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sin(\alpha)^{\theta}=\sum_{i=0}^{n}(x^i + \cos(f))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.149108em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">θ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8746639999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><h2 id="拓展功能自定义div"><a class="markdownIt-Anchor" href="#拓展功能自定义div"></a> 拓展功能–自定义div</h2><h3 id="detail折叠"><a class="markdownIt-Anchor" href="#detail折叠"></a> detail折叠</h3><details><summary>Python code</summary><div class="prism-hl"><div class="code-tool"><div class="code-show" type="hide"><div class="show"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 L734.306083,294.306329 L734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 L289.779333,293.88214 L289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z" id="Combined-Shape"></path></g></svg></div><div class="hide"><svg viewBox="0 0 1024 1024" fill="none" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"><g id="小站" fill="#9daab6" stroke-width="1" fill-rule="evenodd"><path d="M1018.64495,531.297637 C1027.27952,512.687401 1023.24618,489.87879 1007.20328,475.433694 L802.095304,290.753647 C782.394782,273.015217 752.044514,274.605807 734.306083,294.306329 C716.567653,314.006852 718.158243,344.35712 737.858766,362.09555 L904.138417,511.81442 L736.858766,662.433694 C717.158243,680.172125 715.567653,710.522392 733.306083,730.222915 C751.044514,749.923438 781.394782,751.514028 801.095304,733.775598 L1006.20328,549.09555 C1011.84552,544.015251 1016.00229,537.90046 1018.64495,531.297643 Z M119.947,511.390231 L286.22665,361.671361 C305.927173,343.932931 307.517763,313.582663 289.779333,293.88214 C272.040903,274.181618 241.690635,272.591027 221.990112,290.329458 L16.8821402,475.009505 C0.839236202,489.454601 -3.19410198,512.263212 5.44046645,530.873448 C8.08312579,537.476271 12.2398959,543.591061 17.8821402,548.671361 L222.990112,733.351408 C242.690635,751.089839 273.040903,749.499248 290.779333,729.798726 C308.517763,710.098203 306.927173,679.747935 287.22665,662.009505 L119.947,511.390231 Z M649.492098,134.243566 C674.403037,143.310407 687.247217,170.85484 678.180377,195.765779 L436.030115,861.068155 C426.963275,885.979094 399.418842,898.823274 374.507902,889.756434 C349.596963,880.689593 336.752783,853.14516 345.819623,828.234221 L587.969885,162.931845 L587.969885,162.931845 C597.036725,138.020906 624.581158,125.176726 649.492098,134.243566 Z" id="Combined-Shape"></path></g></svg></div></div><div class="copy" aria-label=""><svg preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380"><g><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></g></svg></div></div><pre data_role="codeBlock" class="language-python" ><span class="token keyword">import</span> os<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span></pre></div></details><h3 id="hint块"><a class="markdownIt-Anchor" href="#hint块"></a> hint块</h3><div class="hint info"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" stroke="none" class="icon-7f6730be--text-3f89f380"><g><path d="M12.2 8.98c.06-.01.12-.03.18-.06.06-.02.12-.05.18-.09l.15-.12c.18-.19.29-.45.29-.71 0-.06-.01-.13-.02-.19a.603.603 0 0 0-.06-.19.757.757 0 0 0-.09-.18c-.03-.05-.08-.1-.12-.15-.28-.27-.72-.37-1.09-.21-.13.05-.23.12-.33.21-.04.05-.09.1-.12.15-.04.06-.07.12-.09.18-.03.06-.05.12-.06.19-.01.06-.02.13-.02.19 0 .26.11.52.29.71.1.09.2.16.33.21.12.05.25.08.38.08.06 0 .13-.01.2-.02M13 16v-4a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0M12 3c-4.962 0-9 4.038-9 9 0 4.963 4.038 9 9 9 4.963 0 9-4.037 9-9 0-4.962-4.037-9-9-9m0 20C5.935 23 1 18.065 1 12S5.935 1 12 1c6.066 0 11 4.935 11 11s-4.934 11-11 11" fill-rule="evenodd"></path></g></svg></span><span class="hint-content"><p>hello world</p></span></div><div class="hint success"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380" style="color: rgb(38, 203, 124);"><g><path d="M22 11.07V12a10 10 0 1 1-5.93-9.14"></path><polyline points="23 3 12 14 9 11"></polyline></g></svg></span><span class="hint-content"><p>hello world</p></span></div><div class="hint warning"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380" style="color: rgb(247, 125, 5);"><g><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line></g></svg></span><span class="hint-content"><p>hello world</p></span></div><div class="hint danger"><span class="hint-icon"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="icon-7f6730be--text-3f89f380" style="color: rgb(255, 70, 66);"><g><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12" y2="17"></line></g></svg></span><span class="hint-content"><p>hello world</p></span></div><h3 id="pannel块"><a class="markdownIt-Anchor" href="#pannel块"></a> pannel块</h3><div class="pannel default"><div class="pannel-head">任务列表</div><div class="pannel-body"><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 买一双运动鞋</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 背诵一篇作文</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 打一会篮球</li></ul></div></div><div class="pannel success"><div class="pannel-head">任务列表</div><div class="pannel-body"><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 买一双运动鞋</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 背诵一篇作文</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 打一会篮球</li></ul></div></div><div class="pannel info"><div class="pannel-head">任务列表</div><div class="pannel-body"><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 买一双运动鞋</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 背诵一篇作文</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 打一会篮球</li></ul></div></div><div class="pannel warning"><div class="pannel-head">任务列表</div><div class="pannel-body"><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 买一双运动鞋</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 背诵一篇作文</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 打一会篮球</li></ul></div></div><div class="pannel danger"><div class="pannel-head">任务列表</div><div class="pannel-body"><ul data-mark="-" class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> 买一双运动鞋</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 背诵一篇作文</li><li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox"> 打一会篮球</li></ul></div></div><h2 id="绘制流程图"><a class="markdownIt-Anchor" href="#绘制流程图"></a> 绘制流程图</h2><h3 id="flowchart"><a class="markdownIt-Anchor" href="#flowchart"></a> Flowchart</h3><p>流程图语法参考 <a href="https://github.com/adrai/flowchart.js" target="_blank" rel="noopener">https://github.com/adrai/flowchart.js</a></p><p>Markdown常用的元素有以下几种：</p><ul data-mark="-"><li>start</li><li>end</li><li>operation</li><li>condition</li><li>inputoutput</li><li>subroutine</li></ul><div class="flow">st=&gt;start: Start:&gt;https://dxsm.github.io[blank]e=&gt;end:&gt;https://dxsm.github.ioop1=&gt;operation: My Operationsub1=&gt;subroutine: My Subroutinecond=&gt;condition: Yesor No?:&gt;https://dxsm.github.ioio=&gt;inputoutput: catch something...para=&gt;parallel: parallel tasksst-&gt;op1-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;parapara(path1, bottom)-&gt;sub1(right)-&gt;op1para(path2, top)-&gt;op1</div><p>状态标记<br />Markdown会使用不同的颜色来标记状态，状态主要有以下几种：</p><ul data-mark="-"><li>past</li><li>current</li><li>future</li><li>approved</li><li>rejected</li><li>invalid</li></ul><div class="flow">start=&gt;start: 开始|pastrequirementAnalysis=&gt;operation: 需求分析|pastdesign=&gt;operation: 软件设计|pastcoding=&gt;operation: 编码|pastselfTestingPased=&gt;condition: 自测通过？|approveddebug=&gt;operation: debug|invalidsubmitTestingPased=&gt;condition: 提测通过？|rejectedmodifyBug=&gt;operation: 修bug|currentdeploy=&gt;operation: 部署|futureend=&gt;end: 结束|futurestart-&gt;requirementAnalysis-&gt;design-&gt;coding-&gt;selfTestingPasedselfTestingPased(no)-&gt;debug(right)-&gt;selfTestingPasedselfTestingPased(yes)-&gt;submitTestingPasedsubmitTestingPased(yes)-&gt;deploy-&gt;endsubmitTestingPased(no)-&gt;modifyBug(right)-&gt;submitTestingPased</div><h3 id="sequence-diagram"><a class="markdownIt-Anchor" href="#sequence-diagram"></a> Sequence Diagram</h3><p>语法参考 <a href="https://bramp.github.io/js-sequence-diagrams/" target="_blank" rel="noopener">https://bramp.github.io/js-sequence-diagrams/</a></p><div class="sequence">Andrew-&gt;China: Says HelloNote right of China: China thinks\nabout itChina--&gt;Andrew: How are you?Andrew-&gt;&gt;China: I am good thanks!</div><h3 id="mermaid"><a class="markdownIt-Anchor" href="#mermaid"></a> mermaid</h3><p>mermaid非常强大，基本能够替代上面两种流程图，语法参考 <a href="https://mermaid-js.github.io/mermaid/#/flowchart" target="_blank" rel="noopener">https://mermaid-js.github.io/mermaid/#/flowchart</a></p><h4 id="sequence-diagram-2"><a class="markdownIt-Anchor" href="#sequence-diagram-2"></a> sequence diagram</h4><div class="mermaid">sequenceDiagramAlice -&gt;&gt; Bob: Hello Bob, how are you?Bob--&gt;&gt;John: How about you John?Bob--x Alice: I am good thanks!Bob-x John: I am good thanks!Note right of John: Bob thinks a long&lt;br/&gt;long time, so long&lt;br/&gt;that the text does&lt;br/&gt;not fit on a row.Bob--&gt;Alice: Checking with John...Alice-&gt;John: Yes... John, how are you?</div><h4 id="flowchart-2"><a class="markdownIt-Anchor" href="#flowchart-2"></a> flowchart</h4><div class="mermaid">graph LRA[Square Rect] -- Link text --&gt; B((Circle))A --&gt; C(Round Rect)B --&gt; D{Rhombus}C --&gt; D</div><h4 id="state-diagram"><a class="markdownIt-Anchor" href="#state-diagram"></a> state diagram</h4><div class="mermaid">stateDiagram[*] --&gt; StillStill --&gt; [*]Still --&gt; MovingMoving --&gt; StillMoving --&gt; CrashCrash --&gt; [*]</div><h4 id="pie-chart"><a class="markdownIt-Anchor" href="#pie-chart"></a> pie chart</h4><div class="mermaid">pie title Pets adopted by volunteers&quot;Dogs&quot; : 386&quot;Cats&quot; : 85&quot;Rats&quot; : 15</div><h4 id="gantt"><a class="markdownIt-Anchor" href="#gantt"></a> gantt</h4><div class="mermaid">ganttdateFormat  YYYY-MM-DDtitle Adding GANTT diagram to mermaidexcludes weekdays 2014-01-10section A sectionCompleted task            :done,    des1, 2014-01-06,2014-01-08Active task               :active,  des2, 2014-01-09, 3dFuture task               :         des3, after des2, 5dFuture task2              :         des4, after des3, 5d</div><h3 id="电路时序图"><a class="markdownIt-Anchor" href="#电路时序图"></a> 电路时序图</h3><div class="wavedrom"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="150" width="480" viewBox="0 0 480 150" overflow="hidden"><g><g transform="translate(60.5, 0.5)"><g><g style="stroke:#888;stroke-width:0.5;stroke-dasharray:1,3"><line x1="0" y1="0" x2="0" y2="150"/><line x1="40" y1="0" x2="40" y2="150"/><line x1="80" y1="0" x2="80" y2="150"/><line x1="120" y1="0" x2="120" y2="150"/><line x1="160" y1="0" x2="160" y2="150"/><line x1="200" y1="0" x2="200" y2="150"/><line x1="240" y1="0" x2="240" y2="150"/><line x1="280" y1="0" x2="280" y2="150"/><line x1="320" y1="0" x2="320" y2="150"/><line x1="360" y1="0" x2="360" y2="150"/><line x1="400" y1="0" x2="400" y2="150"/></g></g><g transform="translate(0,5)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>clk</tspan></text><g transform="translate(0, 0)"><use xlink:href="#Pclk" transform="translate(0)"/><use xlink:href="#nclk" transform="translate(20)"/><use xlink:href="#Pclk" transform="translate(40)"/><use xlink:href="#nclk" transform="translate(60)"/><use xlink:href="#Pclk" transform="translate(80)"/><use xlink:href="#nclk" transform="translate(100)"/><use xlink:href="#Pclk" transform="translate(120)"/><use xlink:href="#nclk" transform="translate(140)"/><use xlink:href="#Pclk" transform="translate(160)"/><use xlink:href="#nclk" transform="translate(180)"/><use xlink:href="#Pclk" transform="translate(200)"/><use xlink:href="#nclk" transform="translate(220)"/><use xlink:href="#Pclk" transform="translate(240)"/><use xlink:href="#nclk" transform="translate(260)"/><use xlink:href="#Pclk" transform="translate(280)"/><use xlink:href="#nclk" transform="translate(300)"/><use xlink:href="#Pclk" transform="translate(320)"/><use xlink:href="#nclk" transform="translate(340)"/><use xlink:href="#Pclk" transform="translate(360)"/><use xlink:href="#nclk" transform="translate(380)"/></g></g><g transform="translate(0,35)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>dat</tspan></text><g transform="translate(0, 0)"><use xlink:href="#xxx" transform="translate(0)"/><use xlink:href="#xxx" transform="translate(20)"/><use xlink:href="#xxx" transform="translate(40)"/><use xlink:href="#xxx" transform="translate(60)"/><use xlink:href="#xmv-3" transform="translate(80)"/><use xlink:href="#vvv-3" transform="translate(100)"/><use xlink:href="#vmv-3-4" transform="translate(120)"/><use xlink:href="#vvv-4" transform="translate(140)"/><use xlink:href="#vmv-4-5" transform="translate(160)"/><use xlink:href="#vvv-5" transform="translate(180)"/><use xlink:href="#vmx-5" transform="translate(200)"/><use xlink:href="#xxx" transform="translate(220)"/><use xlink:href="#xxx" transform="translate(240)"/><use xlink:href="#xxx" transform="translate(260)"/><use xlink:href="#xmv-2" transform="translate(280)"/><use xlink:href="#vvv-2" transform="translate(300)"/><use xlink:href="#vvv-2" transform="translate(320)"/><use xlink:href="#vvv-2" transform="translate(340)"/><use xlink:href="#vmx-2" transform="translate(360)"/><use xlink:href="#xxx" transform="translate(380)"/><text x="106" y="15" text-anchor="middle" xml:space="preserve"><tspan>head</tspan></text><text x="146" y="15" text-anchor="middle" xml:space="preserve"><tspan>body</tspan></text><text x="186" y="15" text-anchor="middle" xml:space="preserve"><tspan>tail</tspan></text><text x="326" y="15" text-anchor="middle" xml:space="preserve"><tspan>data</tspan></text></g></g><g transform="translate(0,65)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>req</tspan></text><g transform="translate(0, 0)"><use xlink:href="#000" transform="translate(0)"/><use xlink:href="#000" transform="translate(20)"/><use xlink:href="#000" transform="translate(40)"/><use xlink:href="#000" transform="translate(60)"/><use xlink:href="#0m1" transform="translate(80)"/><use xlink:href="#111" transform="translate(100)"/><use xlink:href="#111" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#1m0" transform="translate(200)"/><use xlink:href="#000" transform="translate(220)"/><use xlink:href="#000" transform="translate(240)"/><use xlink:href="#000" transform="translate(260)"/><use xlink:href="#0m1" transform="translate(280)"/><use xlink:href="#111" transform="translate(300)"/><use xlink:href="#111" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#1m0" transform="translate(360)"/><use xlink:href="#000" transform="translate(380)"/></g></g><g transform="translate(0,95)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan></tspan></text><g transform="translate(0, 0)"/></g><g transform="translate(0,125)"><text x="-10" y="15" class="info" text-anchor="end" xml:space="preserve"><tspan>ack</tspan></text><g transform="translate(0, 0)"><use xlink:href="#111" transform="translate(0)"/><use xlink:href="#111" transform="translate(20)"/><use xlink:href="#111" transform="translate(40)"/><use xlink:href="#111" transform="translate(60)"/><use xlink:href="#111" transform="translate(80)"/><use xlink:href="#111" transform="translate(100)"/><use xlink:href="#111" transform="translate(120)"/><use xlink:href="#111" transform="translate(140)"/><use xlink:href="#111" transform="translate(160)"/><use xlink:href="#111" transform="translate(180)"/><use xlink:href="#111" transform="translate(200)"/><use xlink:href="#111" transform="translate(220)"/><use xlink:href="#111" transform="translate(240)"/><use xlink:href="#111" transform="translate(260)"/><use xlink:href="#1m0" transform="translate(280)"/><use xlink:href="#000" transform="translate(300)"/><use xlink:href="#0m1" transform="translate(320)"/><use xlink:href="#111" transform="translate(340)"/><use xlink:href="#111" transform="translate(360)"/><use xlink:href="#111" transform="translate(380)"/></g></g><g/><g><g transform="translate(0,5)"><use xlink:href="#gap" transform="translate(260)"/></g><g transform="translate(0,35)"><use xlink:href="#gap" transform="translate(260)"/></g><g transform="translate(0,65)"><use xlink:href="#gap" transform="translate(260)"/></g><g transform="translate(0,95)"/><g transform="translate(0,125)"><use xlink:href="#gap" transform="translate(260)"/></g></g></g><g><g/></g></g></svg></div><h3 id="思维导图"><a class="markdownIt-Anchor" href="#思维导图"></a> 思维导图</h3><!--htmlmin:ignore--><p class="kminder_text" style="display:none">height: 200px#主题##论点1###概述1###概述2##论点2##论点3##论点4</p><!--htmlmin:ignore--><div class="kminder"></div><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>我是脚注 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
