"use strict";var customSearch;!function(l){var d=70;function u(e,a){a=a||d;var t=e.href?l(e.getAttribute("href")):l(e);l("html, body").animate({scrollTop:t.offset().top-a},400)}l(function(){var a,t,o,n,r,i,s,c;!function(){if(window.subData){var t=l("header .wrapper"),e=l(".s-comment",t),a=l(".s-toc",t);t.find(".nav-sub .logo").text(window.subData.title);var o=document.body.scrollTop;l(document,window).scroll(function(){var e=l(window).scrollTop(),a=e-o;50<=a&&100<e?(o=e,t.addClass("sub")):a<=-50&&(o=e,t.removeClass("sub"))});var n=l("#comments");n.length?e.click(function(e){e.preventDefault(),e.stopPropagation(),u(n)}):e.remove();var r=l(".toc-wrapper");r.length&&r.children().length?a.click(function(e){e.stopPropagation(),r.toggleClass("active")}):a.remove()}}(),function(){var e=l("header .menu");e.find("li a.active").removeClass("active");var a,t=location.pathname.replace(/\/|%/g,""),o=t.match(/page\d{0,}$/g);o&&(o=o[0],t=t.split(o)[0]);var n,r=t.match(/index.html/);r&&(r=r[0],t=t.split(r)[0]),0==t.length&&(t="home"),a=l("#"+t,e),(n=a)&&n.length&&n.addClass("active").siblings().removeClass("active")}(),a=l(".l_header .switcher .s-menu"),t=l(".menu-phone"),o=l(".menu-phone .author"),a.click(function(e){e.stopPropagation(),t.animate({right:0,opacity:1},"fast",function(){o.css("animation","bg-animate 20s infinite")})}),l(document).click(function(e){t.animate({right:"-240px",opacity:0},"fast",function(){o.css("animation","")})}),t.click(function(e){e.stopPropagation()}),n=l(".l_header .switcher .s-search"),r=l(".l_header"),i=l(".l_header .m_search"),0!==n.length&&(n.click(function(e){e.stopPropagation(),r.toggleClass("z_search-open"),i.find("input").focus()}),l(document).click(function(e){r.removeClass("z_search-open")}),i.click(function(e){e.stopPropagation()}),r.ready(function(){r.bind("keydown",function(a){if(9==a.keyCode)return!1;var t,o,n=!!document.all;o=a?(t=a.keycode,a):n?(t=window.event.keyCode,window.event):(t=e.which,e),9==t&&(n?(o.keyCode=0,o.returnValue=!1):(o.which=0,o.preventDefault()))})})),function(){var a=l(".toc-wrapper");if(0!==a.length){l(document).click(function(){a.removeClass("active")}),a.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?u(e.target):"SPAN"===e.target.tagName&&u(e.target.parentElement),a.removeClass("active")});var n=Array.prototype.slice.call(a.find("li a")),e=function(){n.map(function(e){Math.floor(l(e.getAttribute("href")).offset().top-d)})},r=e(),t=function(){var e=l("html").scrollTop()||l("body").scrollTop();if(r){for(var a,t=0,o=r.length-1;t<o;)r[a=t+o+1>>1]===e?t=o=a:r[a]<e?t=a:o=a-1;l(n).removeClass("active").eq(t).addClass("active")}};l(window).resize(function(){r=e(),t()}).scroll(function(){t()}),t()}}(),s=l(".s-top",".l_body"),c=document.body.scrollTop,l(document,window).scroll(function(){var e=l(window).scrollTop(),a=e-c;150<e?(a<0||e+l(window).height()==l(document).height()?(s.removeClass("fa-arrow-down"),s.addClass("fa-arrow-up")):(s.removeClass("fa-arrow-up"),s.addClass("fa-arrow-down")),c=e,s.addClass("show"),0<a?s.removeClass("hl"):s.addClass("hl")):(c=e,s.removeClass("show").removeClass("hl"))}),s.click(function(){s.hasClass("fa-arrow-down")?u("footer"):u(document.body)}),l(".copy").each(function(e,a){l(a).on("click",function(){var e=this.parentElement.parentElement.querySelector("pre").innerText,a=document.createElement("textarea"),t=this;document.body.appendChild(a),a.value=e,a.select(),document.execCommand("copy"),document.body.removeChild(a),this.setAttribute("aria-label","已复制"),this.classList.add("success"),setTimeout(function(){t.setAttribute("aria-label",""),t.classList.remove("success")},1e3)})}),l(".code-show").each(function(e,a){l(a).on("click",function(){var e,a=this.parentElement.parentElement.querySelector("pre");"hide"===this.getAttribute("type")?(e="show",a.style.maxHeight="inherit"):(e="hide",a.style.maxHeight="35rem"),this.setAttribute("type",e)})}),setTimeout(function(){l("#loading-bar-wrapper").fadeOut(500)},300),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);var AlgoliaSearch,AzureSearch,BaiduSearch,SearchService="";!function(t){SearchService=function(e){var o=this;o.config=t.extend({per_page:10,selectors:{body:"body",form:".u-search-form",input:".u-search-input",container:"#u-search",modal:"#u-search .modal",modal_body:"#u-search .modal-body",modal_footer:"#u-search .modal-footer",modal_overlay:"#u-search .modal-overlay",modal_results:"#u-search .modal-results",modal_metadata:"#u-search .modal-metadata",modal_error:"#u-search .modal-error",modal_loading_bar:"#u-search .modal-loading-bar",modal_ajax_content:"#u-search .modal-ajax-content",modal_logo:"#u-search .modal-footer .logo",btn_close:"#u-search .btn-close",btn_next:"#u-search .btn-next",btn_prev:"#u-search .btn-prev"},brands:{google:{logo:"google.svg",url:"https://cse.google.com"},algolia:{logo:"algolia.svg",url:"https://www.algolia.com"},hexo:{logo:"",url:""},azure:{logo:"azure.svg",url:"https://azure.microsoft.com/en-us/services/search/"},baidu:{logo:"baidu.svg",url:"http://zn.baidu.com/cse/home/index"}},imagePath:ROOT+"img/"},e),o.dom={},o.percentLoaded=0,o.open=!1,o.queryText="",o.nav={next:-1,prev:-1,total:0,current:1},o.parseSelectors=function(){for(var e in o.config.selectors)o.dom[e]=t(o.config.selectors[e])},o.beforeQuery=function(){o.open||(o.dom.container.fadeIn(),o.dom.body.addClass("modal-active")),o.dom.input.each(function(e,a){t(a).val(o.queryText)}),document.activeElement.blur(),o.dom.modal_error.hide(),o.dom.modal_ajax_content.removeClass("loaded"),o.startLoading()},o.afterQuery=function(){o.dom.modal_body.scrollTop(0),o.dom.modal_ajax_content.addClass("loaded"),o.stopLoading()},o.search=function(e,a){o.beforeQuery(),o.search instanceof Function?o.query(o.queryText,e,function(){o.afterQuery()}):(console.log("query() does not exist."),o.onQueryError(o.queryText,""),o.afterQuery())},o.onQueryError=function(e,a){var t="";t="success"===a?'No result found for "'+e+'".':"timeout"===a?"Unfortunate timeout.":"Mysterious failure.",o.dom.modal_results.html(""),o.dom.modal_error.html(t),o.dom.modal_error.show()},o.nextPage=function(){-1!==o.nav.next&&o.search(o.nav.next)},o.prevPage=function(){-1!==o.nav.prev&&o.search(o.nav.prev)},o.buildResult=function(e,a,t){var o="";return o="<li>",o+="<a class='result' href='"+e+"'>",o+="<span class='title'>"+a+"</span>",o+="<span class='digest'>"+t+"</span>",o+="<span class='fa fa-chevron-thin-right'></span>",o+="</a>",o+="</li>"},o.close=function(){o.open=!1,o.dom.container.fadeOut(),o.dom.body.removeClass("modal-active")},o.onSubmit=function(e){e.preventDefault(),o.queryText=t(this).find(".u-search-input").val(),o.queryText&&o.search(1)},o.startLoading=function(){o.dom.modal_loading_bar.show(),o.loadingTimer=setInterval(function(){o.percentLoaded=Math.min(o.percentLoaded+5,95),o.dom.modal_loading_bar.css("width",o.percentLoaded+"%")},100)},o.stopLoading=function(){clearInterval(o.loadingTimer),o.dom.modal_loading_bar.css("width","100%"),o.dom.modal_loading_bar.fadeOut(),setTimeout(function(){o.percentLoaded=0,o.dom.modal_loading_bar.css("width","0%")},300)},o.addLogo=function(e){var a="";o.config.brands[e]&&o.config.brands[e].logo&&(a+="<a href='"+o.config.brands[e].url+"' class='"+e+"'>",a+='<img src="'+o.config.imagePath+o.config.brands[e].logo+'" />',a+="</a>",o.dom.modal_logo.html(a))},o.destroy=function(){o.dom.form.each(function(e,a){t(a).off("submit")}),o.dom.modal_overlay.off("click"),o.dom.btn_close.off("click"),o.dom.btn_next.off("click"),o.dom.btn_prev.off("click"),o.dom.container.remove()},o.init=function(){t("body").append(a),o.parseSelectors(),o.dom.modal_footer.show(),o.dom.form.each(function(e,a){t(a).on("submit",o.onSubmit)}),o.dom.modal_overlay.on("click",o.close),o.dom.btn_close.on("click",o.close),o.dom.btn_next.on("click",o.nextPage),o.dom.btn_prev.on("click",o.prevPage)},o.init()};var a='<div id="u-search"><div class="modal"> <header class="modal-header" class="clearfix"><form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm"> <input type="text" id="u-search-modal-input" class="u-search-input" /> <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit"> <span class="fa fa-search"></span> </button></form> <a class="btn-close"> <span class="fa fa-times"></span> </a><div class="modal-loading"><div class="modal-loading-bar"></div></div> </header> <main class="modal-body"><ul class="modal-results modal-ajax-content"></ul> </main> <footer class="modal-footer clearfix"><div class="modal-metadata modal-ajax-content"> <strong class="range"></strong> of <strong class="total"></strong></div><div class="modal-error"></div> <div class="logo"></div> <a class="nav btn-next modal-ajax-content"> <span class="text">NEXT</span> <span class="fa fa-chevron-right"></span> </a> <a class="nav btn-prev modal-ajax-content"> <span class="fa fa-chevron-left"></span> <span class="text">PREV</span> </a> </footer></div><div class="modal-overlay"></div></div>'}(jQuery),function(t){AlgoliaSearch=function(e){SearchService.apply(this,arguments);var i=this,a="https://"+i.config.app_id+"-dsn.algolia.net/1/indexes/"+i.config.indexName;return i.addLogo("algolia"),i.buildResultList=function(e){var r="";return t.each(e,function(e,a){var t=a.permalink||a.path||"";!a.permalink&&a.path&&(t=ROOT+t);var o=a.title,n=a._highlightResult.excerptStrip.value||"";r+=i.buildResult(t,o,n)}),r},i.buildMetadata=function(e){i.nav.current=e.page*e.hitsPerPage+1,i.nav.currentCount=e.hits.length,i.nav.total=parseInt(e.nbHits),i.dom.modal_metadata.children(".total").html(i.nav.total),i.dom.modal_metadata.children(".range").html(i.nav.current+"-"+(i.nav.current+i.nav.currentCount-1)),0<i.nav.total?i.dom.modal_metadata.show():i.dom.modal_metadata.hide(),e.page<e.nbPages-1?(i.nav.next=e.page+1+1,i.dom.btn_next.show()):(i.nav.next=-1,i.dom.btn_next.hide()),0<e.page?(i.nav.prev=e.page+1-1,i.dom.btn_prev.show()):(i.nav.prev=-1,i.dom.btn_prev.hide())},i.query=function(o,e,n){t.get(a,{query:o,page:e-1,hitsPerPage:i.config.per_page,"x-algolia-application-id":i.config.app_id,"x-algolia-api-key":i.config.apiKey},function(e,a){if("success"===a&&e.hits&&0<e.hits.length){var t=i.buildResultList(e.hits);i.dom.modal_results.html(t)}else i.onQueryError(o,a);i.buildMetadata(e),n&&n(e)})},i}}(jQuery),function(t){AzureSearch=function(e){SearchService.apply(this,arguments);var i=this,a="https://"+i.config.serviceName+".search.windows.net/indexes/"+i.config.indexName+"/docs?api-version=2015-02-28";return i.nav.current=1,i.addLogo("azure"),i.buildResultList=function(e){var r="";return t.each(e,function(e,a){var t=a.permalink||a.path||"";!a.permalink&&a.path&&(t="/"+t);var o=a.title,n=a.excerpt||"";r+=i.buildResult(t,o,n)}),r},i.buildMetadata=function(e,a){i.nav.current=a,i.nav.currentCount=e.value.length,i.nav.total=parseInt(e["@odata.count"]),i.dom.modal_metadata.children(".total").html(i.nav.total),i.dom.modal_metadata.children(".range").html(i.nav.current+"-"+(i.nav.current+i.nav.currentCount-1)),0<i.nav.total?i.dom.modal_metadata.show():i.dom.modal_metadata.hide(),i.nav.current+i.nav.currentCount<=i.nav.total?(i.nav.next=i.nav.current+i.nav.currentCount,i.dom.btn_next.show()):(i.nav.next=-1,i.dom.btn_next.hide()),1<i.nav.current?(i.nav.prev=i.nav.current-i.config.per_page,i.dom.btn_prev.show()):(i.nav.prev=-1,i.dom.btn_prev.hide())},i.query=function(o,n,r){t.ajax({url:a,headers:{Accept:"application/json","api-key":i.config.queryKey},data:{search:o,$orderby:"date desc",$skip:n-1,$top:i.config.per_page,$count:!0},type:"GET",success:function(e,a){if("success"===a&&e.value&&0<e.value.length){var t=i.buildResultList(e.value);i.dom.modal_results.html(t)}else i.onQueryError(o,a);i.buildMetadata(e,n),r&&r(e)}})},i}}(jQuery),function(r){BaiduSearch=function(e){SearchService.apply(this,arguments);var n=this;return n.addLogo("baidu"),n.buildResultList=function(e,t){var o="";return r.each(e,function(e,a){n.contentSearch(a,t)&&(o+=n.buildResult(a.linkUrl,a.title,a.abstract))}),o},n.buildMetadata=function(e){},n.loadScript=function(){n.dom.input.each(function(e,a){r(a).attr("disabled",!0)});var e="<script src='http://zhannei.baidu.com/api/customsearch/apiaccept?sid="+n.config.apiId+"&v=2.0&callback=customSearch.initBaidu' type='text/javascript' charset='utf-8'><\/script>";n.dom.body.append(e)},n.initBaidu=function(){n.cse=new BCse.Search(n.config.apiId),n.dom.input.each(function(e,a){r(a).attr("disabled",!1)})},n.query=function(a,e,t){n.cse.getResult(a,function(e){console.log("Searching: "+a),console.log(e),n.cse.getError(function(e){console.log(e)}),0<e.length?(n.buildResultList(e,a),n.cse.getSearchInfo(a,function(e){console.log(e),n.buildMetadata(e)})):(n.nav.total=0,n.nav.next=-1,n.nav.prev=-1,n.dom.modal_metadata.hide(),n.dom.btn_next.hide(),n.dom.btn_prev.hide(),n.onQueryError(a,"success")),t instanceof Function&&t()})},n.loadScript(),n}}(jQuery);var HexoSearch,GoogleCustomSearch="";!function(a){GoogleCustomSearch=function(e){SearchService.apply(this,arguments);var i=this;return i.addLogo("google"),i.buildResultList=function(e){var r="";return a.each(e,function(e,a){var t=a.link,o=a.title,n=(a.htmlSnippet||"").replace("<br>","");r+=i.buildResult(t,o,n)}),r},i.buildMetadata=function(e){e.queries&&e.queries.request&&"0"!==e.queries.request[0].totalResults?(i.nav.current=e.queries.request[0].startIndex,i.nav.currentCount=e.queries.request[0].count,i.nav.total=parseInt(e.queries.request[0].totalResults),i.dom.modal_metadata.children(".total").html(i.nav.total),i.dom.modal_metadata.children(".range").html(i.nav.current+"-"+(i.nav.current+i.nav.currentCount-1)),i.dom.modal_metadata.show()):i.dom.modal_metadata.hide(),e.queries&&e.queries.nextPage?(i.nav.next=e.queries.nextPage[0].startIndex,i.dom.btn_next.show()):(i.nav.next=-1,i.dom.btn_next.hide()),e.queries&&e.queries.previousPage?(i.nav.prev=e.queries.previousPage[0].startIndex,i.dom.btn_prev.show()):(i.nav.prev=-1,i.dom.btn_prev.hide())},i.query=function(o,e,n){a.get("https://www.googleapis.com/customsearch/v1",{key:i.config.apiKey,cx:i.config.engineId,q:o,start:e,num:i.config.per_page},function(e,a){if("success"===a&&e.items&&0<e.items.length){var t=i.buildResultList(e.items);i.dom.modal_results.html(t)}else i.onQueryError(o,a);i.buildMetadata(e),n&&n()})},i}}(jQuery),function(h){HexoSearch=function(e){SearchService.apply(this,arguments);var r=this;return r.config.endpoint=ROOT+((e||{}).endpoint||"content.json"),r.config.endpoint=r.config.endpoint.replace("//","/"),r.cache="",r.contentSearch=function(r,e){var i=r.title.trim().toLowerCase(),s=r.text.trim().toLowerCase(),c=e.trim().toLowerCase().split(" "),l=!1,d=-1,u=-1,m=-1;return""!==i&&""!==s&&h.each(c,function(e,a){if(d=i.indexOf(a),u=s.indexOf(a),d<0&&u<0?l=!1:(l=!0,u<0&&(u=0),0<=d&&c.forEach(function(e){var a=new RegExp(e,"gi");r.title=r.title.replace(a,"<b class='search-keyword'>"+e+"</b>")}),0===e&&(m=u)),l){s=r.text.trim();var t=0,o=0;if(0<=m){o=0===(t=Math.max(m-30,0))?Math.min(200,s.length):Math.min(m+170,s.length);var n=s.substring(t,o);c.forEach(function(e){var a=new RegExp(e,"gi");n=n.replace(a,"<b class='search-keyword'>"+e+"</b>")}),r.digest=n}else o=Math.min(200,s.length),r.digest=s.trim().substring(0,o)}}),l},r.buildResultList=function(e,t){var o="";return h.each(e,function(e,a){r.contentSearch(a,t)&&(o+=r.buildResult(a.permalink,a.title,a.digest))}),o},r.buildMetadata=function(e){r.dom.modal_footer.hide()},r.query=function(o,e,n){if(r.cache){var a="";a+=r.buildResultList(r.cache.pages,o),a+=r.buildResultList(r.cache.posts,o),r.dom.modal_results.html(a),r.buildMetadata(r.cache),n&&n(r.cache)}else h.get(r.config.endpoint,{key:r.config.apiKey,cx:r.config.engineId,q:o,start:e,num:r.config.per_page},function(e,a){if("success"!==a||!e||!e.posts&&!e.pages||e.posts.length<1&&e.pages.length<1)r.onQueryError(o,a);else{r.cache=e;var t="";t+=r.buildResultList(e.pages,o),t+=r.buildResultList(e.posts,o),r.dom.modal_results.html(t)}r.buildMetadata(e),n&&n(e)})},r}}(jQuery);