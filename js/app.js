"use strict";var customSearch;!function(v){var C=70;function E(e,a){a=a||C;e=e.href?v(e.getAttribute("href")):v(e);v("html, body").animate({scrollTop:e.offset().top-a},400)}v(function(){var o,a,t,n,i,c,r,s,l,d,u,m,h,p,f,g,w;window.subData&&(o=v("header .wrapper"),a=v(".s-comment",o),s=v(".s-toc",o),o.find(".nav-sub .logo").text(window.subData.title),t=document.body.scrollTop,v(document,window).scroll(function(){var e=v(window).scrollTop(),a=e-t;50<=a&&100<e?(t=e,o.addClass("sub")):a<=-50&&(t=e,o.removeClass("sub"))}),(n=v("#comments")).length?a.click(function(e){e.preventDefault(),e.stopPropagation(),E(n)}):a.remove(),(i=v(".toc-wrapper")).length&&i.children().length?s.click(function(e){e.stopPropagation(),i.toggleClass("active")}):s.remove()),function(){var e=v("header .menu");e.find("li a.active").removeClass("active");var a=location.pathname.replace(/\/|%/g,""),o=a.match(/page\d{0,}$/g);o&&(o=o[0],a=a.split(o)[0]),(o=a.match(/index.html/))&&(o=o[0],a=a.split(o)[0]),0==a.length&&(a="home"),e=v("#"+a,e),(e=e)&&e.length&&e.addClass("active").siblings().removeClass("active")}(),s=v(".l_header .switcher .s-menu"),c=v(".menu-phone"),r=v(".menu-phone .author"),s.click(function(e){e.stopPropagation(),c.animate({right:0,opacity:1},"fast",function(){r.css("animation","bg-animate 20s infinite")})}),v(document).click(function(e){c.animate({right:"-240px",opacity:0},"fast",function(){r.css("animation","")})}),c.click(function(e){e.stopPropagation()}),s=v(".l_header .switcher .s-search"),l=v(".l_header"),d=v(".l_header .m_search"),0!==s.length&&(s.click(function(e){e.stopPropagation(),l.toggleClass("z_search-open"),d.find("input").focus()}),v(document).click(function(e){l.removeClass("z_search-open")}),d.click(function(e){e.stopPropagation()}),l.ready(function(){l.bind("keydown",function(a){if(9==a.keyCode)return!1;var o,t=!!document.all,a=a?(o=a.keycode,a):t?(o=window.event.keyCode,window.event):(o=e.which,e);9==o&&(t?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})})),0!==(f=v(".toc-wrapper")).length&&(v(document).click(function(){f.removeClass("active")}),f.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?E(e.target):"SPAN"===e.target.tagName&&E(e.target.parentElement),f.removeClass("active")}),u=Array.prototype.slice.call(f.find("li a")),h=(m=function(){u.map(function(e){Math.floor(v(e.getAttribute("href")).offset().top-C)})})(),p=function(){var e=v("html").scrollTop()||v("body").scrollTop();if(h){for(var a,o=0,t=h.length-1;o<t;)h[a=o+t+1>>1]===e?o=t=a:h[a]<e?o=a:t=a-1;v(u).removeClass("active").eq(o).addClass("active")}},v(window).resize(function(){h=m(),p()}).scroll(function(){p()}),p()),g=v(".s-top",".l_body"),w=document.body.scrollTop,v(document,window).scroll(function(){var e=v(window).scrollTop(),a=e-w;150<e?(e>v("body").height()/2||e+v(window).height()==v(document).height()?(g.removeClass("fa-arrow-down"),g.addClass("fa-arrow-up")):(g.removeClass("fa-arrow-up"),g.addClass("fa-arrow-down")),w=e,g.addClass("show"),0<a?g.removeClass("hl"):g.addClass("hl")):(w=e,g.removeClass("show").removeClass("hl"))}),g.click(function(){g.hasClass("fa-arrow-down")?E("footer"):E(document.body)}),v(".post-donate")[0].click(function(){var e=v(".QR")[0];"block"==e.css("display")?e.fadeOut(500):e.fadeIn(500)}),setTimeout(function(){v("#loading-bar-wrapper").fadeOut(500)},300),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);