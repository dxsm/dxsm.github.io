"use strict";var customSearch;!function(C){var v=70;function E(e,a){a=a||v;e=e.href?C(e.getAttribute("href")):C(e);C("html, body").animate({scrollTop:e.offset().top-a},400)}C(function(){var o,a,t,n,i,c,r,s,l,u,d,m,h,p,f,g,w;window.subData&&(o=C("header .wrapper"),a=C(".s-comment",o),s=C(".s-toc",o),o.find(".nav-sub .logo").text(window.subData.title),t=document.body.scrollTop,C(document,window).scroll(function(){var e=C(window).scrollTop(),a=e-t;50<=a&&100<e?(t=e,o.addClass("sub")):a<=-50&&(t=e,o.removeClass("sub"))}),(n=C("#comments")).length?a.click(function(e){e.preventDefault(),e.stopPropagation(),E(n)}):a.remove(),(i=C(".toc-wrapper")).length&&i.children().length?s.click(function(e){e.stopPropagation(),i.toggleClass("active")}):s.remove()),function(){var e=C("header .menu");e.find("li a.active").removeClass("active");var a=location.pathname.replace(/\/|%/g,""),o=a.match(/page\d{0,}$/g);o&&(o=o[0],a=a.split(o)[0]),(o=a.match(/index.html/))&&(o=o[0],a=a.split(o)[0]),0==a.length&&(a="home"),e=C("#"+a,e),(e=e)&&e.length&&e.addClass("active").siblings().removeClass("active")}(),s=C(".l_header .switcher .s-menu"),c=C(".menu-phone"),r=C(".menu-phone .author"),s.click(function(e){e.stopPropagation(),c.animate({right:0,opacity:1},"fast",function(){r.css("animation","bg-animate 20s infinite")})}),C(document).click(function(e){c.animate({right:"-240px",opacity:0},"fast",function(){r.css("animation","")})}),c.click(function(e){e.stopPropagation()}),s=C(".l_header .switcher .s-search"),l=C(".l_header"),u=C(".l_header .m_search"),0!==s.length&&(s.click(function(e){e.stopPropagation(),l.toggleClass("z_search-open"),u.find("input").focus()}),C(document).click(function(e){l.removeClass("z_search-open")}),u.click(function(e){e.stopPropagation()}),l.ready(function(){l.bind("keydown",function(a){if(9==a.keyCode)return!1;var o,t=!!document.all,a=a?(o=a.keycode,a):t?(o=window.event.keyCode,window.event):(o=e.which,e);9==o&&(t?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})})),0!==(f=C(".toc-wrapper")).length&&(C(document).click(function(){f.removeClass("active")}),f.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?E(e.target):"SPAN"===e.target.tagName&&E(e.target.parentElement),f.removeClass("active")}),d=Array.prototype.slice.call(f.find("li a")),h=(m=function(){d.map(function(e){Math.floor(C(e.getAttribute("href")).offset().top-v)})})(),p=function(){var e=C("html").scrollTop()||C("body").scrollTop();if(h){for(var a,o=0,t=h.length-1;o<t;)h[a=o+t+1>>1]===e?o=t=a:h[a]<e?o=a:t=a-1;C(d).removeClass("active").eq(o).addClass("active")}},C(window).resize(function(){h=m(),p()}).scroll(function(){p()}),p()),g=C(".s-top",".l_body"),w=document.body.scrollTop,C(document,window).scroll(function(){var e=C(window).scrollTop(),a=e-w;150<e?(e>C("body").height()/2||e+C(window).height()==C(document).height()?(g.removeClass("fa-arrow-down"),g.addClass("fa-arrow-up")):(g.removeClass("fa-arrow-up"),g.addClass("fa-arrow-down")),w=e,g.addClass("show"),0<a?g.removeClass("hl"):g.addClass("hl")):(w=e,g.removeClass("show").removeClass("hl"))}),g.click(function(){g.hasClass("fa-arrow-down")?E("footer"):E(document.body)}),setTimeout(function(){C("#loading-bar-wrapper").fadeOut(500)},300),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);