"use strict";var customSearch;!function(l){var u=70;function d(e,a){a=a||u;var o=e.href?l(e.getAttribute("href")):l(e);l("html, body").animate({scrollTop:o.offset().top-a},400)}l(function(){var a,o,t,n,i,r,c,s;!function(){if(window.subData){var o=l("header .wrapper"),e=l(".s-comment",o),a=l(".s-toc",o);o.find(".nav-sub .logo").text(window.subData.title);var t=document.body.scrollTop;l(document,window).scroll(function(){var e=l(window).scrollTop(),a=e-t;50<=a&&100<e?(t=e,o.addClass("sub")):a<=-50&&(t=e,o.removeClass("sub"))});var n=l("#comments");n.length?e.click(function(e){e.preventDefault(),e.stopPropagation(),d(n)}):e.remove();var i=l(".toc-wrapper");i.length&&i.children().length?a.click(function(e){e.stopPropagation(),i.toggleClass("active")}):a.remove()}}(),function(){var e=l("header .menu");e.find("li a.active").removeClass("active");var a,o=location.pathname.replace(/\/|%/g,""),t=o.match(/page\d{0,}$/g);t&&(t=t[0],o=o.split(t)[0]);var n,i=o.match(/index.html/);i&&(i=i[0],o=o.split(i)[0]),0==o.length&&(o="home"),a=l("#"+o,e),(n=a)&&n.length&&n.addClass("active").siblings().removeClass("active")}(),a=l(".l_header .switcher .s-menu"),o=l(".menu-phone"),t=l(".menu-phone .author"),a.click(function(e){e.stopPropagation(),o.animate({right:0,opacity:1},"fast",function(){t.css("animation","bg-animate 20s infinite")})}),l(document).click(function(e){o.animate({right:"-240px",opacity:0},"fast",function(){t.css("animation","")})}),o.click(function(e){e.stopPropagation()}),n=l(".l_header .switcher .s-search"),i=l(".l_header"),r=l(".l_header .m_search"),0!==n.length&&(n.click(function(e){e.stopPropagation(),i.toggleClass("z_search-open"),r.find("input").focus()}),l(document).click(function(e){i.removeClass("z_search-open")}),r.click(function(e){e.stopPropagation()}),i.ready(function(){i.bind("keydown",function(a){if(9==a.keyCode)return!1;var o,t,n=!!document.all;t=a?(o=a.keycode,a):n?(o=window.event.keyCode,window.event):(o=e.which,e),9==o&&(n?(t.keyCode=0,t.returnValue=!1):(t.which=0,t.preventDefault()))})})),function(){var a=l(".toc-wrapper");if(0!==a.length){l(document).click(function(){a.removeClass("active")}),a.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?d(e.target):"SPAN"===e.target.tagName&&d(e.target.parentElement),a.removeClass("active")});var n=Array.prototype.slice.call(a.find("li a")),e=function(){n.map(function(e){Math.floor(l(e.getAttribute("href")).offset().top-u)})},i=e(),o=function(){var e=l("html").scrollTop()||l("body").scrollTop();if(i){for(var a,o=0,t=i.length-1;o<t;)i[a=o+t+1>>1]===e?o=t=a:i[a]<e?o=a:t=a-1;l(n).removeClass("active").eq(o).addClass("active")}};l(window).resize(function(){i=e(),o()}).scroll(function(){o()}),o()}}(),c=l(".s-top",".l_body"),s=document.body.scrollTop,l(document,window).scroll(function(){var e=l(window).scrollTop(),a=e-s;150<e?(e>l("body").height()/2||e+l(window).height()==l(document).height()?(c.removeClass("fa-arrow-down"),c.addClass("fa-arrow-up")):(c.removeClass("fa-arrow-up"),c.addClass("fa-arrow-down")),s=e,c.addClass("show"),0<a?c.removeClass("hl"):c.addClass("hl")):(s=e,c.removeClass("show").removeClass("hl"))}),c.click(function(){c.hasClass("fa-arrow-down")?d("footer"):d(document.body)}),setTimeout(function(){l("#loading-bar-wrapper").fadeOut(500)},300),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))})}(jQuery);